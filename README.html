<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-11-14 Sun 02:56 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="author" content="Nan0Scho1ar" />
<meta name="generator" content="org mode" />
<meta name="theme-color" content="#77aa99" />
<meta property="og:type" content="article" />
<meta property="og:title" content="" />
<meta property="og:image" content="https://n0s1.net/resources/org/nib.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:image:alt" content="Green fountain pen nib" />
<meta property="og:article:author:first_name" content="Nan0Scho1ar" />
<meta property="og:article:published_time" content="2021-11-14T02:20:59+1000" />
<meta property="og:article:modified_time" content="2021-11-14T02:20:59+1000" />
<script>
// @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
function copyPreToClipbord(btn) {
    const pre = btn.parentElement.parentElement.getElementsByTagName("PRE")[0];
    const range = document.createRange();
    range.selectNodeContents(pre);
    range.setEnd(pre.childNodes[pre.childNodes.length-1], 0);
    window.getSelection().addRange(range);
    var successful = document.execCommand('copy');
    window.getSelection().removeRange(range);
}
window.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById("text-table-of-contents")) {
        const sections = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        const activate = (entry) => {
            entry.classList.add('active');
            if (["LI", "UL"].includes(entry.parentElement.tagName)) {
                activate(entry.parentElement);
            }
        };
        const activateLast = () => {
            document.querySelectorAll('#text-table-of-contents li.active, #text-table-of-contents ul.active').forEach(a => {
                a.classList.remove('active')
            });
            let mostRecent = { section: sections[0], bottom: -Infinity };
            const windowHeight = window.innerHeight;
            sections.forEach((section) => {
                const bounds = section.getBoundingClientRect()
                if ( bounds.bottom > mostRecent.bottom && bounds.top < windowHeight ) {
                    mostRecent = { section, bottom: bounds.bottom };
                }
            })
            activate(document.querySelector(`#text-table-of-contents li a[href="#${mostRecent.section.getAttribute('id')}"]`).parentElement);
        }
        const observer = new IntersectionObserver(entries => {
            activateLast();
        });
        sections.forEach((section) => {
            observer.observe(section);
        });}
});
// @license-end
</script>
<style>
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */
html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}b{font-weight:bolder}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}button{-webkit-appearance:button}button::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring{outline:1px dotted ButtonText}details{display:block}summary{display:list-item}
/*! end normalise.css */
#page{--accent: #002642;--accent-dark: #00151c;--code-foreground: #2c3e50;--code-background: #efefef;--code-func: #6c3163;--code-const: #4e3163;--code-regex: #655370;--back-white: #fff;--back-light: #f0eeed;--back-medium: #c8c8c8;--text-light: #7b7b7b;--text-gray: #444;--text-medium: #222;--text-dark: #000;--switch-icon: "ðŸŒš";--switch-shadow-color: #373d4e;--switch-text: "dark mode?"}#theme-switch:checked~#page{--accent: #002642;--accent-dark: #daf1ff;--code-foreground: #a1a8ae;--code-background: #222;--code-func: #bd56ad;--code-const: #8755ab;--code-regex: #a184b3;--back-white: #000;--back-light: #181818;--back-medium: #444;--text-light: #7b7b7b;--text-gray: #c8c8c8;--text-medium: #ddd;--text-dark: #efefef;--switch-icon: "ðŸŒ";--switch-shadow-color: #fce477;--switch-text: "light mode?"}#theme-switch:checked~#page img.invertible,#theme-switch:checked~#page object.invertible[type="image/svg+xml"]{filter:invert(90%) hue-rotate(180deg) sepia(1%)}#theme-switch{display:none}#switch-label{position:fixed;bottom:4rem;left:3rem}#switch-label::before{content:var(--switch-icon);font-size:20px;transition:text-shadow .2s}#switch-label::after{content:var(--switch-text);color:var(--switch-shadow-color);font-size:12px;visibility:hidden;margin-left:.5em;z-index:1;position:fixed;bottom:calc(4rem - 25px);left:calc(3rem - 10px)}@media (max-width:1000px){#switch-label{left:auto;bottom:auto;right:1vw;top:1vh}#switch-label::after{position:fixed;top:calc(1vh + 3px);right:calc(1vw + 30px);left:auto;bottom:auto}}#switch-label:hover::before,#theme-switch:focus~#page #switch-label::before{text-shadow:0 0 15px var(--switch-shadow-color)}#switch-label:hover::after,#theme-switch:focus~#page #switch-label::after{visibility:visible}::selection{background:var(--back-medium)}.pace .pace-progress{background-color:var(--accent)!important}body,html{height:100%}body{display:flex;flex-direction:column;font-size:16px;font-family:"Merriweather",serif}#page{color:var(--text-dark);background-color:var(--back-light);transition-property:color,background-color;transition-duration:100ms}#content,.page-header,header{margin:32px;flex:1 0 auto}#content{margin-top:4rem;min-height:calc(100vh - 4rem - 48px)}.clearfix::after{clear:both}.clearfix::after,.clearfix::before{content:" ";display:table}.page-header{margin-top:80px;margin-left:0!important}.page-header h1{font-size:40px;margin-bottom:10px;margin-top:10px;text-transform:none}.page-header h1 .subtitle{font-size:24px;color:var(--text-light);margin:0}.page-meta,figure figcaption .figure-number,header .site-nav{font-family:"Open Sans",sans;font-weight:400;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light)}header .site-nav{font-weight:700;line-height:2;margin-top:22px}header .site-nav a{color:var(--text-light);text-decoration:none;margin-left:10px}header .site-nav a:hover{color:var(--text-gray)}header .site-nav a.active{border-bottom:solid;border-bottom-width:2px}header .site-nav a:first-child{margin-left:0}header>div{display:inherit}.site-title{font-size:16px}.site-title span{display:none!important}.site-title ul{display:block!important;list-style:none;padding:0;margin:0}.site-title ul img{border-radius:2px;max-width:32px}.site-header nav a{color:var(--text-light);font-family:"Open Sans",sans;font-size:12px;font-weight:700;text-transform:uppercase}.site-header nav a:hover{border:0;color:var(--accent)}@media (max-width:1000px){header *{display:inline}}@media (min-width:1000px){#content,.page-header,header{max-width:720px;margin-left:164px}header .site-title{float:left}header .site-nav{float:right;margin-top:0}}@media (min-width:2800px){#content,.page-header,header{margin-left:auto;margin-right:auto}}#content .page-intro{font-family:"Open Sans",sans;font-weight:400;font-size:15px;line-height:1.6;color:var(--text-gray);margin-bottom:40px}#content dd,#content li,#content p{line-height:1.9}#footer{margin-top:70px;height:10px;background:var(--accent-dark)}.archive-item{margin:50px 0}.archive-item .archive-title{font-size:25px;margin:5px 0}.archive-item .archive-title,.archive-item .archive-title:hover{background:0 0;text-shadow:none;text-decoration:none}#postamble,details.code[open] summary .lang{display:none}aside{background-color:var(--code-background);border-radius:5px;margin:20px 0;padding:5px 20px 10px}#footnotes li,#footnotes p,.org-ref-bib,.org-ref-bib-h1,aside,aside p,blockquote footer{font-family:"Open Sans",sans;font-weight:400;color:var(--text-gray)}aside,aside p{font-size:15px;line-height:1.6!important}aside pre{font-size:12px;border:0;padding-left:0}@media (min-width:1280px){aside{float:right;clear:right;background-color:var(--back-white);max-width:45%!important;margin-right:-52%}aside::before{content:''}}blockquote{border-left-style:solid;border-width:0 0 0 1px;border-left-color:var(--back-medium);margin:20px 0;padding:0 0 0 15px}blockquote p{display:inline;font-size:13px}blockquote footer{font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);text-transform:none}div.info{background:rgba(58,129,195,.15);border-left:4px solid rgba(58,129,195,.45);margin:1.8rem 0 1.25rem 15px;padding:.8em;line-height:1.4;text-align:center;position:relative;clear:both}div.error p,div.info p,div.success p,div.warning p{margin:0}div.error::before,div.info::before,div.success::before,div.warning::before{color:var(--back-white);align-items:flex-end;top:-1rem;font-weight:700;font-size:1.4rem;display:inline-flex;justify-content:center;position:absolute;left:-1.2rem;text-align:center}div.info::before{content:"i";background:rgba(58,129,195,.8);-webkit-clip-path:circle(50% at 50% 50%);clip-path:circle(50% at 50% 50%);width:30px;height:30px;line-height:1.3}div.success{background:rgba(45,149,116,.15);border-left:4px solid rgba(45,149,116,.45)}div.error::before,div.success::before,div.warning::before{width:35px}div.success::before{content:"âœ”";background:rgba(45,149,116,.8);-webkit-clip-path:polygon(50% 0,100% 50%,50% 100%,0 50%);clip-path:polygon(50% 0,100% 50%,50% 100%,0 50%);height:35px;line-height:1.5}div.error,div.success,div.warning{margin:1.8rem 0 1.25rem 15px;padding:.8em;line-height:1.4;text-align:center;position:relative;clear:both}div.warning{background:rgba(220,117,47,.15);border-left:4px solid rgba(220,117,47,.45)}div.error::before,div.warning::before{content:"!";line-height:1.1}div.warning::before{background:rgba(220,117,47,.8);-webkit-clip-path:polygon(50% 0,0 100%,100% 100%);clip-path:polygon(50% 0,0 100%,100% 100%);height:35px}div.error{background:rgba(186,47,89,.15);border-left:4px solid rgba(186,47,89,.45)}div.error::before{background:rgba(186,47,89,.8);-webkit-clip-path:polygon(25% 0,75% 0,100% 50%,75% 100%,25% 100%,0 50%);clip-path:polygon(25% 0,75% 0,100% 50%,75% 100%,25% 100%,0 50%);height:30px}#footnotes li,#footnotes p,.org-ref-bib,.org-ref-bib-h1{line-height:1.6}.org-ref-bib-h1{margin-top:70px;padding-top:30px;border-top-style:solid;border-width:1px 0 0;border-color:var(--back-light);font-size:20px}#footnotes li,#footnotes p,.org-ref-bib{font-size:15px}.org-ref-bib li>a:nth-child(2),.org-ref-bib li>a:nth-child(2):hover{background:0 0;text-shadow:none;text-decoration:none}.org-ref-bib .bib-link{font-family:"Open Sans",sans;font-weight:400;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light);background:0 0;text-shadow:none;text-decoration:none}pre.example,pre.src{border-left-style:solid;border-width:0 0 0 1px;border-left-color:var(--back-medium);margin:20px 0;padding:0 0 0 15px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:14px;line-height:1.9;overflow-x:visible;box-shadow:none;white-space:pre-wrap;position:relative}pre.example{border-left-style:dotted;border-width:0 0 0 2px}pre.src::before{display:inline-block;position:absolute;background-color:transparent;top:unset;bottom:-16px;left:20px;padding:0;border:0;font-size:80%;font-style:italic;color:var(--text-light)}pre.src:empty{display:none}code{color:var(--code-foreground);padding:0 5px}kbd{display:inline-block;padding:.25em .35em;font:80% SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:80%;color:var(--text-gray);vertical-align:middle;background-color:var(--back-light);border:1px solid #91959a88;border-radius:.35em;box-shadow:inset 0 -1px 0 #91959a88}li code{font-size:14px}code,dl li p,li p code,ol li p,ul li p{font-size:15px}details.code{position:relative}details.code summary{position:relative;left:-3px;padding-left:10px;padding-bottom:4px;margin-left:-10px;z-index:1;outline:0;font-family:"Open Sans",sans;font-weight:400;font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light)}details.code summary .name{font-size:14px;color:var(--text-medium);margin-right:.7em}code,details.code summary .lang{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace}details.code summary .lang{font-style:italic}details.code summary::marker{color:var(--back-medium)}details.code[open] summary{margin-bottom:-32px}details.code[open] summary.named{margin-bottom:-26px}details.code:not([open]) summary{margin-bottom:-5px}p+details.code{margin-top:-20px}li p+details.code{margin-top:-5px}.example,.src{color:var(--code-foreground)}.example .org-keyword,.src .org-keyword{color:#3a81c3}.example .org-variable-name,.src .org-variable-name{color:#715ab1}.example .org-rainbow-delimiters-depth-1,.example .org-rainbow-delimiters-depth-2,.example .org-rainbow-delimiters-depth-3,.example .org-rainbow-delimiters-depth-4,.example .org-rainbow-delimiters-depth-5,.example .org-rainbow-delimiters-depth-6,.example .org-rainbow-delimiters-depth-7,.example .org-rainbow-delimiters-depth-8,.example .org-rainbow-delimiters-depth-9,.src .org-rainbow-delimiters-depth-1,.src .org-rainbow-delimiters-depth-2,.src .org-rainbow-delimiters-depth-3,.src .org-rainbow-delimiters-depth-4,.src .org-rainbow-delimiters-depth-5,.src .org-rainbow-delimiters-depth-6,.src .org-rainbow-delimiters-depth-7,.src .org-rainbow-delimiters-depth-8,.src .org-rainbow-delimiters-depth-9{color:#555}.example .org-string,.src .org-string{color:#2d9574}.example .org-comment,.example .org-comment-delimiter,.src .org-comment,.src .org-comment-delimiter{color:#555}.example .org-function-name,.src .org-function-name{color:var(--code-func)}.example .org-constant,.example .org-highlight-numbers-number,.src .org-constant,.src .org-highlight-numbers-number{color:var(--code-const)}.gutter{position:absolute;top:0;left:-2.5rem;width:2rem;padding-right:.3rem;padding-top:5px;height:calc(100% - 10px);z-index:1;transition:opacity 200ms;opacity:0;font-size:15px}.gutter:hover{opacity:1}.gutter *{display:block;width:100%;text-align:right;padding:0;margin:0;color:var(--text-light)}#content .page-intro p a:hover:visited,#content .page-intro p a:visited,#footnotes a:hover:visited,#footnotes a:visited,.gutter :hover{color:var(--text-gray)}.gutter :active{font-weight:700}.gutter a{text-decoration:none;font-size:110%}.gutter button{background:0 0;border:0}pre.src-asymptote::before{content:'Asymptote'}pre.src-authinfo::before{content:'Authinfo'}pre.src-awk::before{content:'Awk'}pre.src-C::before{content:'C'}pre.src-clojure::before{content:'Clojure'}pre.src-css::before{content:'CSS'}pre.src-D::before{content:'D'}pre.src-ditaa::before{content:'ditaa'}pre.src-dot::before{content:'Graphviz'}pre.src-calc::before{content:'Emacs Calc'}pre.src-emacs-lisp::before{content:'Emacs Lisp'}pre.src-fortran::before{content:'Fortran'}pre.src-gnuplot::before{content:'gnuplot'}pre.src-haskell::before{content:'Haskell'}pre.src-hledger::before{content:'hledger'}pre.src-java::before{content:'Java'}pre.src-js::before{content:'Javascript'}pre.src-latex::before{content:'LaTeX'}pre.src-ledger::before{content:'Ledger'}pre.src-lisp::before{content:'Lisp'}pre.src-lilypond::before{content:'Lilypond'}pre.src-lua::before{content:'Lua'}pre.src-matlab::before{content:'MATLAB'}pre.src-mscgen::before{content:'Mscgen'}pre.src-ocaml::before{content:'Objective Caml'}pre.src-octave::before{content:'Octave'}pre.src-org::before{content:'Org mode'}pre.src-oz::before{content:'OZ'}pre.src-plantuml::before{content:'Plantuml'}pre.src-processing::before{content:'Processing.js'}pre.src-python::before{content:'Python'}pre.src-R::before{content:'R'}pre.src-ruby::before{content:'Ruby'}pre.src-sass::before{content:'Sass'}pre.src-scheme::before{content:'Scheme'}pre.src-screen::before{content:'Gnu Screen'}pre.src-sed::before{content:'Sed'}pre.src-sh::before{content:'shell'}pre.src-sql::before{content:'SQL'}pre.src-sqlite::before{content:'SQLite'}pre.src-forth::before{content:'Forth'}pre.src-io::before{content:'IO'}pre.src-J::before{content:'J'}pre.src-makefile::before{content:'Makefile'}pre.src-maxima::before{content:'Maxima'}pre.src-perl::before{content:'Perl'}pre.src-picolisp::before{content:'Pico Lisp'}pre.src-scala::before{content:'Scala'}pre.src-shell::before{content:'Shell Script'}pre.src-systemd::before{content:'Systemd'}pre.src-ebnf2ps::before{content:'ebfn2ps'}pre.src-cpp::before{content:'C++'}pre.src-abc::before{content:'ABC'}pre.src-coq::before{content:'Coq'}pre.src-groovy::before{content:'Groovy'}pre.src-bash::before{content:'bash'}pre.src-csh::before{content:'csh'}pre.src-ash::before{content:'ash'}pre.src-dash::before{content:'dash'}pre.src-ksh::before{content:'ksh'}pre.src-mksh::before{content:'mksh'}pre.src-posh::before{content:'posh'}pre.src-ada::before{content:'Ada'}pre.src-asm::before{content:'Assembler'}pre.src-caml::before{content:'Caml'}pre.src-delphi::before{content:'Delphi'}pre.src-html::before{content:'HTML'}pre.src-idl::before{content:'IDL'}pre.src-mercury::before{content:'Mercury'}pre.src-metapost::before{content:'MetaPost'}pre.src-modula-2::before{content:'Modula-2'}pre.src-pascal::before{content:'Pascal'}pre.src-ps::before{content:'PostScript'}pre.src-prolog::before{content:'Prolog'}pre.src-simula::before{content:'Simula'}pre.src-tcl::before{content:'tcl'}pre.src-tex::before{content:'LaTeX'}pre.src-plain-tex::before{content:'TeX'}pre.src-verilog::before{content:'Verilog'}pre.src-vhdl::before{content:'VHDL'}pre.src-nxml::before,pre.src-xml::before{content:'XML'}pre.src-conf::before{content:'Configuration File'}.dropcap{float:left;font-size:55px;font-style:normal;line-height:.1;margin-right:.2em;margin-top:.5em;padding:0}figure,th.org-center,th.org-left,th.org-right{text-align:center}#footnotes,figure figcaption{margin-top:10px;font-family:"Open Sans",sans;font-weight:400;font-size:15px;line-height:1.6;color:var(--text-gray)}img.zoomTarget:hover{cursor:default!important}img,object[type="image/svg+xml"]{filter:invert(7%) sepia(4%);max-width:100%}.org-svg{width:90%}#footnotes{margin-top:70px;padding-top:30px;border-top-style:solid;border-width:1px 0 0;border-color:var(--back-light)}#footnotes h2.footnotes{margin-top:0;margin-bottom:30px;font-family:"Open Sans",sans;font-size:18px;letter-spacing:5px;display:none}#footnotes .footnum{color:var(--text-dark)}h1,h2,h3,h4,h5,h6{font-family:"et-book",serif;font-weight:400;margin-bottom:0;margin-top:60px;padding-left:30px;margin-left:-30px;position:relative}h1>a[aria-hidden=true],h2>a[aria-hidden=true],h3>a[aria-hidden=true],h4>a[aria-hidden=true],h5>a[aria-hidden=true],h6>a[aria-hidden=true]{color:var(--back-medium);position:relative;top:.06em;line-height:1;font-size:110%;padding-left:.2em;text-decoration:none;visibility:hidden}h1>a[aria-hidden=true]:hover,h2>a[aria-hidden=true]:hover,h3>a[aria-hidden=true]:hover,h4>a[aria-hidden=true]:hover,h5>a[aria-hidden=true]:hover,h6>a[aria-hidden=true]:hover{color:var(--text-light)}h1:hover>a[aria-hidden=true],h2:hover>a[aria-hidden=true],h3:hover>a[aria-hidden=true],h4:hover>a[aria-hidden=true],h5:hover>a[aria-hidden=true],h6:hover>a[aria-hidden=true]{visibility:visible}h1{font-size:40px}.outline-2 h2,h2{font-size:30px}h3{font-size:24px}h4,h5,h6{font-size:20px}h4,h6{font-style:italic}h5{font-variant:small-caps}h6{font-size:18px}.section-number-1,.section-number-2,.section-number-3,.section-number-4,.section-number-5,.section-number-6{font-family:"Open Sans",sans;font-weight:400;font-style:normal;font-size:inherit;color:var(--text-light);line-height:1}@media (min-width:1000px){.section-number-1,.section-number-2,.section-number-3,.section-number-4,.section-number-5,.section-number-6{position:absolute;transform:translateX(-100%) translateX(-10px)}}.outline-text-2:-moz-only-whitespace+.outline-3>h3,.outline-text-2:empty+.outline-3>h3{margin-top:20px}.outline-text-3:-moz-only-whitespace+.outline-4>h4,.outline-text-3:empty+.outline-4>h4,.outline-text-4:-moz-only-whitespace+.outline-5>h5,.outline-text-4:empty+.outline-5>h5{margin-top:15px}.outline-text-5:-moz-only-whitespace+.outline-6>h6,.outline-text-5:empty+.outline-6>h6{margin-top:10px}hr{border:0;border-top-style:solid;border-top-width:1px;color:var(--back-medium);margin-bottom:30px;margin-top:40px}a{color:inherit}dl a,figcaption a,li a,p a,table a{border-radius:1px}.page-tags a,dl a,figcaption a,li a,p a,table a{background-image:linear-gradient(var(--text-dark),var(--text-dark));background-size:1px 1px;background-repeat:repeat-x;background-position:0 95%;text-decoration:none}#content .page-intro p a::selection,#footnotes a::selection,.page-tags a::selection,dl a::selection,figcaption a::selection,li a::selection,p a::selection,table a::selection{background:var(--back-medium)}#content .page-intro p a *,#content .page-intro p a :after,#content .page-intro p a :before,#content .page-intro p a:after,#content .page-intro p a:before,#footnotes a *,#footnotes a :after,#footnotes a :before,#footnotes a:after,#footnotes a:before,.page-tags a *,.page-tags a :after,.page-tags a :before,.page-tags a:after,.page-tags a:before,dl a *,dl a :after,dl a :before,dl a:after,dl a:before,figcaption a *,figcaption a :after,figcaption a :before,figcaption a:after,figcaption a:before,li a *,li a :after,li a :before,li a:after,li a:before,p a *,p a :after,p a :before,p a:after,p a:before,table a *,table a :after,table a :before,table a:after,table a:before{text-shadow:none}.page-tags a:visited,dl a:visited,figcaption a:visited,li a:visited,p a:visited,table a:visited{color:var(--text-dark)}.page-tags a:hover,dl a:hover,figcaption a:hover,li a:hover,p a:hover,table a:hover{opacity:.9;filter:drop-shadow(1px 1px 1px var(--back-white));background-image:linear-gradient(var(--text-dark),var(--text-dark));background-repeat:repeat-x;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23000000' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E")!important;background-position:0 100%;background-size:.8em auto;text-decoration:none}.page-tags a:hover::selection,.page-tags a[href^="#"]::selection,.page-tags a[href^="#"]:hover::selection,dl a:hover::selection,dl a[href^="#"]::selection,dl a[href^="#"]:hover::selection,figcaption a:hover::selection,figcaption a[href^="#"]::selection,figcaption a[href^="#"]:hover::selection,li a:hover::selection,li a[href^="#"]::selection,li a[href^="#"]:hover::selection,p a:hover::selection,p a[href^="#"]::selection,p a[href^="#"]:hover::selection,table a:hover::selection,table a[href^="#"]::selection,table a[href^="#"]:hover::selection{background:var(--back-white)}.page-tags a[href^="#"],dl a[href^="#"],figcaption a[href^="#"],li a[href^="#"],p a[href^="#"],table a[href^="#"]{background-image:linear-gradient(var(--text-gray),var(--text-gray));background-size:1px 1px;background-repeat:repeat-x;background-position:0 95%}.page-tags a[href^="#"]:hover,dl a[href^="#"]:hover,figcaption a[href^="#"]:hover,li a[href^="#"]:hover,p a[href^="#"]:hover,table a[href^="#"]:hover{opacity:.9;filter:drop-shadow(1px 1px 1px var(--back-white));background-image:linear-gradient(var(--text-medium),var(--text-medium));background-size:1px 1px;background-repeat:repeat-x;background-position:0 95%}#theme-switch:checked~#page #breadcrumbs a:hover,#theme-switch:checked~#page #crosslinks a:not(.highlight):hover,#theme-switch:checked~#page .page-tags a:hover,#theme-switch:checked~#page dl a:hover,#theme-switch:checked~#page figcaption a:hover,#theme-switch:checked~#page li a:hover,#theme-switch:checked~#page p a:hover,#theme-switch:checked~#page table a:hover{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E")}:target::before{content:"ðŸ –";position:absolute;left:-7rem;top:calc(.5em - 2rem);line-height:1;color:#e65353aa;font-size:3rem;font-style:normal}@media (max-width:1000px){:target::before{content:"ðŸ ”";left:unset;right:0}}#content .page-intro p a,#content .page-intro p a:hover,#footnotes a,#footnotes a:hover{background-image:linear-gradient(var(--text-gray),var(--text-gray));background-size:1px 1px;background-repeat:repeat-x;background-position:0 95%;border-radius:1px;text-decoration:none}#content .page-intro p a:hover::selection,#footnotes a:hover::selection{background:var(--back-medium)}#content .page-intro p a:hover *,#content .page-intro p a:hover :after,#content .page-intro p a:hover :before,#content .page-intro p a:hover:after,#content .page-intro p a:hover:before,#footnotes a:hover *,#footnotes a:hover :after,#footnotes a:hover :before,#footnotes a:hover:after,#footnotes a:hover:before{text-shadow:none}.btn,.btn:hover{background-image:none}.btn{padding:7px 14px;border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:14px;font-style:normal;letter-spacing:2px;cursor:pointer}.btn:hover{background-color:var(--back-light)}.btn.disabled,div.link-preview small{color:var(--text-light)}.btn.disabled:hover{cursor:default}.btn.small{border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:12px;font-style:normal;letter-spacing:2px;background-image:none;padding:3px 9px}.btn.small:hover{background-color:var(--back-light);background-image:none}.btn.highlight,.btn.primary{text-shadow:none;text-decoration:none}.btn.highlight{color:var(--text-dark);background-color:#ff0}.btn.primary{color:var(--back-white);background-color:var(--accent)}.btn.primary:hover,.done.active:hover,.page-tags a.active:hover,.tag>span.active:hover,.todo.active:hover{background-color:var(--back-light);background-image:none;color:var(--text-dark)}.image-link,.image-link:hover{background:0 0;text-shadow:none;text-decoration:none}div.link-preview{border:1px solid var(--back-medium);border-radius:.5em;overflow:hidden;position:relative;max-height:5em;padding-left:.5em}div.link-preview a{color:initial;text-decoration:none}div.link-preview img{border-right:1px solid var(--back-medium);float:left;height:5em;margin-left:-.5em;margin-right:.5em}div.link-preview p{margin:0;font-size:10pt}div.link-preview p b{font-size:11pt}div.link-preview small{float:right;font-family:sans;margin:.45em .6em}dl,ol,ul{list-style:none;list-style-position:outside;padding:0}dl dt::before,dl li::before,ol dt::before,ol li::before,ul dt::before,ul li::before{display:inline-block;width:1em;font-family:"Open Sans",sans;font-weight:400;font-size:15px;line-height:1.6;color:var(--text-gray)}dl li,ol li,ul li{margin:5px 0;font-size:14px}dl dt::before,ul li::before{content:"â€¢";margin-left:-1em}ol{counter-reset:li}ol li::before{content:counter(li);margin-left:-1.5em;margin-right:.5em;text-align:right;direction:rtl}ol li{counter-increment:li}ol ol,ul ul{padding-left:20px}ol ol ol,ul ul ul{padding-left:30px}li p:first-child{display:inline-block;margin-bottom:0}dl dt{font-weight:400;margin-bottom:10px}dl dd{font-style:italic;margin-bottom:20px}li .checkbox{display:inline-block;width:.9em;height:.9em;border-radius:3px;margin:3px;top:4px;position:relative}li.on>.checkbox{background:#2d9574;box-shadow:0 0 2px #2d9574}li.trans>.checkbox{background:#dc752f;box-shadow:0 0 2px #dc752f}li.off>.checkbox{background:#ba2f59;box-shadow:0 0 2px #ba2f59;top:6px}li.on>.checkbox::after{content:'';height:.45em;width:.225em;-webkit-transform-origin:left top;transform-origin:left top;transform:scaleX(-1) rotate(135deg);border-right:2.8px solid #fff;border-top:2.8px solid #fff;opacity:.9;left:.1em;top:.45em;position:absolute}li.trans>.checkbox::after{content:'';font-weight:700;font-size:1.6em;position:absolute;top:.2em;left:.11em;width:.35em;height:.12em;background:#fff;opacity:.9;border-radius:.1em}li.off>.checkbox::after{content:'âœ–';color:#fff;opacity:.9;position:relative;top:-.5rem;left:.17em;font-size:.75em}#org-div-home-and-up{display:none!important}.outline-3 h3{font-style:normal}.outline-2 .section-number-2{font-size:30px}.outline-3 .section-number-3,.outline-3 h3{font-size:24px}.done,.timestamp,.timestamp-kwd,.todo{border-radius:1px;font-family:"Open Sans",sans;font-style:normal;background-color:var(--back-white)}.timestamp,.timestamp-kwd{font-weight:400;font-size:12px;line-height:1.9;color:var(--text-light)}.done,.todo{border-color:var(--back-light);font-variant:all-small-caps;font-size:max(.4em,10px);letter-spacing:2px;background-image:none;line-height:1;white-space:nowrap;vertical-align:middle;padding:.1em .5em;background-color:transparent;border:0;font-weight:700}.page-tags a:hover{background-color:var(--back-light)}.done:hover,.tag>span:hover,.todo:hover{background-color:var(--back-light);background-image:none}.done:not(.active),.page-tags a:not(.active),.tag>span:not(.active),.todo:not(.active){border-color:var(--back-white)}.done.active,.page-tags a.active,.tag>span.active,.todo.active{text-shadow:none;text-decoration:none;color:var(--back-white);background-color:var(--code-foreground)}.outline-2,.outline-3,.outline-4{contain:layout}.outline-2 .done,.outline-2 .todo,.outline-3 .done,.outline-3 .todo,.outline-4 .done,.outline-4 .todo{font-size:18px}.todo{color:#e33}.done,.priority{color:var(--text-light)}.tag>span{border-style:solid;border-width:1px;border-color:var(--back-light);font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:max(.4em,10px);font-style:normal;letter-spacing:2px;background-image:none;line-height:1;white-space:nowrap;vertical-align:middle;padding:.1em .5em;background-color:var(--back-white);border-radius:100px}.priority{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace}.footref{text-shadow:none}.footpara{display:inline}.footdef{margin-bottom:1em}td.org-right{text-align:right}td.org-left{text-align:left}div.org-center,td.org-center{text-align:center}span.acr{font-variant-caps:all-small-caps;letter-spacing:.1em}.music-track{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.music-track img{height:6rem;margin-right:2rem}.music-track a{text-decoration:none}.music-track span{min-width:35%}div.table{position:relative}div.table .gutter{left:calc(20px - 2.5rem);padding-top:18px}div.table .tabular{max-width:100%;overflow-x:auto}table,table thead{font-family:"Open Sans",sans;font-size:15px}table{border-color:var(--text-light);border-left:transparent;border-right:transparent;border-style:solid;border-width:2px;border-collapse:collapse;margin:20px;padding:20px}table thead{font-weight:400;font-style:normal;line-height:1.9;color:var(--text-light)}table thead tr th{padding:4px 10px;background-color:#9991}table thead tr:last-of-type th{border-bottom:solid 1px var(--text-light)}table td,table th,table tr{border:0}table tbody tr td{border-top:0;padding:0 10px}table tr{line-height:1.9}table caption,table caption .table-number{font-family:"Open Sans",sans;font-weight:400}table caption{margin-bottom:10px;font-size:15px;line-height:1.6;color:var(--text-gray)}table caption .table-number{font-style:normal;font-size:12px;line-height:1.9;color:var(--text-light)}::-webkit-scrollbar{width:10px;height:8px}::-webkit-scrollbar-track{background:#9992}::-webkit-scrollbar-thumb{background:#ccc}::-webkit-scrollbar-thumb:hover{background:#888}@media (min-width:1280px){#table-of-contents{position:fixed;width:18rem;right:1rem;top:0;padding:1em;line-height:1.5;margin-top:4rem}#table-of-contents h2{margin-top:0}#table-of-contents #text-table-of-contents{position:relative}#table-of-contents #text-table-of-contents::after,#table-of-contents #text-table-of-contents::before{position:absolute;content:'';width:calc(100% - 10px);height:.7rem;left:0;z-index:1}#table-of-contents #text-table-of-contents::before{top:0;background:linear-gradient(180deg,var(--back-light) 0%,var(--back-light) 35%,transparent 100%)}#table-of-contents #text-table-of-contents::after{bottom:0;background:linear-gradient(0deg,var(--back-light) 0%,var(--back-light) 35%,transparent 100%)}#table-of-contents #text-table-of-contents>ul{list-style:none;padding:0;margin:0;max-height:calc(100vh - 5rem - 50px);overflow-y:auto;overflow-x:hidden;scrollbar-width:thin}#table-of-contents #text-table-of-contents>ul ul{padding-left:2em}#table-of-contents #text-table-of-contents>ul li.active>ul,#table-of-contents #text-table-of-contents>ul ul.active{display:inline-block}#table-of-contents #text-table-of-contents>ul li.active>a,#table-of-contents #text-table-of-contents>ul li.active>label a{color:var(--text-dark)}#table-of-contents #text-table-of-contents>ul li.active>input:not(:checked)~label::after{transform:rotate(90deg);top:5px;opacity:.35}#table-of-contents #text-table-of-contents>ul>li:last-child{margin-bottom:2rem}}@media (min-width:1440px){#table-of-contents{width:20rem;right:2rem}}@media (min-width:1640px){#table-of-contents{right:5rem}}@media (min-width:2000px){#table-of-contents{width:25rem}}#table-of-contents #text-table-of-contents ul{width:100%}#table-of-contents #text-table-of-contents li input[type=checkbox],#table-of-contents #text-table-of-contents>ul ul{display:none}#table-of-contents #text-table-of-contents li label{display:inline-block;width:100%;position:relative}#table-of-contents #text-table-of-contents li a{display:inline-block;color:var(--text-gray);text-decoration:none!important;text-shadow:none;background:0 0!important}#table-of-contents #text-table-of-contents li label::after{content:"\25b6";color:var(--text-gray);margin-left:.5em;font-size:10px;display:inline-block;position:absolute;top:3.4px;left:-20px;opacity:.8}#table-of-contents #text-table-of-contents li input:checked~ul{display:inline-block!important}#table-of-contents #text-table-of-contents li input:checked~label a{font-weight:700}#table-of-contents #text-table-of-contents li input:checked~label::after{transform:rotate(90deg);top:5px}#table-of-contents #text-table-of-contents li::before{content:""!important}.page-tags a{border-style:solid;border-width:1px;border-color:var(--back-light);border-radius:1px;font-family:"Open Sans",sans;font-variant:all-small-caps;font-size:max(.4em,10px);font-style:normal;letter-spacing:2px;background-image:none;white-space:nowrap;vertical-align:middle;padding:.1em .5em;background-color:var(--back-white);margin-right:5px;line-height:3em}@media print{h2{page-break-before:always}h1,h2,h3,h4,h5{page-break-after:avoid}#switch-label,#table-of-contents #text-table-of-contents li label::after{display:none}#content,#page-header{margin-top:0}#table-of-contents #text-table-of-contents>ul ul{display:inline-block}#table-of-contents #text-table-of-contents>ul a::after{content:leader(".") target-counter(attr(href),page)}img{filter:none}}@page{size:auto;margin-top:4mm;margin-bottom:4mm}
</style>
</head>
<body>
<input type='checkbox' id='theme-switch'><div id='page'><label id='switch-label' for='theme-switch'></label><div id="content">
<nav id="table-of-contents">
<h2><a href="#" style="color:inherit; text-decoration: none;">Table of Contents</a></h2>
<div id="text-table-of-contents">
<ul>
<li><input type='checkbox' id='toc--org1096786'/><label for='toc--org1096786'><a href="#org1096786">1. n0s1.core Webserver</a></label>
<ul>
<li><a href="#org43a6d3c">1.1. wsgi.py</a></li>
<li><a href="#orgf665be8">1.2. app.py</a></li>
</ul>
</li>
<li><a href="#orge90dd1f">2. arch<sub>pkg</sub><sub>setup</sub></a></li>
<li><a href="#org4dcf4c1">3. arch<sub>vm</sub><sub>setup</sub></a></li>
<li><a href="#org9545cb4">4. ask</a></li>
<li><a href="#org5b31399">5. askclone</a></li>
<li><a href="#org5eb7ba0">6. asklink</a></li>
<li><a href="#org19495ce">7. asklinkrecursive</a></li>
<li><a href="#org3b389b8">8. asklinksudo</a></li>
<li><a href="#org30f49ce">9. awkp</a></li>
<li><a href="#orge23920c">10. bm</a></li>
<li><a href="#orgabf08a0">11. catenate</a></li>
<li><a href="#org76898d3">12. cb</a></li>
<li><a href="#org6f1cc51">13. check<sub>root</sub></a></li>
<li><a href="#orga2f4c37">14. colours</a></li>
<li><a href="#org351bb01">15. detect<sub>os</sub></a></li>
<li><a href="#orgd7d54de">16. discordwebhooks</a></li>
<li><a href="#orgd48a376">17. ef</a></li>
<li><a href="#org5b79ccd">18. exprq</a></li>
<li><a href="#org81136e9">19. findpkg</a></li>
<li><a href="#orgb85ea44">20. fzy</a></li>
<li><a href="#org18bda87">21. fzy<sub>lite</sub></a></li>
<li><a href="#orga584a4e">22. hackless</a></li>
<li><a href="#orgc573f1c">23. hist</a></li>
<li><a href="#org9dec363">24. keyrepeat</a></li>
<li><a href="#org6ced61c">25. n0s1</a></li>
<li><a href="#org4507a5d">26. n0s1m</a></li>
<li><a href="#org4277de1">27. org<sub>ingest</sub></a></li>
<li><a href="#orgf65516d">28. pfetch</a></li>
<li><a href="#org099a95b">29. rd</a></li>
<li><a href="#orgcd0a02b">30. rdln</a></li>
<li><a href="#orged9f371">31. README.md</a></li>
<li><a href="#orgb85bec5">32. readtoml</a></li>
<li><a href="#orgf6c07ff">33. setup</a></li>
<li><a href="#org7894974">34. setup<sub>git</sub></a></li>
<li><a href="#org81a4760">35. setup<sub>repos</sub></a></li>
<li><a href="#orge8fdfdf">36. setup<sub>ssh</sub></a></li>
<li><a href="#org8f81194">37. setup<sub>symlinks</sub></a></li>
<li><a href="#org51767a3">38. test.toml</a></li>
<li><a href="#org5a43ab1">39. tmux<sub>setup</sub></a></li>
<li><a href="#orgd765bfd">40. tolower</a></li>
<li><a href="#orgb4a77da">41. toml</a></li>
<li><a href="#orga469b37">42. toml.py</a></li>
<li><a href="#org2eddccf">43. toomuxh</a></li>
<li><a href="#orgd07491f">44. toupper</a></li>
<li><a href="#org2a7b5b0">45. transpose</a></li>
<li><a href="#orge7443c0">46. trapinput</a></li>
<li><a href="#orgf5dd630">47. tryaptinstall</a></li>
<li><a href="#org6e7ccc6">48. tryaurinstall</a></li>
<li><a href="#orga9f1616">49. trylink</a></li>
<li><a href="#org35e1f2f">50. trypacmaninstall</a></li>
<li><a href="#org331d469">51. ubuntu<sub>pkg</sub><sub>setup</sub></a></li>
<li><a href="#org21e3dbe">52. useless</a></li>
<li><a href="#org174d008">53. vim<sub>setup</sub></a></li>
<li><a href="#org0501e7c">54. waitanykey</a></li>
<li><a href="#org7a80226">55. z.sh</a></li>
</ul>
</div>
</nav>
<div id="outline-container-org1096786" class="outline-2">
<h2 id="org1096786"><span class="section-number-2">1.</span> n0s1.core Webserver<a aria-hidden="true" href="#org1096786">#</a> </h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org43a6d3c" class="outline-3">
<h3 id="org43a6d3c"><span class="section-number-3">1.1.</span> wsgi.py<a aria-hidden="true" href="#org43a6d3c">#</a> </h3>
<div class="outline-text-3" id="text-1-1">
<details id='orga35ef75' class='code' open><summary><span class="lang">Python</span></summary>
<div class='gutter'>
<a href='#orga35ef75'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-python"><span class="org-keyword">from</span> app <span class="org-keyword">import</span> app

<span class="org-keyword">if</span> <span class="org-builtin">__name__</span> == <span class="org-string">"__main__"</span>:
        app.run()
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgf665be8" class="outline-3">
<h3 id="orgf665be8"><span class="section-number-3">1.2.</span> app.py<a aria-hidden="true" href="#orgf665be8">#</a> </h3>
<div class="outline-text-3" id="text-1-2">
<details id='org4e94e69' class='code' open><summary><span class="lang">Python</span></summary>
<div class='gutter'>
<a href='#org4e94e69'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-python"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/python</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">APP.PY: Flask server to serve html or plain text depending on client's useragent string</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 21/01/2021</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Requires flask, pygments, markdown</span>

<span class="org-keyword">import</span> sys
<span class="org-keyword">import</span> os
<span class="org-keyword">import</span> markdown
<span class="org-keyword">import</span> markdown.extensions.fenced_code
<span class="org-keyword">import</span> markdown.extensions.codehilite
<span class="org-keyword">from</span> flask <span class="org-keyword">import</span> Flask, request, make_response, render_template, abort
<span class="org-keyword">from</span> pygments.formatters <span class="org-keyword">import</span> HtmlFormatter

<span class="org-variable-name">PLAIN_TEXT_AGENTS</span> = [ <span class="org-string">"curl"</span>, <span class="org-string">"httpie"</span>, <span class="org-string">"lwp-request"</span>, <span class="org-string">"wget"</span>, <span class="org-string">"python-requests"</span>, <span class="org-string">"openbsd ftp"</span>, <span class="org-string">"powershell"</span>, <span class="org-string">"fetch"</span> ]
<span class="org-variable-name">INDEX_PATH</span> = <span class="org-string">"./README.md"</span>
<span class="org-variable-name">app</span> = Flask(<span class="org-builtin">__name__</span>)

<span class="org-keyword">def</span> <span class="org-function-name">to_html</span>(lines):
    <span class="org-variable-name">md</span> = markdown.markdown(lines, extensions=[<span class="org-string">"fenced_code"</span>, <span class="org-string">"codehilite"</span>])
    <span class="org-variable-name">formatter</span> = HtmlFormatter(style=<span class="org-string">"monokai"</span>,full=<span class="org-constant">True</span>,cssclass=<span class="org-string">"codehilite"</span>)
    <span class="org-variable-name">css</span> = <span class="org-string">"\nbody { background-color: #33363B; color: #CCCCCC;}\ntd.linenos pre { background-color: #AAAAAA; }"</span>
    <span class="org-keyword">return</span> <span class="org-string">"&lt;style&gt;"</span> + formatter.get_style_defs() + css + <span class="org-string">"&lt;/style&gt;"</span> + md

<span class="org-keyword">def</span> <span class="org-function-name">get_file_path</span>(path, is_man):
    <span class="org-keyword">if</span> is_man:
        <span class="org-keyword">if</span> path == <span class="org-constant">None</span>:
            <span class="org-keyword">return</span> <span class="org-string">"./man/README.md"</span>
        <span class="org-keyword">elif</span> os.path.isfile(<span class="org-string">"./man/"</span> + path):
            <span class="org-keyword">return</span> <span class="org-string">"./man/"</span> + path
        <span class="org-keyword">elif</span> os.path.isfile(<span class="org-string">"./man/"</span> + path + <span class="org-string">".md"</span>):
            <span class="org-keyword">return</span> <span class="org-string">"./man/"</span> + path + <span class="org-string">".md"</span>
    <span class="org-keyword">else</span>:
        <span class="org-keyword">if</span> path == <span class="org-constant">None</span>:
            <span class="org-keyword">return</span> INDEX_PATH
        <span class="org-keyword">elif</span> os.path.isfile(<span class="org-string">"./"</span> + path):
            <span class="org-keyword">return</span> <span class="org-string">"./"</span> + path
        <span class="org-keyword">elif</span> os.path.isfile(<span class="org-string">"./"</span> + path + <span class="org-string">".sh"</span>):
            <span class="org-keyword">return</span> <span class="org-string">"./"</span> + path + <span class="org-string">".sh"</span>
    <span class="org-keyword">return</span> <span class="org-constant">None</span>

<span class="org-keyword">def</span> <span class="org-function-name">try_get_lines</span>(file_path):
    <span class="org-keyword">if</span> file_path == <span class="org-constant">None</span>:
        <span class="org-keyword">return</span> <span class="org-string">""</span>
    <span class="org-keyword">with</span> <span class="org-builtin">open</span>(file_path) <span class="org-keyword">as</span> f:
        <span class="org-variable-name">lines</span> = f.read()
    <span class="org-keyword">return</span> lines

<span class="org-keyword">def</span> <span class="org-function-name">get_content</span>(path, request, is_man, is_raw):
    <span class="org-variable-name">file_path</span> = get_file_path(path, is_man)
    <span class="org-variable-name">lines</span> = try_get_lines(file_path)
    <span class="org-variable-name">user_agent</span> = request.headers.get(<span class="org-string">'User-Agent'</span>, <span class="org-string">''</span>).lower()
    <span class="org-keyword">if</span> <span class="org-builtin">any</span>([x <span class="org-keyword">in</span> user_agent <span class="org-keyword">for</span> x <span class="org-keyword">in</span> PLAIN_TEXT_AGENTS]):
        <span class="org-keyword">return</span> <span class="org-string">"Error: file not found"</span> <span class="org-keyword">if</span> file_path == <span class="org-constant">None</span> <span class="org-keyword">else</span> lines
    <span class="org-keyword">if</span> file_path == <span class="org-constant">None</span>:
        abort(<span class="org-highlight-numbers-number">404</span>)
    <span class="org-keyword">if</span> is_raw:
        <span class="org-variable-name">resp</span> = make_response(lines)
        <span class="org-variable-name">resp.mimetype</span> = <span class="org-string">'text/plain'</span>
        <span class="org-keyword">return</span> resp
    <span class="org-keyword">if</span> file_path == INDEX_PATH <span class="org-keyword">or</span> is_man:
        <span class="org-keyword">return</span> to_html(lines)
    <span class="org-comment-delimiter">#</span><span class="org-comment">This must be the base url so display the man above the file</span>
    <span class="org-variable-name">man_path</span> = get_file_path(path, <span class="org-constant">True</span>)
    <span class="org-variable-name">man_lines</span> = try_get_lines(man_path)
    <span class="org-keyword">return</span> to_html(man_lines + <span class="org-string">"\n##CODE:\n```\n"</span> + lines + <span class="org-string">"\n```"</span>)

<span class="org-type">@app.route</span>(<span class="org-string">"/"</span>)
<span class="org-type">@app.route</span>(<span class="org-string">"/&lt;path&gt;"</span>)
<span class="org-keyword">def</span> <span class="org-function-name">get_file</span>(path=<span class="org-constant">None</span>):
    <span class="org-keyword">return</span> get_content(path, request, <span class="org-constant">False</span>, <span class="org-constant">False</span>)

<span class="org-type">@app.route</span>(<span class="org-string">"/man/&lt;path&gt;"</span>)
<span class="org-keyword">def</span> <span class="org-function-name">get_man</span>(path=<span class="org-constant">None</span>):
    <span class="org-keyword">return</span> get_content(path, request, <span class="org-constant">True</span>, <span class="org-constant">False</span>)

<span class="org-type">@app.route</span>(<span class="org-string">"/raw/&lt;path&gt;"</span>)
<span class="org-keyword">def</span> <span class="org-function-name">get_raw</span>(path=<span class="org-constant">None</span>):
    <span class="org-keyword">return</span> get_content(path, request, <span class="org-constant">False</span>, <span class="org-constant">True</span>)

<span class="org-type">@app.route</span>(<span class="org-string">"/raw/man/&lt;path&gt;"</span>)
<span class="org-keyword">def</span> <span class="org-function-name">get_raw_man</span>(path=<span class="org-constant">None</span>):
    <span class="org-keyword">return</span> get_content(path, request, <span class="org-constant">True</span>, <span class="org-constant">True</span>)

<span class="org-keyword">if</span> <span class="org-builtin">__name__</span> == <span class="org-string">'__main__'</span>:
    app.run(host=<span class="org-string">'0.0.0.0'</span>)
</pre>
</div>
</details>
</div>
</div>
</div>

<div id="outline-container-orge90dd1f" class="outline-2">
<h2 id="orge90dd1f"><span class="section-number-2">2.</span> arch<sub>pkg</sub><sub>setup</sub><a aria-hidden="true" href="#orge90dd1f">#</a> </h2>
<div class="outline-text-2" id="text-2">
<details id='org33b2a56' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org33b2a56'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">arch_pkg_setup: Sets up packages on an arch system</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:38:38 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">arch_pkg_setup</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">sudo</span> pacman -Sy
    <span class="org-comment-delimiter">### </span><span class="org-comment">Pacman</span>
    trypacmaninstall --prompt keychain fd ripgrep fzf bat tmux neovim flameshot synergy <span class="org-sh-escaped-newline">\</span>
        youtube-dl mpv youtube-viewer zathura yay vim neovim nodejs yarn <span class="org-sh-escaped-newline">\</span>
        ttf-jetbrains-mono alacritty emacs python-neovim unzip xsel bspwm sxhkd polybar
    <span class="org-keyword">if</span> ask <span class="org-string">"Install doom emacs"</span>; <span class="org-keyword">then</span>
        <span class="org-type">git</span> clone --depth <span class="org-highlight-numbers-number">1</span> https://github.com/hlissner/doom-emacs ~/.emacs.d
        ~/.emacs.d/bin/doom install
    <span class="org-keyword">fi</span>
    <span class="org-comment-delimiter">### </span><span class="org-comment">AUR</span>
    <span class="org-keyword">if</span> ask <span class="org-string">"Askinstall extra"</span>; <span class="org-keyword">then</span>
        yay -Sy
        tryaurinstall --prompt minecraft-launcher
        tryaurinstall --prompt pandoc
        tryaurinstall --prompt texlive-most
        tryaurinstall --prompt postman
        tryaurinstall --prompt rider
    <span class="org-keyword">fi</span>
    <span class="org-keyword">if</span> ask <span class="org-string">"Install rust toolchain"</span>; <span class="org-keyword">then</span>
        trypacmaninstall rustup
        <span class="org-type">sudo</span> rustup install stable
        <span class="org-type">sudo</span> rustup default stable
        <span class="org-type">sudo</span> rustup component add rls rust-analysis rust-src
    <span class="org-keyword">fi</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -d $<span class="org-variable-name">NANOS_REPOS_DIR</span>/neovim <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; ask <span class="org-string">"Install nvim from source"</span>; <span class="org-keyword">then</span>
        <span class="org-type">cd</span> $<span class="org-variable-name">NANOS_REPOS_DIR</span> &amp;&amp;
        <span class="org-type">sudo</span> <span class="org-type">rm</span> -r neovim &amp;&amp;
        <span class="org-type">git</span> clone https://github.com/neovim/neovim &amp;&amp;
        <span class="org-type">cd</span> neovim &amp;&amp;
        <span class="org-type">sudo</span> <span class="org-type">make</span> <span class="org-variable-name">CMAKE_BUILD_TYPE</span>=Release install &amp;&amp;
        <span class="org-type">cd</span> $<span class="org-variable-name">NANOS_REPOS_DIR</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org4dcf4c1" class="outline-2">
<h2 id="org4dcf4c1"><span class="section-number-2">3.</span> arch<sub>vm</sub><sub>setup</sub><a aria-hidden="true" href="#org4dcf4c1">#</a> </h2>
<div class="outline-text-2" id="text-3">
<details id='org04f16a9' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org04f16a9'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter">### </span><span class="org-comment">Basic Arch VM install script</span>

<span class="org-builtin">read</span> -p <span class="org-string">"Enter the hostname: "</span> MYHOSTNAME
timedatectl set-ntp true
<span class="org-type">echo</span> -e <span class="org-string">"g\nn\n\n\n+1M\nt\n4\nn\n\n\n+4G\nt\n2\n19\nn\n\n\n\np\nw\n"</span> | fdisk /dev/sda
mkfs.ext4 /dev/sda3
mkswap /dev/sda2
mount /dev/sda3 /mnt
swapon /dev/sda2
pacstrap /mnt base linux linux-firmware vi
genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
<span class="org-type">cat</span> &lt;&lt; EOF |  arch-chroot /mnt
<span class="org-type"><span class="org-sh-heredoc">ln</span></span><span class="org-sh-heredoc"> -sf /usr/share/zoneinfo/Australia/Brisbane /etc/localtime</span>
<span class="org-sh-heredoc">hwclock --systohc</span>
<span class="org-sh-heredoc">sed -i "s/#\(en_US.UTF-8 UTF-8\)/\1/;s/#\(en_AU.UTF-8 UTF-8\)/\1/" /etc/locale.gen</span>
<span class="org-sh-heredoc">locale-gen</span>
<span class="org-type"><span class="org-sh-heredoc">echo</span></span><span class="org-sh-heredoc"> "LANG=en_US.UTF-8" &gt; /etc/locale.conf</span>
<span class="org-type"><span class="org-sh-heredoc">echo</span></span><span class="org-sh-heredoc"> "$MYHOSTNAME" &gt; /etc/hostname</span>
<span class="org-type"><span class="org-sh-heredoc">echo</span></span><span class="org-sh-heredoc"> -e "127.0.0.1   localhost\n::1     localhost\n127.0.1.1   $MYHOSTNAME.localdomain  $MYHOSTNAME" &gt;&gt; /etc/hosts</span>
<span class="org-sh-heredoc">pacman -Sy --noconfirm grub</span>
<span class="org-sh-heredoc">grub-install --target=i386-pc /dev/sda</span>
<span class="org-sh-heredoc">grub-mkconfig -o /boot/grub/grub.cfg</span>
<span class="org-sh-heredoc">EOF</span>
<span class="org-type">echo</span> <span class="org-string">"Run passwd to set root password then exit and reboot"</span>
arch-chroot /mnt
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org9545cb4" class="outline-2">
<h2 id="org9545cb4"><span class="section-number-2">4.</span> ask<a aria-hidden="true" href="#org9545cb4">#</a> </h2>
<div class="outline-text-2" id="text-4">
<details id='org61ba272' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org61ba272'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ask: Promts the user to answer a yes/no question.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Returns after a single char is entered without hitting return.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:29:17 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-function-name">ask</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">while</span> true; <span class="org-keyword">do</span>
    <span class="org-builtin">read</span> -p <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{1}</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{yellow}</span></span><span class="org-string">y/n</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> "</span> -sn1
        <span class="org-type">echo</span>
        <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">REPLY</span> =~ ^<span class="org-rainbow-delimiters-depth-4">[</span>Yy<span class="org-rainbow-delimiters-depth-4">]</span>$ <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">0</span>
        <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">REPLY</span> =~ ^<span class="org-rainbow-delimiters-depth-4">[</span>Nn<span class="org-rainbow-delimiters-depth-4">]</span>$ <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">1</span>
    <span class="org-keyword">done</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org5b31399" class="outline-2">
<h2 id="org5b31399"><span class="section-number-2">5.</span> askclone<a aria-hidden="true" href="#org5b31399">#</a> </h2>
<div class="outline-text-2" id="text-5">
<details id='org9f87418' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org9f87418'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">askclone: promts the user to clone a </span><span class="org-type"><span class="org-comment">git</span></span><span class="org-comment"> repository</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:35:26 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">askclone</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -d $<span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"Directory </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string"> already exists, skipping..."</span>
    <span class="org-keyword">elif</span> ask <span class="org-string">"Clone </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{1}</span></span><span class="org-string">"</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"Cloning </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span>
        <span class="org-type">git</span> clone --recurse-submodules $<span class="org-highlight-numbers-number">2</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org5eb7ba0" class="outline-2">
<h2 id="org5eb7ba0"><span class="section-number-2">6.</span> asklink<a aria-hidden="true" href="#org5eb7ba0">#</a> </h2>
<div class="outline-text-2" id="text-6">
<details id='org4fdcd18' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org4fdcd18'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">asklink: prompts the user to create symlink if not already created</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:30:32 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">asklink</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">readlink</span><span class="org-string"><span class="org-sh-quoted-exec"> -- </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">3</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span> = $<span class="org-highlight-numbers-number">2</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> already linked correctly"</span>
    <span class="org-keyword">elif</span> ask <span class="org-string">"Link </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{magenta}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string">"</span>; <span class="org-keyword">then</span>
        <span class="org-comment-delimiter">#</span><span class="org-comment">Create dir if not exist</span>
        <span class="org-type">mkdir</span> -p <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">dirname</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">{3}</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">")</span></span><span class="org-string">"</span>
        trylink <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org19495ce" class="outline-2">
<h2 id="org19495ce"><span class="section-number-2">7.</span> asklinkrecursive<a aria-hidden="true" href="#org19495ce">#</a> </h2>
<div class="outline-text-2" id="text-7">
<details id='orgb5d1f43' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgb5d1f43'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">asklinkrecursive: Creates symlinks for all nested dirs</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:33:23 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-comment-delimiter">#</span><span class="org-comment">This is not actually recursive lol</span>
<span class="org-function-name">askrecursivelinkdir</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">for</span> f<span class="org-keyword"> in</span> $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">find</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> -type f | sed <span class="org-string">"s|</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">/*||"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-keyword">do</span>
        <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">readlink</span><span class="org-string"><span class="org-sh-quoted-exec"> -- </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">3</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">/</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">f</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span> != <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">f</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
            <span class="org-keyword">if</span> ask <span class="org-string">"Recursively Link </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span>; <span class="org-keyword">then</span>
            <span class="org-comment-delimiter">#</span><span class="org-comment">Create dir if not exist</span>
            <span class="org-type">mkdir</span> -p <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">"</span>
            <span class="org-keyword">for</span> dir<span class="org-keyword"> in</span> $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">find</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> -type d | sed <span class="org-string">"s|</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">||"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-keyword">do</span>
                <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-negation-char">!</span> -d <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">dir</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                <span class="org-type">echo</span> <span class="org-string">"Creating directory </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">dir</span></span><span class="org-string">"</span>
                <span class="org-comment-delimiter">#</span><span class="org-comment">Create child dirs if not exist</span>
                <span class="org-type">mkdir</span> -p <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">dir</span></span><span class="org-string">"</span>
                <span class="org-keyword">fi</span>
            <span class="org-keyword">done</span>
            <span class="org-keyword">for</span> file<span class="org-keyword"> in</span> $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">find</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> -type f | sed <span class="org-string">"s|</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">/*||"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-keyword">do</span>
                <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">readlink</span><span class="org-string"><span class="org-sh-quoted-exec"> -- </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">3</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">/</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">file</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span> = <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">file</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> already linked correctly"</span>
                    <span class="org-keyword">continue</span>
                <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-negation-char">!</span> -z <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">file</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                    trylink <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">file</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">file</span></span><span class="org-string">"</span>
                <span class="org-keyword">else</span>
                    <span class="org-type">echo</span> <span class="org-string">"File does not exist"</span>
                <span class="org-keyword">fi</span>
            <span class="org-keyword">done</span>
        <span class="org-keyword">fi</span>
        <span class="org-keyword">return</span>
    <span class="org-keyword">fi</span>
    <span class="org-keyword">done</span>
    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> already linked correctly"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org3b389b8" class="outline-2">
<h2 id="org3b389b8"><span class="section-number-2">8.</span> asklinksudo<a aria-hidden="true" href="#org3b389b8">#</a> </h2>
<div class="outline-text-2" id="text-8">
<details id='org2a3eaf1' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org2a3eaf1'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">asklinksudo: prompts user to create a symlink which requires </span><span class="org-type"><span class="org-comment">sudo</span></span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:34:34 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">asklinksudo</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">readlink</span><span class="org-string"><span class="org-sh-quoted-exec"> -- </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">3</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span> = $<span class="org-highlight-numbers-number">2</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> already linked correctly"</span>
    <span class="org-keyword">elif</span> ask <span class="org-string">"Link </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{magenta}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string">"</span>; <span class="org-keyword">then</span>
        <span class="org-comment-delimiter">#</span><span class="org-comment">Create dir if not exist</span>
        <span class="org-type">mkdir</span> -p <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">dirname</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">{3}</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">")</span></span><span class="org-string">"</span>
        <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
            ask <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{red}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> already exists. Remove it?"</span> &amp;&amp; <span class="org-type">sudo</span> <span class="org-type">rm</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">"</span>
        <span class="org-keyword">fi</span>
        <span class="org-type">sudo</span> <span class="org-type">ln</span> -sf <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org30f49ce" class="outline-2">
<h2 id="org30f49ce"><span class="section-number-2">9.</span> awkp<a aria-hidden="true" href="#org30f49ce">#</a> </h2>
<div class="outline-text-2" id="text-9">
<details id='orgc4fb2cd' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgc4fb2cd'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">AWKP: awk print colums</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">License: GPLv3</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">Description: simplify printing specifig colums using awk</span>

<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">#</span> -eq <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    column -t
<span class="org-keyword">else</span>
    awk <span class="org-string">"{print </span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> "\$</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">@</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" | sed 's/ /"\t"$/g')</span></span><span class="org-string">}"</span> | column -t
<span class="org-keyword">fi</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orge23920c" class="outline-2">
<h2 id="orge23920c"><span class="section-number-2">10.</span> bm<a aria-hidden="true" href="#orge23920c">#</a> </h2>
<div class="outline-text-2" id="text-10">
<details id='orgc834a1e' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgc834a1e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">BM: Bookmarks</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 17/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>

<span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-builtin">read</span> -p <span class="org-string">"Enter key: "</span> key; <span class="org-builtin">read</span> -p <span class="org-string">"Enter value: "</span> val; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">key</span></span><span class="org-string">~|~</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">val</span></span><span class="org-string">"</span> &gt;&gt; $<span class="org-highlight-numbers-number">1</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">delete</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -z $<span class="org-highlight-numbers-number">2</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        sed -i <span class="org-sh-quoted-exec">$</span><span class="org-sh-quoted-exec"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-sh-quoted-exec">cat -n $1 | fzy | sed </span><span class="org-string"><span class="org-sh-quoted-exec">"s/\(\s*[0-9]*\)</span></span><span class="org-string">.*/\1dq/"</span><span class="org-rainbow-delimiters-depth-2">)</span> $<span class="org-highlight-numbers-number">1</span>
    <span class="org-keyword">else</span>
        <span class="org-variable-name">idx</span>=<span class="org-sh-quoted-exec">$</span><span class="org-sh-quoted-exec"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-sh-quoted-exec">grep -n </span><span class="org-string"><span class="org-sh-quoted-exec">"</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">~|~.*"</span></span><span class="org-sh-quoted-exec"> $2 | head -n1 | sed </span><span class="org-string"><span class="org-sh-quoted-exec">"s/^\([0-9]*\)</span></span><span class="org-string">:.*/\1/"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        sed -i <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{idx}</span></span><span class="org-string">d"</span> $<span class="org-highlight-numbers-number">2</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> sed -n <span class="org-string">"s/^</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">~|~\(.*\)/\1/p"</span> $<span class="org-highlight-numbers-number">2</span> | head -n1; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">readval</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-type">cat</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> | fzy | sed <span class="org-string">"s/.*~|~//"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">mkdir</span> -p ~/.config/bookmarks/;
<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> -z $<span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> readval $<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">ls</span> $<span class="org-variable-name">HOME</span>/.config/bookmarks/*.bm | fzy<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"add"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> add <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/bookmarks/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">.bm"</span>;
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"</span><span class="org-type"><span class="org-string">rm</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> delete <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/bookmarks/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">.bm"</span>;
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"get"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> get <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/bookmarks/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">.bm"</span>;
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"list"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> <span class="org-type">cat</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/bookmarks/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">.bm"</span> | sed <span class="org-string">"s/~|~/\t/"</span> | column -ts $<span class="org-string">'\t'</span>;
<span class="org-keyword">else</span> readval <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/bookmarks/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">.bm"</span>;
<span class="org-keyword">fi</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgabf08a0" class="outline-2">
<h2 id="orgabf08a0"><span class="section-number-2">11.</span> catenate<a aria-hidden="true" href="#orgabf08a0">#</a> </h2>
<div class="outline-text-2" id="text-11">
<details id='orgf39dded' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgf39dded'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">CATENATE: Prepend/Append data to stdin</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 17/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">catenate</span><span class="org-rainbow-delimiters-depth-1">()</span>  <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-type">cat</span> &lt;<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">echo</span> -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span> - &lt;<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">echo</span> -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org76898d3" class="outline-2">
<h2 id="org76898d3"><span class="section-number-2">12.</span> cb<a aria-hidden="true" href="#org76898d3">#</a> </h2>
<div class="outline-text-2" id="text-12">
<details id='org4e134f4' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org4e134f4'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">CB: </span><span class="org-type"><span class="org-comment">cd</span></span><span class="org-comment"> bookmarks</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 31/08/2021</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>

<span class="org-function-name">cb</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> Prompt for missing args</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> -z $<span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; bm list dirs
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
        add) <span class="org-type">echo</span> -e <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">\n</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">pwd</span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span> | bm add dirs;;
        <span class="org-type">rm</span>) bm <span class="org-type">rm</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> dirs;;
        list) bm list dirs;;
        reload) <span class="org-builtin">source</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NREPOS</span></span><span class="org-string">/n0s1.core/cb"</span>;;
        *) <span class="org-type">cd</span> $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">bm</span> get <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> dirs<span class="org-rainbow-delimiters-depth-2">)</span>;;
    <span class="org-keyword">esac</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org6f1cc51" class="outline-2">
<h2 id="org6f1cc51"><span class="section-number-2">13.</span> check<sub>root</sub><a aria-hidden="true" href="#org6f1cc51">#</a> </h2>
<div class="outline-text-2" id="text-13">
<details id='org6dfe2fa' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org6dfe2fa'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">CHECK_ROOT: Throws an error if the current user is not root</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 07/11/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">check_root</span> <span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">EUID</span> - <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"Error this must be run as root"</span>  &amp;&amp; <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">1</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orga2f4c37" class="outline-2">
<h2 id="orga2f4c37"><span class="section-number-2">14.</span> colours<a aria-hidden="true" href="#orga2f4c37">#</a> </h2>
<div class="outline-text-2" id="text-14">
<details id='org70c70b7' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org70c70b7'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-variable-name">green</span>=<span class="org-sh-quoted-exec">`tput setaf 2`</span>
<span class="org-variable-name">red</span>=<span class="org-sh-quoted-exec">`tput setaf 1`</span>
<span class="org-variable-name">yellow</span>=<span class="org-sh-quoted-exec">`tput setaf 3`</span>
<span class="org-variable-name">blue</span>=<span class="org-sh-quoted-exec">`tput setaf 4`</span>
<span class="org-variable-name">magenta</span>=<span class="org-sh-quoted-exec">`tput setaf 5`</span>
<span class="org-variable-name">cyan</span>=<span class="org-sh-quoted-exec">`tput setaf 6`</span>
<span class="org-variable-name">white</span>=<span class="org-sh-quoted-exec">`tput setaf 7`</span>
<span class="org-variable-name">blink</span>=<span class="org-sh-quoted-exec">`tput blink`</span>
<span class="org-variable-name">reset</span>=<span class="org-sh-quoted-exec">`tput sgr0`</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org351bb01" class="outline-2">
<h2 id="org351bb01"><span class="section-number-2">15.</span> detect<sub>os</sub><a aria-hidden="true" href="#org351bb01">#</a> </h2>
<div class="outline-text-2" id="text-15">
<details id='org77ed00c' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org77ed00c'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">detect_os: Attempts to detect the current operating system</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:37:08 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-function-name">detect_os</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">os</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">uname</span> | tr <span class="org-string">'[:upper:]'</span> <span class="org-string">'[:lower:]'</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
      linux|linux*)
        <span class="org-builtin">export</span> <span class="org-variable-name">NANOS_NAME</span>=linux
        <span class="org-variable-name">distros</span>=<span class="org-sh-quoted-exec">$</span><span class="org-sh-quoted-exec"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-sh-quoted-exec">cat /etc/*-release | sed -n </span><span class="org-string"><span class="org-sh-quoted-exec">"s/DISTRIB_ID=\(.*\)</span></span><span class="org-string">/\1/p"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-keyword">case</span> $<span class="org-variable-name">distros</span><span class="org-keyword"> in</span>
            ManjaroLinux) <span class="org-variable-name">NANOS_DISTRO</span>=<span class="org-string">"Arch"</span> ;;
            Ubuntu) <span class="org-variable-name">NANOS_DISTRO</span>=<span class="org-string">"Ubuntu"</span> ;;
            *)
                <span class="org-keyword">if</span> pacman --help &gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;&amp;<span class="org-highlight-numbers-number">1</span>; <span class="org-keyword">then</span>
                    <span class="org-variable-name">NANOS_DISTRO</span>=<span class="org-string">"Arch"</span>
                <span class="org-keyword">elif </span><span class="org-builtin">command</span> -v termux-setup-storage &gt; /dev/null <span class="org-highlight-numbers-number">2</span>&gt;&amp;<span class="org-highlight-numbers-number">1</span>; <span class="org-keyword">then</span>
                    <span class="org-variable-name">NAN0S_DISTRO</span>=<span class="org-string">"Termux"</span>
                <span class="org-keyword">else</span>
                    <span class="org-type">echo</span> <span class="org-string">"Unrecognized linux distro, please update startup script"</span>
                    <span class="org-keyword">exit</span>
                <span class="org-keyword">fi</span>
                ;;
        <span class="org-keyword">esac</span>
        <span class="org-variable-name">NANOS_REPOS_DIR</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/repos/me"</span>
        ;;
      darwin*)
        <span class="org-builtin">export</span> <span class="org-variable-name">NANOS_NAME</span>=osx
        ;;
      msys*|MINGW64_NT-10.0*)
        <span class="org-builtin">export</span> <span class="org-variable-name">NANOS_NAME</span>=windows
        <span class="org-variable-name">NANOS_DISTRO</span>=<span class="org-string">"Windows"</span>
        <span class="org-variable-name">NANOS_REPOS_DIR</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/repos/me"</span>
        ;;
      *)
        <span class="org-type">echo</span> <span class="org-string">"Unrecognized OS {</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">os</span></span><span class="org-string">}, please update startup script"</span>
        <span class="org-keyword">exit</span>
        ;;
    <span class="org-keyword">esac</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgd7d54de" class="outline-2">
<h2 id="orgd7d54de"><span class="section-number-2">16.</span> discordwebhooks<a aria-hidden="true" href="#orgd7d54de">#</a> </h2>
<div class="outline-text-2" id="text-16">
<details id='org5e9e9c2' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org5e9e9c2'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">DISCORD_WEBHOOKS: Tool for managing and messaging using discord webhooks</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 17/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">save</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-builtin">read</span> -p <span class="org-string">"Enter </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">: "</span> r1; <span class="org-builtin">read</span> -p <span class="org-string">"Enter </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">: "</span> r2; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">r1</span></span><span class="org-string">|</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">r2</span></span><span class="org-string">"</span> &gt;&gt; $<span class="org-highlight-numbers-number">3</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">delete</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> sed -i $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">cat</span> -n $<span class="org-highlight-numbers-number">1</span> | fzf --with-nth 2.. | awk <span class="org-string">'{print $1"d"}'</span><span class="org-rainbow-delimiters-depth-2">)</span> $<span class="org-highlight-numbers-number">1</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">mkdir</span> -p ~/.config/discordwebhooks/;
<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> -z $<span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-variable-name">IFS</span>=<span class="org-string">'|'</span> read -r username avatar_url &lt;&lt;&lt; $<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">cat</span> $<span class="org-variable-name">HOME</span>/.config/discordwebhooks/users.bm | fzf<span class="org-rainbow-delimiters-depth-1">)</span>
    <span class="org-variable-name">IFS</span>=<span class="org-string">'|'</span> read -r channel_name webhook_url &lt;&lt;&lt; $<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">cat</span> $<span class="org-variable-name">HOME</span>/.config/discordwebhooks/channels.bm | fzf<span class="org-rainbow-delimiters-depth-1">)</span>
    <span class="org-type">echo</span> <span class="org-string">"Enter message to post in </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">channel_name</span></span><span class="org-string">:"</span>
    <span class="org-keyword">while</span> true; <span class="org-keyword">do</span>
        <span class="org-builtin">read</span> -p <span class="org-string">"&gt; "</span> msg || <span class="org-keyword">exit</span> <span class="org-highlight-numbers-number">1</span>
        <span class="org-variable-name">data</span>=<span class="org-string">"{\"username\": \"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">username</span></span><span class="org-string">\", \"avatar_url\": \"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">avatar_url</span></span><span class="org-string">\", \"content\": \"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">msg</span></span><span class="org-string">\" }"</span>
        <span class="org-type">curl</span> -X POST -H <span class="org-string">"Content-Type: application/json"</span> -d <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">data</span></span><span class="org-string">"</span> $<span class="org-variable-name">webhook_url</span>
    <span class="org-keyword">done</span>
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"adduser"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> save <span class="org-string">"username"</span> <span class="org-string">"avatar url"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/discordwebhooks/users.bm"</span>;
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"addchannel"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> save <span class="org-string">"channel name"</span> <span class="org-string">"webhook url"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/discordwebhooks/channels.bm"</span>;
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"deleteuser"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> delete <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/discordwebhooks/users.bm"</span>;
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"deletechannel"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span> delete <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/discordwebhooks/channels.bm"</span>;
<span class="org-keyword">fi</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgd48a376" class="outline-2">
<h2 id="orgd48a376"><span class="section-number-2">17.</span> ef<a aria-hidden="true" href="#orgd48a376">#</a> </h2>
<div class="outline-text-2" id="text-17">
<details id='orgdb86795' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgdb86795'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">EF: Edit bookmarked files</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 31/08/2021</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>

<span class="org-function-name">ef</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> Prompt for missing args</span>
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
        add) <span class="org-type">echo</span> -e <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">\n</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">pwd</span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">"</span> | bm add editfiles;;
        <span class="org-type">rm</span>) bm <span class="org-type">rm</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> editfiles;;
        list) bm list editfiles;;
        reload) <span class="org-builtin">source</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NREPOS</span></span><span class="org-string">/n0s1.core/ef"</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"Reloaded ef"</span>;;
        *) vim $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">bm</span> get <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> editfiles<span class="org-rainbow-delimiters-depth-2">)</span>;;
    <span class="org-keyword">esac</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org5b79ccd" class="outline-2">
<h2 id="org5b79ccd"><span class="section-number-2">18.</span> exprq<a aria-hidden="true" href="#org5b79ccd">#</a> </h2>
<div class="outline-text-2" id="text-18">
<details id='org0ed19a0' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org0ed19a0'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">exprx: syntactic sugar for expr to test if regex matches</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Fri 17 Sep 2021 14:48:03 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">&lt;http://www.gnu.org/licenses/&gt;.</a></span><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">

</a><span class="org-function-name"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">exprq</a></span><span class="org-rainbow-delimiters-depth-1"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">(</a><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">)</a></span><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1"> </a><span class="org-rainbow-delimiters-depth-1"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">{</a></span><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1"> expr </a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">"</a></span><span class="org-string"><span class="org-constant"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">$</a></span></span><span class="org-string"><span class="org-variable-name"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">1</a></span></span><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">"</a></span><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1"> : </a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">"</a></span><span class="org-string"><span class="org-constant"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">$</a></span></span><span class="org-string"><span class="org-variable-name"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">2</a></span></span><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">"</a></span><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1"> </a><span class="org-highlight-numbers-number"><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">1</a></span><a href="http://www.gnu.org/licenses/&gt;.

exprq() { expr &quot;$1&quot; : &quot;$2&quot; 1">&gt;</a>/dev/null; <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org81136e9" class="outline-2">
<h2 id="org81136e9"><span class="section-number-2">19.</span> findpkg<a aria-hidden="true" href="#org81136e9">#</a> </h2>
<div class="outline-text-2" id="text-19">
<details id='org424fa1c' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org424fa1c'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FINDPKG: Attempts to </span><span class="org-type"><span class="org-comment">find</span></span><span class="org-comment"> a package using available package managers</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 17/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">findpkg</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-builtin">local</span> <span class="org-variable-name">found_pkg_mgr</span>=false
    <span class="org-keyword">if </span><span class="org-builtin">command</span> -v pacman &gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;&amp;<span class="org-highlight-numbers-number">1</span>; <span class="org-keyword">then</span>
        <span class="org-variable-name">found_pkg_mgr</span>=true
        <span class="org-type">echo</span> -e <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">`tput setaf 2`</span></span><span class="org-string">Searching using pacman (</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">command</span><span class="org-string"><span class="org-sh-quoted-exec"> -v pacman)</span></span><span class="org-string">)</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
        <span class="org-type">sudo</span> pacman -Sy &amp;&amp; pacman -Ss $<span class="org-variable-name">@</span> &amp;&amp; <span class="org-keyword">return</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">`tput setaf 3`</span></span><span class="org-string">Could not </span><span class="org-type"><span class="org-string">find</span></span><span class="org-string"> package using pacman</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
    <span class="org-keyword">else</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">`tput setaf 3`</span></span><span class="org-string">Could not </span><span class="org-type"><span class="org-string">find</span></span><span class="org-string"> pacman</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>

    <span class="org-keyword">if </span><span class="org-builtin">command</span> -v yay &gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;&amp;<span class="org-highlight-numbers-number">1</span>; <span class="org-keyword">then</span>
        <span class="org-variable-name">found_pkg_mgr</span>=true
        <span class="org-type">echo</span> -e <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">`tput setaf 2`</span></span><span class="org-string">Searching using yay (</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">command</span><span class="org-string"><span class="org-sh-quoted-exec"> -v yay)</span></span><span class="org-string">)</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
        yay -Sy &amp;&amp; <span class="org-builtin">local</span> <span class="org-variable-name">list</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">yay</span> -Ss $<span class="org-variable-name">@</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">list</span> != <span class="org-string">''</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">list</span></span><span class="org-string">"</span> &amp;&amp; <span class="org-keyword">return</span>
        <span class="org-type">echo</span> <span class="org-sh-quoted-exec">`tput setaf 3`</span><span class="org-string">"Could not </span><span class="org-type"><span class="org-string">find</span></span><span class="org-string"> package using yay</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
    <span class="org-keyword">else</span>
        <span class="org-type">echo</span> <span class="org-sh-quoted-exec">`tput setaf 3`</span><span class="org-string">"Could not </span><span class="org-type"><span class="org-string">find</span></span><span class="org-string"> yay</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>

    <span class="org-keyword">if</span> $<span class="org-variable-name">found_pkg_mgr</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">`tput setaf 1`</span></span><span class="org-string">Could not </span><span class="org-type"><span class="org-string">find</span></span><span class="org-string"> package using available package managers</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
    <span class="org-keyword">else</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">`tput setaf 1`</span></span><span class="org-string">Could not </span><span class="org-type"><span class="org-string">find</span></span><span class="org-string"> any valid package managers</span><span class="org-string"><span class="org-sh-quoted-exec">`tput sgr0`</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgb85ea44" class="outline-2">
<h2 id="orgb85ea44"><span class="section-number-2">20.</span> fzy<a aria-hidden="true" href="#orgb85ea44">#</a> </h2>
<div class="outline-text-2" id="text-20">
<details id='org889e25a' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org889e25a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FZY: Command Line Fuzzy Finder</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 29/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">hideinput</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-2">[</span> -t <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">save_state</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">stty</span> -g<span class="org-rainbow-delimiters-depth-2">)</span> &amp;&amp; stty -echo -icanon time <span class="org-highlight-numbers-number">0</span> min <span class="org-highlight-numbers-number">0</span> &amp;&amp; <span class="org-type">echo</span> -ne <span class="org-string">"\e[?1049h\r"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">cleanup</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-2">[</span> -t <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; stty <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">save_state</span></span><span class="org-string">"</span> &lt; /dev/tty &amp;&amp; <span class="org-type">echo</span> -ne <span class="org-string">"\e[?1049l"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">result</span></span><span class="org-string">"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">trap</span> <span class="org-string">'cleanup &lt; /dev/tty'</span> &lt; /dev/tty EXIT
<span class="org-keyword">trap</span> <span class="org-string">'hideinput &lt; /dev/tty'</span> CONT
hideinput &lt; /dev/tty

<span class="org-variable-name">input</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(&lt; /dev/stdin)</span></span><span class="org-string">"</span>;
<span class="org-variable-name">height</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> lines)</span></span><span class="org-string">"</span>;
<span class="org-variable-name">inum</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">input</span></span><span class="org-string">"</span> | wc -l<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-variable-name">fnum</span>=$<span class="org-variable-name">inum</span>;
<span class="org-variable-name">clearline</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> -e <span class="org-string">"\033[2K"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-variable-name">valid</span>=<span class="org-string">'0-9a-zA-Z '</span>
<span class="org-variable-name">str</span>=<span class="org-string">""</span>; <span class="org-variable-name">regex</span>=<span class="org-string">""</span>; <span class="org-variable-name">regex2</span>=<span class="org-string">""</span>; <span class="org-variable-name">result</span>=<span class="org-string">""</span>;
<span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span>; <span class="org-variable-name">col</span>=<span class="org-highlight-numbers-number">1</span>; <span class="org-variable-name">cur</span>=<span class="org-highlight-numbers-number">1</span>; <span class="org-variable-name">scrolling</span>=<span class="org-highlight-numbers-number">1</span>;
<span class="org-keyword">while</span> true;
<span class="org-keyword">do</span>
    <span class="org-variable-name">range</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">row</span></span><span class="org-string">,</span><span class="org-string"><span class="org-sh-quoted-exec">$((row+height-3)</span></span><span class="org-string">)p;</span><span class="org-string"><span class="org-sh-quoted-exec">$((row+height-3)</span></span><span class="org-string">)q"</span>;
    <span class="org-variable-name">filtered</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">input</span></span><span class="org-string">"</span> | <span class="org-type">grep</span> <span class="org-string">".*</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">regex</span></span><span class="org-string">"</span> | sed -n $<span class="org-variable-name">range</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null | sed -e <span class="org-string">"s/^.*/  &amp;/"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-variable-name">frange</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">filtered</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" | wc -l)</span></span><span class="org-string">"</span>;
    <span class="org-variable-name">curpos</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>frange-cur+1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtered</span></span><span class="org-string">"</span> | cut -c$<span class="org-variable-name">col</span>- | <span class="org-type">grep</span> -E --color=always <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">regex2</span></span><span class="org-string">"</span> | tac | sed -e $<span class="org-variable-name">curpos</span><span class="org-string">"s/^  \(.*\)/&gt; \1/;s/^.*/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">clearline</span></span><span class="org-string">&amp;/"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>;
    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">clearline</span></span><span class="org-string">  </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fnum</span></span><span class="org-string">/</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">inum</span></span><span class="org-string">"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>;
    tput cnorm
    <span class="org-rainbow-delimiters-depth-1">[</span> $<span class="org-variable-name">scrolling</span> = <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-builtin">read</span> -r -sn200 -t <span class="org-highlight-numbers-number">0.0001</span> junk &lt; /dev/tty;
    <span class="org-builtin">read</span> -r -p <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">clearline</span></span><span class="org-string">&gt; </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">"</span> -sn1 &lt; /dev/tty;
    <span class="org-builtin">read</span> -r -sn3 -t <span class="org-highlight-numbers-number">0.001</span> k1 &lt; /dev/tty;
    <span class="org-variable-name">REPLY</span>+=$<span class="org-variable-name">k1</span>;
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
        <span class="org-string">''</span>)
            <span class="org-variable-name">result</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtered</span></span><span class="org-string">"</span> | sed -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{cur}</span></span><span class="org-string">s/  //p;</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{cur}</span></span><span class="org-string">q"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
            <span class="org-keyword">exit</span>;
            ;;
        $<span class="org-string">'\e[C'</span>|$<span class="org-string">'\e0C'</span>) <span class="org-variable-name">col</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>col+1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> &amp;&amp; <span class="org-variable-name">scrolling</span>=<span class="org-highlight-numbers-number">1</span> ;;
        $<span class="org-string">'\e[D'</span>|$<span class="org-string">'\e0D'</span>) <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">col</span> -gt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">col</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>col-1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> &amp;&amp; <span class="org-variable-name">scrolling</span>=<span class="org-highlight-numbers-number">1</span> ;;
        $<span class="org-string">'\e[B'</span>|$<span class="org-string">'\e0B'</span>) <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">cur</span> -ge <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">cur</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>cur-1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> &amp;&amp; <span class="org-variable-name">scrolling</span>=<span class="org-highlight-numbers-number">1</span> ;;
        $<span class="org-string">'\e[A'</span>|$<span class="org-string">'\e0A'</span>) <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">cur</span> -le $<span class="org-variable-name">fnum</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">cur</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>cur+1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> &amp;&amp; <span class="org-variable-name">scrolling</span>=<span class="org-highlight-numbers-number">1</span> ;;
        $<span class="org-string">'\e[1~'</span>|$<span class="org-string">'\e0H'</span>|$<span class="org-string">'\e[H'</span>) <span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span> ;;
        $<span class="org-string">'\e[4~'</span>|$<span class="org-string">'\e0F'</span>|$<span class="org-string">'\e[F'</span>) <span class="org-variable-name">row</span>=$<span class="org-variable-name">fnum</span> ;;
        *)
            <span class="org-variable-name">char</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span> | hexdump -c | tr -d <span class="org-string">'[:space:]'</span><span class="org-rainbow-delimiters-depth-1">)</span>;
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">char</span> = <span class="org-string">"0000000033\n0000002"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
                <span class="org-keyword">exit</span> <span class="org-highlight-numbers-number">1</span>;
            <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">char</span> = <span class="org-string">"0000000177\n0000002"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-rainbow-delimiters-depth-3">{</span>#<span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-3">}</span> -gt <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
                <span class="org-variable-name">str</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{str::-1}</span></span><span class="org-string">"</span>;
                <span class="org-variable-name">scrolling</span>=<span class="org-highlight-numbers-number">1</span>;
            <span class="org-keyword">else</span>
                <span class="org-variable-name">filtchar</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span> | hexdump -c | awk <span class="org-string">'{ print $2 }'</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-variable-name">result</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtchar</span></span><span class="org-string">"</span>
                <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtchar</span></span><span class="org-string">"</span> != <span class="org-string">"033"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtchar</span></span><span class="org-string">"</span> != <span class="org-string">"177"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-negation-char">!</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span>  =~ <span class="org-rainbow-delimiters-depth-3">[</span>^$<span class="org-variable-name">valid</span><span class="org-rainbow-delimiters-depth-3">]</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
                    <span class="org-variable-name">str</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">$REPLY"</span> &amp;&amp; <span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span>;
                    <span class="org-variable-name">scrolling</span>=<span class="org-highlight-numbers-number">0</span>;
                <span class="org-keyword">fi</span>
            <span class="org-keyword">fi</span>
            <span class="org-variable-name">regex</span>=<span class="org-sh-quoted-exec">$</span><span class="org-sh-quoted-exec"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-sh-quoted-exec">echo </span><span class="org-string"><span class="org-sh-quoted-exec">"</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">str</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">"</span></span><span class="org-sh-quoted-exec"> | sed </span><span class="org-string"><span class="org-sh-quoted-exec">"s/\(.\)</span></span><span class="org-string">/\1.*/g"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
            <span class="org-variable-name">regex2</span>=<span class="org-sh-quoted-exec">$</span><span class="org-sh-quoted-exec"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-sh-quoted-exec">echo </span><span class="org-string"><span class="org-sh-quoted-exec">"</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">str</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">"</span></span><span class="org-sh-quoted-exec"> | sed </span><span class="org-string"><span class="org-sh-quoted-exec">"s/\(.\)</span></span><span class="org-string">/\1|/g"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
            <span class="org-variable-name">fnum</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">input</span></span><span class="org-string">"</span> | <span class="org-type">grep</span> -c <span class="org-string">".*</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">regex</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
            ;;
    <span class="org-keyword">esac</span>
    <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>frange-cur+1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> -lt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">row</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>row+1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> &amp;&amp; <span class="org-variable-name">cur</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>cur-1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">cur</span> -lt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">row</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>row-1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> &amp;&amp; <span class="org-variable-name">cur</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>cur+1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">cur</span> -gt $<span class="org-variable-name">fnum</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">cur</span>=$<span class="org-variable-name">fnum</span>;
    <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>row-fnum+frange<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> -gt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">row</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>row-1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">row</span> -lt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span>;
    tput civis
    tput cup <span class="org-highlight-numbers-number">0</span> <span class="org-highlight-numbers-number">0</span>
    <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">fnum</span> -lt $<span class="org-variable-name">height</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; yes <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">clearline</span></span><span class="org-string">"</span> | sed <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$((height-fnum-2)</span></span><span class="org-string">)q"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>;
<span class="org-keyword">done</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org18bda87" class="outline-2">
<h2 id="org18bda87"><span class="section-number-2">21.</span> fzy<sub>lite</sub><a aria-hidden="true" href="#org18bda87">#</a> </h2>
<div class="outline-text-2" id="text-21">
<details id='org717725d' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org717725d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FZY_Lite: 10 SLOC Command Line Fuzzy Finder</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright: Nan0Scho1ar (Christopher Mackinga) MIT License (29/10/2020)</span>

<span class="org-function-name">fzy_lite</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">str</span>=<span class="org-string">""</span>; <span class="org-variable-name">input</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(&lt; /dev/stdin)</span></span><span class="org-string">"</span>; <span class="org-type">echo</span> -e <span class="org-string">"\e[?1049h"</span>; <span class="org-keyword">while</span> true; <span class="org-keyword">do</span>
    <span class="org-variable-name">filtered</span>=<span class="org-sh-quoted-exec">$</span><span class="org-sh-quoted-exec"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-sh-quoted-exec">echo </span><span class="org-string"><span class="org-sh-quoted-exec">"</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">input</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">"</span></span><span class="org-sh-quoted-exec"> | </span><span class="org-type"><span class="org-sh-quoted-exec">grep</span></span><span class="org-sh-quoted-exec"> </span><span class="org-string"><span class="org-sh-quoted-exec">".*$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">str</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" | sed "s/\(.\)</span></span><span class="org-string">/\1.*/g")"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtered</span></span><span class="org-string">"</span>; <span class="org-builtin">read</span> -p <span class="org-string">"&gt; </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">"</span> -n <span class="org-highlight-numbers-number">1</span> -s &lt; /dev/tty;
    <span class="org-variable-name">char</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">echo</span> $<span class="org-variable-name">REPLY</span> | hexdump -c | awk <span class="org-string">'{ print $2 }'</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">char</span> = <span class="org-string">"\n"</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-type">echo</span> -e <span class="org-string">"\e[?1049l</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtered</span></span><span class="org-string">"</span> &amp;&amp; <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">0</span>
    <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">char</span> = <span class="org-string">"177"</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">str</span> = <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-type">echo</span> -e <span class="org-string">"\e[?1049l"</span> &amp;&amp; <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">1</span>
    <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">char</span> = <span class="org-string">"177"</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">str</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{str::-1}</span></span><span class="org-string">"</span> || <span class="org-variable-name">str</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">$REPLY"</span>;
    yes <span class="org-string">''</span> | sed <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> lines)</span></span><span class="org-string">q"</span>; <span class="org-keyword">done</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orga584a4e" class="outline-2">
<h2 id="orga584a4e"><span class="section-number-2">22.</span> hackless<a aria-hidden="true" href="#orga584a4e">#</a> </h2>
<div class="outline-text-2" id="text-22">
<details id='orgfc98a8d' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgfc98a8d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">LESS: The hackable </span><span class="org-type"><span class="org-comment">less</span></span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 30/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">hackless</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">lines</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">cat</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">cat</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> /dev/stdin)</span></span><span class="org-string">"</span>
    <span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span> &amp;&amp; <span class="org-variable-name">col</span>=<span class="org-highlight-numbers-number">1</span> &amp;&amp; <span class="org-variable-name">regex</span>=<span class="org-string">""</span> &amp;&amp;
    <span class="org-variable-name">height</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> lines)</span></span><span class="org-string">"</span> &amp;&amp; <span class="org-variable-name">cols</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">tput</span> cols<span class="org-rainbow-delimiters-depth-2">)</span> &amp;&amp;
    <span class="org-variable-name">numln</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">lines</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" | wc -l)</span></span><span class="org-string">"</span> &amp;&amp;
    <span class="org-variable-name">maxlen</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">lines</span></span><span class="org-string">"</span> | awk <span class="org-string">'{ print length }'</span> | sort -n | tail -1<span class="org-rainbow-delimiters-depth-2">)</span> &amp;&amp;
    <span class="org-variable-name">lastln</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$([[ </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">numln</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> -ge </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">height</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> ]] &amp;&amp; </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> $((numln-height+2)</span></span><span class="org-string">) || </span><span class="org-type"><span class="org-string">echo</span></span><span class="org-string"> 1)"</span> &amp;&amp;
    <span class="org-variable-name">lastcol</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$([[ </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">maxlen</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> -ge </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">cols</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> ]] &amp;&amp; </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> $((maxlen-cols+4)</span></span><span class="org-string">) || </span><span class="org-type"><span class="org-string">echo</span></span><span class="org-string"> 1)"</span> &amp;&amp;
    <span class="org-variable-name">lines</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">lines</span></span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec">; yes '~' | sed -n "1,</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">{cols}</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">p;</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">{cols}</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">q")</span></span><span class="org-string">"</span> &amp;&amp;
    <span class="org-type">echo</span> -e <span class="org-string">"\e[?1049h"</span> || <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">1</span>
    <span class="org-keyword">while</span> true; <span class="org-keyword">do</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">lines</span></span><span class="org-string">"</span> | sed -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">row</span></span><span class="org-string">,</span><span class="org-string"><span class="org-sh-quoted-exec">$((row+height-2)</span></span><span class="org-string">)p;</span><span class="org-string"><span class="org-sh-quoted-exec">$((row+height-2)</span></span><span class="org-string">)q"</span> <span class="org-sh-escaped-newline">\</span>
            | cut -c $<span class="org-variable-name">col</span>-$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>col+cols-1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> | <span class="org-type">grep</span> --colour=always <span class="org-string">"^\|</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">regex</span></span><span class="org-string">"</span>;
        <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">row</span> -eq $<span class="org-variable-name">lastln</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">cur</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> rev)</span></span><span class="org-string">END</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> sgr0)</span></span><span class="org-string">"</span> || <span class="org-variable-name">cur</span>=<span class="org-string">":"</span>
        <span class="org-builtin">read</span> -rsn1 -p <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">cur</span></span><span class="org-string">"</span> &lt; /dev/tty char &amp;&amp; <span class="org-type">echo</span> -e <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> el1)</span></span><span class="org-string">\r"</span>
        <span class="org-keyword">case</span> $<span class="org-variable-name">char</span><span class="org-keyword"> in</span>
            <span class="org-string">'q'</span>) <span class="org-type">echo</span> -e <span class="org-string">"\e[?1049l"</span> &amp;&amp; <span class="org-keyword">return</span>;;
            <span class="org-string">'k'</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">row</span> -gt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">row</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>row-1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'j'</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">row</span> -lt $<span class="org-variable-name">lastln</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">row</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>row+1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'h'</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">col</span> -gt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">col</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>col-1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'l'</span>) <span class="org-variable-name">col</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>col+1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'g'</span>) <span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span>;;
            <span class="org-string">'G'</span>) <span class="org-variable-name">row</span>=$<span class="org-variable-name">lastln</span>;;
            <span class="org-string">'0'</span>) <span class="org-variable-name">col</span>=<span class="org-highlight-numbers-number">1</span>;;
            <span class="org-string">'$'</span>) <span class="org-variable-name">col</span>=$<span class="org-variable-name">lastcol</span>;;
            <span class="org-string">'/'</span>) <span class="org-builtin">read</span> -p <span class="org-string">"/"</span> &lt; /dev/tty regex;;
        <span class="org-keyword">esac</span>
    <span class="org-keyword">done</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgc573f1c" class="outline-2">
<h2 id="orgc573f1c"><span class="section-number-2">23.</span> hist<a aria-hidden="true" href="#orgc573f1c">#</a> </h2>
<div class="outline-text-2" id="text-23">
<details id='org46442e7' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org46442e7'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">HIST: Shell history made easy</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 06/11/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-rainbow-delimiters-depth-1">[</span> $<span class="org-variable-name">SHELL</span> = <span class="org-string">"/bin/zsh"</span> <span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp;
    <span class="org-variable-name">histfile</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_CONFIG_HOME</span></span><span class="org-string">/zsh/.zhistory"</span> ||
    <span class="org-variable-name">histfile</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.history"</span>

<span class="org-variable-name">sep</span>=<span class="org-string">"; "</span>
<span class="org-variable-name">cmdlist</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span>

<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> -z <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-type">cat</span> --number <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">histfile</span></span><span class="org-string">"</span> | <span class="org-type">less</span>
    <span class="org-keyword">exit</span>
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">'-a'</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-variable-name">sep</span>=<span class="org-string">" &amp;&amp; "</span>
    <span class="org-variable-name">cmdlist</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span>
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> =~ <span class="org-string">"-h|--help"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-type">echo</span> <span class="org-string">"hist            list history"</span>
    <span class="org-type">echo</span> <span class="org-string">"hist 50..55     run cmd list ; seperated"</span>
    <span class="org-type">echo</span> <span class="org-string">"hist -a 50..55  run cmd list &amp;&amp; seperated"</span>
    <span class="org-keyword">exit</span>
<span class="org-keyword">fi</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">50..55</span>
<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">cmdlist</span> =~ ^<span class="org-rainbow-delimiters-depth-3">[</span>0-9<span class="org-rainbow-delimiters-depth-3">]</span>+<span class="org-string">\.\.</span><span class="org-rainbow-delimiters-depth-3">[</span>0-9<span class="org-rainbow-delimiters-depth-3">]</span>+$ <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-variable-name">START</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">cmdlist</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> | sed 's/^\([0-9]*\)</span></span><span class="org-string">\.\.\([0-9]*\)$/\1/')"</span>
    <span class="org-variable-name">END</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">cmdlist</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> | sed 's/^\([0-9]*\)</span></span><span class="org-string">\.\.\([0-9]*\)$/\2/')"</span>
    <span class="org-variable-name">final</span>=<span class="org-string">""</span>
    <span class="org-keyword">for</span> i<span class="org-keyword"> in</span> $<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">eval</span> <span class="org-type">echo</span> <span class="org-string">"{</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">START</span></span><span class="org-string">..</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">END</span></span><span class="org-string">}"</span><span class="org-rainbow-delimiters-depth-1">)</span>; <span class="org-keyword">do</span>
        <span class="org-variable-name">cmd</span>=<span class="org-sh-quoted-exec">$</span><span class="org-sh-quoted-exec"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-sh-quoted-exec">cat --number $histfile | sed -n </span><span class="org-string"><span class="org-sh-quoted-exec">"s/^\s*</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">{i}</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">\t\(.*\)</span></span><span class="org-string">/\1/p"</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">[</span> -z <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">final</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-variable-name">final</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">cmd</span></span><span class="org-string">"</span> || <span class="org-variable-name">final</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">final</span></span><span class="org-string">$sep</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">cmd</span></span><span class="org-string">"</span>
    <span class="org-keyword">done</span>
    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">final</span></span><span class="org-string">"</span>
    <span class="org-builtin">eval</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">final</span></span><span class="org-string">"</span>
<span class="org-keyword">fi</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org9dec363" class="outline-2">
<h2 id="org9dec363"><span class="section-number-2">24.</span> keyrepeat<a aria-hidden="true" href="#org9dec363">#</a> </h2>
<div class="outline-text-2" id="text-24">
<details id='org1295fc0' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org1295fc0'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>

<span class="org-function-name">hideinput</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -t <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-variable-name">save_state</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">stty</span> -g<span class="org-rainbow-delimiters-depth-2">)</span>
        stty -echo -icanon time <span class="org-highlight-numbers-number">0</span> min <span class="org-highlight-numbers-number">0</span>
        <span class="org-type">echo</span> -ne <span class="org-string">"\e[?1049h\r"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>;
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">cleanup</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -t <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        stty <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">save_state</span></span><span class="org-string">"</span> &lt; /dev/tty
        <span class="org-type">echo</span> -ne <span class="org-string">"\e[?1049l"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>;
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">result</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">trap</span> <span class="org-string">'cleanup &lt; /dev/tty'</span> &lt; /dev/tty EXIT
<span class="org-keyword">trap</span> <span class="org-string">'hideinput &lt; /dev/tty'</span> CONT
hideinput &lt; /dev/tty

<span class="org-keyword">while</span> true
<span class="org-keyword">do</span>
    <span class="org-builtin">read</span> -r -sn1000 -t <span class="org-highlight-numbers-number">0.001</span> junk &lt; /dev/tty;
    <span class="org-builtin">read</span> -r -sn1 &lt; /dev/tty;
    <span class="org-builtin">read</span> -r -sn3 -t <span class="org-highlight-numbers-number">0.001</span> k1 &lt; /dev/tty;
    <span class="org-variable-name">REPLY</span>+=$<span class="org-variable-name">k1</span>;
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
        <span class="org-string">''</span>)
            <span class="org-type">echo</span> <span class="org-string">"Enter pressed"</span>
            ;;
        $<span class="org-string">'\e[C'</span>|$<span class="org-string">'\e0C'</span>) <span class="org-type">echo</span> <span class="org-string">"Right arrow pressed"</span>;;
        $<span class="org-string">'\e[D'</span>|$<span class="org-string">'\e0D'</span>) <span class="org-type">echo</span> <span class="org-string">"Left arrow pressed"</span>;;
        $<span class="org-string">'\e[B'</span>|$<span class="org-string">'\e0B'</span>) <span class="org-type">echo</span> <span class="org-string">"Down arrow pressed"</span>;;
        $<span class="org-string">'\e[A'</span>|$<span class="org-string">'\e0A'</span>) <span class="org-type">echo</span> <span class="org-string">"Up arrow pressed"</span>;;
        $<span class="org-string">'\e[1~'</span>|$<span class="org-string">'\e0H'</span>|$<span class="org-string">'\e[H'</span>) <span class="org-type">echo</span> <span class="org-string">"Home pressed"</span>;;
        $<span class="org-string">'\e[4~'</span>|$<span class="org-string">'\e0F'</span>|$<span class="org-string">'\e[F'</span>) <span class="org-type">echo</span> <span class="org-string">"End pressed"</span>;;
        *)
            <span class="org-variable-name">char</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span> | hexdump -c | tr -d <span class="org-string">'[:space:]'</span><span class="org-rainbow-delimiters-depth-1">)</span>;
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">char</span> = <span class="org-string">"0000000033\n0000002"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
                <span class="org-type">echo</span> <span class="org-string">"Escape pressed"</span>
                <span class="org-keyword">exit</span>;
            <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">char</span> = <span class="org-string">"0000000177\n0000002"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-rainbow-delimiters-depth-3">{</span>#<span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-3">}</span> -gt <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
                <span class="org-type">echo</span> <span class="org-string">"Backspace pressed"</span>
            <span class="org-keyword">else</span>
                <span class="org-variable-name">filtchar</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span> | hexdump -c | awk <span class="org-string">'{ print $2 }'</span><span class="org-rainbow-delimiters-depth-1">)</span>
                <span class="org-variable-name">result</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtchar</span></span><span class="org-string">"</span>
                <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtchar</span></span><span class="org-string">"</span> != <span class="org-string">"033"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">filtchar</span></span><span class="org-string">"</span> != <span class="org-string">"177"</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-negation-char">!</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string">"</span>  =~ <span class="org-rainbow-delimiters-depth-3">[</span>^$<span class="org-variable-name">valid</span><span class="org-rainbow-delimiters-depth-3">]</span> <span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
                    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">REPLY</span></span><span class="org-string"> pressed"</span>
                <span class="org-keyword">fi</span>
            <span class="org-keyword">fi</span>
            ;;
    <span class="org-keyword">esac</span>
    <span class="org-type">sleep</span> <span class="org-highlight-numbers-number">0.1</span>
<span class="org-keyword">done</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org6ced61c" class="outline-2">
<h2 id="org6ced61c"><span class="section-number-2">25.</span> n0s1<a aria-hidden="true" href="#org6ced61c">#</a> </h2>
<div class="outline-text-2" id="text-25">
<details id='org4e2decb' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org4e2decb'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>

<span class="org-variable-name">green</span>=<span class="org-sh-quoted-exec">`tput setaf 2`</span>
<span class="org-variable-name">red</span>=<span class="org-sh-quoted-exec">`tput setaf 1`</span>
<span class="org-variable-name">yellow</span>=<span class="org-sh-quoted-exec">`tput setaf 3`</span>
<span class="org-variable-name">blue</span>=<span class="org-sh-quoted-exec">`tput setaf 4`</span>
<span class="org-variable-name">magenta</span>=<span class="org-sh-quoted-exec">`tput setaf 5`</span>
<span class="org-variable-name">cyan</span>=<span class="org-sh-quoted-exec">`tput setaf 6`</span>
<span class="org-variable-name">white</span>=<span class="org-sh-quoted-exec">`tput setaf 7`</span>
<span class="org-variable-name">blink</span>=<span class="org-sh-quoted-exec">`tput blink`</span>
<span class="org-variable-name">reset</span>=<span class="org-sh-quoted-exec">`tput sgr0`</span>

<span class="org-function-name">nan0S</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">echo</span> <span class="org-string">'                    ___  ____  '</span>
    <span class="org-type">echo</span> <span class="org-string">' _ __   __ _ _ __  / _ \/ ___| '</span>
    <span class="org-type">echo</span> <span class="org-string">'| `_ \ / _` | `_ \| | | \___ \ '</span>
    <span class="org-type">echo</span> <span class="org-string">'| | | | (_| | | | | |_| |___) |'</span>
    <span class="org-type">echo</span> <span class="org-string">'|_| |_|\__,_|_| |_|\___/|____/ '</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">n0s1_tiny</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">echo</span> <span class="org-string">'    /\   /\   '</span>
    <span class="org-type">echo</span> <span class="org-string">'   //\\ //\\  '</span>
    <span class="org-type">echo</span> <span class="org-string">'  //  \V/  \\ '</span>
    <span class="org-type">echo</span> <span class="org-string">' //   /A\   \\ '</span>
    <span class="org-type">echo</span> <span class="org-string">'//----/_\____\\'</span>
    <span class="org-type">echo</span> <span class="org-string">'/-------------\'</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">n0s1</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">echo</span> <span class="org-string">'       /\     /\        '</span>
    <span class="org-type">echo</span> <span class="org-string">'      /  \   /  \       '</span>
    <span class="org-type">echo</span> <span class="org-string">'     / /\ \ / /\ \      '</span>
    <span class="org-type">echo</span> <span class="org-string">'    / /  \ X /  \ \     '</span>
    <span class="org-type">echo</span> <span class="org-string">'   / /    X X    \ \    '</span>
    <span class="org-type">echo</span> <span class="org-string">'  / /    / X \    \ \   '</span>
    <span class="org-type">echo</span> <span class="org-string">' / /    /_/_\_\    \ \  '</span>
    <span class="org-type">echo</span> <span class="org-string">'/_/______/___\      \ \ '</span>
    <span class="org-type">echo</span> <span class="org-string">' /      /____________\_\'</span>
    <span class="org-type">echo</span> <span class="org-string">'/_____________________\ '</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">n0s1_large</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">echo</span> <span class="org-string">'              /\           /\                '</span>
    <span class="org-type">echo</span> <span class="org-string">'             /  \         /  \               '</span>
    <span class="org-type">echo</span> <span class="org-string">'            /    \       /    \              '</span>
    <span class="org-type">echo</span> <span class="org-string">'           /      \     /      \             '</span>
    <span class="org-type">echo</span> <span class="org-string">'          /   /\   \   /   /\   \            '</span>
    <span class="org-type">echo</span> <span class="org-string">'         /   /  \   \ /   /  \   \           '</span>
    <span class="org-type">echo</span> <span class="org-string">'        /   /    \   X   /    \   \          '</span>
    <span class="org-type">echo</span> <span class="org-string">'       /   /      \ / \ /      \   \         '</span>
    <span class="org-type">echo</span> <span class="org-string">'      /   /        X   X        \   \        '</span>
    <span class="org-type">echo</span> <span class="org-string">'     /   /        / \ / \        \   \       '</span>
    <span class="org-type">echo</span> <span class="org-string">'    /   /        /   X   \        \   \      '</span>
    <span class="org-type">echo</span> <span class="org-string">'   /   /        /   / \   \        \   \     '</span>
    <span class="org-type">echo</span> <span class="org-string">'  /   /        /___/___\___\        \   \    '</span>
    <span class="org-type">echo</span> <span class="org-string">' /   /            /     \            \   \   '</span>
    <span class="org-type">echo</span> <span class="org-string">'/___/____________/_______\            \   \  '</span>
    <span class="org-type">echo</span> <span class="org-string">'   /            /                      \   \ '</span>
    <span class="org-type">echo</span> <span class="org-string">'  /            /________________________\___\'</span>
    <span class="org-type">echo</span> <span class="org-string">' /                                       \   '</span>
    <span class="org-type">echo</span> <span class="org-string">'/_________________________________________\  '</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-variable-name">usegreen</span>=<span class="org-highlight-numbers-number">0</span>
<span class="org-variable-name">centered</span>=<span class="org-highlight-numbers-number">0</span>
<span class="org-variable-name">large</span>=<span class="org-highlight-numbers-number">0</span>
<span class="org-variable-name">banner</span>=<span class="org-highlight-numbers-number">0</span>

<span class="org-keyword">while </span><span class="org-builtin">getopts</span> <span class="org-string">"gclb"</span> OPT; <span class="org-keyword">do</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">OPT</span></span><span class="org-string">"</span> = <span class="org-string">"-"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>   <span class="org-comment-delimiter"># </span><span class="org-comment">long option: reformulate OPT and OPTARG</span>
      <span class="org-variable-name">OPT</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{OPTARG%%=*}</span></span><span class="org-string">"</span>       <span class="org-comment-delimiter"># </span><span class="org-comment">extract long option name</span>
      <span class="org-variable-name">OPTARG</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{OPTARG#$OPT}</span></span><span class="org-string">"</span>   <span class="org-comment-delimiter"># </span><span class="org-comment">extract long option argument (may be empty)</span>
      <span class="org-variable-name">OPTARG</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{OPTARG#=}</span></span><span class="org-string">"</span>      <span class="org-comment-delimiter"># </span><span class="org-comment">if long option argument, remove assigning `=`</span>
    <span class="org-keyword">fi</span>
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">OPT</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
        g) <span class="org-variable-name">usegreen</span>=<span class="org-highlight-numbers-number">1</span> ;;
        c) <span class="org-variable-name">centered</span>=<span class="org-highlight-numbers-number">1</span> ;;
        l) <span class="org-variable-name">large</span>=<span class="org-highlight-numbers-number">1</span> ;;
        b) <span class="org-variable-name">banner</span>=<span class="org-highlight-numbers-number">1</span> ;;
        ??*) die <span class="org-string">"Illegal option --</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">OPT</span></span><span class="org-string">"</span> ;;  <span class="org-comment-delimiter"># </span><span class="org-comment">bad long option</span>
        ?) <span class="org-keyword">exit</span> <span class="org-highlight-numbers-number">2</span> ;;  <span class="org-comment-delimiter"># </span><span class="org-comment">bad short option (error reported via getopts)</span>
  <span class="org-keyword">esac</span>
<span class="org-keyword">done</span>
<span class="org-builtin">shift</span> $<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>OPTIND-1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter"># </span><span class="org-comment">remove parsed options and args from $@ list</span>

<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> $<span class="org-variable-name">large</span> = <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-variable-name">text</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">n0s1_large</span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
<span class="org-keyword">else</span>
    <span class="org-variable-name">text</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">n0s1</span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
<span class="org-keyword">fi</span>


<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> $<span class="org-variable-name">usegreen</span> = <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-variable-name">text</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span>
<span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{text}</span></span>
<span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string">"</span>
<span class="org-keyword">fi</span>

<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> $<span class="org-variable-name">banner</span> = <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-variable-name">text</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{text}</span></span>
<span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">nan0S</span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
<span class="org-keyword">fi</span>

<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> $<span class="org-variable-name">centered</span> = <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{text}</span></span><span class="org-string">"</span> | center
<span class="org-keyword">else</span>
    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{text}</span></span><span class="org-string">"</span>
<span class="org-keyword">fi</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org4507a5d" class="outline-2">
<h2 id="org4507a5d"><span class="section-number-2">26.</span> n0s1m<a aria-hidden="true" href="#org4507a5d">#</a> </h2>
<div class="outline-text-2" id="text-26">
<details id='org043bf6b' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org043bf6b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">n0s1m: n0s1 menu</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Bish</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org4277de1" class="outline-2">
<h2 id="org4277de1"><span class="section-number-2">27.</span> org<sub>ingest</sub><a aria-hidden="true" href="#org4277de1">#</a> </h2>
<div class="outline-text-2" id="text-27">
<details id='org81ed4e1' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org81ed4e1'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Ingest a directory full of files to tangled script blocks in a org file.</span>

<span class="org-variable-name">dir</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$([ -z </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> ] &amp;&amp; </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">pwd</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
<span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>= read -r fname; <span class="org-keyword">do</span>
    <span class="org-type">echo</span> <span class="org-string">"* </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fname</span></span><span class="org-string">"</span>
    <span class="org-type">echo</span> <span class="org-string">"#+begin_src sh :tangle </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fname</span></span><span class="org-string">"</span>
    <span class="org-type">cat</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fname</span></span><span class="org-string">"</span>
    <span class="org-type">echo</span> <span class="org-string">"#+end_src"</span>
    <span class="org-type">echo</span>
<span class="org-keyword">done</span> &lt; &lt;<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ls</span> -p <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">dir</span></span><span class="org-string">"</span> | <span class="org-type">grep</span> -v /<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgf65516d" class="outline-2">
<h2 id="orgf65516d"><span class="section-number-2">28.</span> pfetch<a aria-hidden="true" href="#orgf65516d">#</a> </h2>
<div class="outline-text-2" id="text-28">
<details id='org7bbe696' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org7bbe696'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">pfetch - Simple POSIX sh fetch script.</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Wrapper around all escape sequences used by pfetch to allow for</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">greater control over which sequences are used (if any at all).</span>
<span class="org-function-name">esc</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">case</span> $<span class="org-highlight-numbers-number">1</span><span class="org-keyword"> in</span>
        CUU) <span class="org-variable-name">e</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{esc_c}</span></span><span class="org-string">[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{2}</span></span><span class="org-string">A"</span> ;; <span class="org-comment-delimiter"># </span><span class="org-comment">cursor up</span>
        CUD) <span class="org-variable-name">e</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{esc_c}</span></span><span class="org-string">[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{2}</span></span><span class="org-string">B"</span> ;; <span class="org-comment-delimiter"># </span><span class="org-comment">cursor down</span>
        CUF) <span class="org-variable-name">e</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{esc_c}</span></span><span class="org-string">[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{2}</span></span><span class="org-string">C"</span> ;; <span class="org-comment-delimiter"># </span><span class="org-comment">cursor right</span>
        CUB) <span class="org-variable-name">e</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{esc_c}</span></span><span class="org-string">[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{2}</span></span><span class="org-string">D"</span> ;; <span class="org-comment-delimiter"># </span><span class="org-comment">cursor left</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">text formatting</span>
        SGR)
            <span class="org-keyword">case</span> $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">PF_COLOR</span>:=<span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">in</span>
                (<span class="org-highlight-numbers-number">1</span>)
                    <span class="org-variable-name">e</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{esc_c}</span></span><span class="org-string">[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{2}</span></span><span class="org-string">m"</span>
                ;;

                (<span class="org-highlight-numbers-number">0</span>)
                    <span class="org-comment-delimiter"># </span><span class="org-comment">colors disabled</span>
                    <span class="org-variable-name">e</span>=
                ;;
            <span class="org-keyword">esac</span>
        ;;

        <span class="org-comment-delimiter"># </span><span class="org-comment">line wrap</span>
        DECAWM)
            <span class="org-keyword">case</span> $<span class="org-variable-name">TERM</span><span class="org-keyword"> in</span>
                (dumb | minix | cons25)
                    <span class="org-comment-delimiter"># </span><span class="org-comment">not supported</span>
                    <span class="org-variable-name">e</span>=
                ;;

                (*)
                    <span class="org-variable-name">e</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{esc_c}</span></span><span class="org-string">[?7</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{2}</span></span><span class="org-string">"</span>
                ;;
            <span class="org-keyword">esac</span>
        ;;
    <span class="org-keyword">esac</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Print a sequence to the terminal.</span>
<span class="org-function-name">esc_p</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    esc <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">@</span></span><span class="org-string">"</span>
    <span class="org-builtin">printf</span> <span class="org-string">'%s'</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">e</span></span><span class="org-string">"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">This is just a simple wrapper around 'command -v' to avoid</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">spamming '&gt;/dev/null' throughout this function. This also guards</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">against aliases and functions.</span>
<span class="org-function-name">has</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">_cmd</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">command</span> -v <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null || <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">1</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> -x <span class="org-string">"$_cmd"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">1</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">log</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">The 'log()' function handles the printing of information.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">In 'pfetch' (and 'neofetch'!) the printing of the ascii art and info</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">happen independently of each other.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">The size of the ascii art is stored and the ascii is printed first.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Once the ascii is printed, the cursor is located right below the art</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">(See marker $[1]).</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Using the stored ascii size, the cursor is then moved to marker $[2].</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This is simply a cursor up escape sequence using the "height" of the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">ascii art.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">'log()' then moves the cursor to the right the "width" of the ascii art</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">with an additional amount of padding to add a gap between the art and</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">the information (See marker $[3]).</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">When 'log()' has executed, the cursor is then located at marker $[4].</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">When 'log()' is run a second time, the next line of information is</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">printed, moving the cursor to marker $[5].</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Markers $[4] and $[5] repeat all the way down through the ascii art</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">until there is no more information left to print.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Every time 'log()' is called the script keeps track of how many lines</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">were printed. When printing is complete the cursor is then manually</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">placed below the information and the art according to the "heights"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">of both.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">The math is simple: move cursor down $((ascii_height - info_height)).</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">If the aim is to move the cursor from marker $[5] to marker $[6],</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">plus the ascii height is 8 while the info height is 2 it'd be a move</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">of 6 lines downwards.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">However, if the information printed is "taller" (takes up more lines)</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">than the ascii art, the cursor isn't moved at all!</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Once the cursor is at marker $[6], the script exits. This is the gist</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">of how this "dynamic" printing and layout works.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This method allows ascii art to be stored without markers for info</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">and it allows for easy swapping of info order and amount.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">$[2] ___      $[3] goldie@KISS</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">$[4](.&#183; |     $[5] os KISS Linux</span>
    <span class="org-comment-delimiter">#     </span><span class="org-comment">(&lt;&gt; |</span>
    <span class="org-comment-delimiter">#    </span><span class="org-comment">/ __  \</span>
    <span class="org-comment-delimiter">#   </span><span class="org-comment">( /  \ /|</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">_/\ __)/_)</span>
    <span class="org-comment-delimiter">#  </span><span class="org-comment">\/-____\/</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">$[1]</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">$[6] /home/goldie $</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">End here if no data was found.</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-keyword">return</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Store the value of '$1' as we reset the argument list below.</span>
    <span class="org-variable-name">name</span>=$<span class="org-highlight-numbers-number">1</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Use 'set --' as a means of stripping all leading and trailing</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">white-space from the info string. This also normalizes all</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">white-space inside of the string.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Disable the shellcheck warning for word-splitting</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">as it's safe and intended ('set -f' disables globbing).</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2046,2086</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-builtin">set</span> -f
        <span class="org-builtin">set</span> +f -- $<span class="org-highlight-numbers-number">2</span>
        <span class="org-variable-name">info</span>=$<span class="org-variable-name">*</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Move the cursor to the right, the width of the ascii art with an</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">additional gap for text spacing.</span>
    esc_p CUF <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">ascii_width</span></span><span class="org-string">"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Print the info name and color the text.</span>
    esc_p SGR <span class="org-string">"3</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PF_COL1-4}</span></span><span class="org-string">"</span>;
    esc_p SGR <span class="org-highlight-numbers-number">1</span>
    <span class="org-builtin">printf</span> <span class="org-string">'%s'</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">name</span></span><span class="org-string">"</span>
    esc_p SGR <span class="org-highlight-numbers-number">0</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Print the info name and info data separator.</span>
    <span class="org-builtin">printf</span> %s <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">PF_SEP</span></span><span class="org-string">"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Move the cursor backward the length of the *current* info name and</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">then move it forwards the length of the *longest* info name. This</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">aligns each info data line.</span>
    esc_p CUB <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{#name}</span></span><span class="org-string">"</span>
    esc_p CUF <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PF_ALIGN:-$info_length}</span></span><span class="org-string">"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Print the info data, color it and strip all leading whitespace</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">from the string.</span>
    esc_p SGR <span class="org-string">"3</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PF_COL2-7}</span></span><span class="org-string">"</span>
    <span class="org-builtin">printf</span> <span class="org-string">'%s'</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">info</span></span><span class="org-string">"</span>
    esc_p SGR <span class="org-highlight-numbers-number">0</span>
    <span class="org-builtin">printf</span> <span class="org-string">'\n'</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Keep track of the number of times 'log()' has been run.</span>
    <span class="org-variable-name">info_height</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">info_height</span>:-0<span class="org-rainbow-delimiters-depth-4">}</span> + <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_title</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Username is retrieved by first checking '$USER' with a fallback</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">to the 'id -un' command.</span>
    <span class="org-variable-name">user</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">USER</span>:-$<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-sh-quoted-exec">id</span> -un<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Hostname is retrieved by first checking '$HOSTNAME' with a fallback</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">to the 'hostname' command.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Disable the warning about '$HOSTNAME' being undefined in POSIX sh as</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">the intention for using it is allowing the user to overwrite the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">value on invocation.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=SC2039</span>
    <span class="org-variable-name">host</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">HOSTNAME</span>:-$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">host</span>:-$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">hostname</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">If the hostname is still not found, fallback to the contents of the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">/etc/hostname file.</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">host</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-builtin">read</span> -r host &lt; /etc/hostname

    <span class="org-comment-delimiter"># </span><span class="org-comment">Add escape sequences for coloring to user and host name. As we embed</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">them directly in the arguments passed to log(), we cannot use esc_p().</span>
    esc SGR <span class="org-highlight-numbers-number">1</span>
    <span class="org-variable-name">user</span>=$<span class="org-variable-name">e</span>$<span class="org-variable-name">user</span>
    esc SGR <span class="org-string">"3</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PF_COL3:-1}</span></span><span class="org-string">"</span>
    <span class="org-variable-name">user</span>=$<span class="org-variable-name">e</span>$<span class="org-variable-name">user</span>
    esc SGR <span class="org-highlight-numbers-number">1</span>
    <span class="org-variable-name">user</span>=$<span class="org-variable-name">user</span>$<span class="org-variable-name">e</span>
    esc SGR <span class="org-highlight-numbers-number">1</span>
    <span class="org-variable-name">host</span>=$<span class="org-variable-name">e</span>$<span class="org-variable-name">host</span>
    esc SGR <span class="org-string">"3</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PF_COL3:-1}</span></span><span class="org-string">"</span>
    <span class="org-variable-name">host</span>=$<span class="org-variable-name">e</span>$<span class="org-variable-name">host</span>

    log <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{user}</span></span><span class="org-string">@</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{host}</span></span><span class="org-string">"</span> <span class="org-string">" "</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_os</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This function is called twice, once to detect the distribution name</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">for the purposes of picking an ascii art early and secondly to display</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">the distribution name in the info output (if enabled).</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">On first run, this function displays _nothing_, only on the second</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">invocation is 'log()' called.</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">distro</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-2">{</span>
        log os <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">distro</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
        <span class="org-keyword">return</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
        (Linux*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Some Linux distributions (which are based on others)</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">fail to identify as they **do not** change the upstream</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">distribution's identification packages or files.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">It is senseless to add a special case in the code for</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">each and every distribution (which _is_ technically no</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">different from what it is based on) as they're either too</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">lazy to modify upstream's identification files or they</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">don't have the know-how (or means) to ship their own</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">lsb-release package.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This causes users to think there's a bug in system detection</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">tools like neofetch or pfetch when they technically *do*</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">function correctly.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Exceptions are made for distributions which are independent,</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">not based on another distribution or follow different</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">standards.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This applies only to distributions which follow the standard</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">by shipping unmodified identification files and packages</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">from their respective upstreams.</span>
            <span class="org-keyword">if</span> has lsb_release; <span class="org-keyword">then</span>
                <span class="org-variable-name">distro</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">lsb_release</span> -sd<span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Android detection works by checking for the existence of</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">the follow two directories. I don't think there's a simpler</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">method than this.</span>
            <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-2">[</span> -d /system/app <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-2">[</span> -d /system/priv-app <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                <span class="org-variable-name">distro</span>=<span class="org-string">"Android </span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">getprop</span><span class="org-string"><span class="org-sh-quoted-exec"> ro.build.version.release)</span></span><span class="org-string">"</span>

            <span class="org-keyword">else</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">This used to be a simple '. /etc/os-release' but I believe</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">this is insecure as we blindly executed whatever was in the</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">file. This parser instead simply handles 'key=val', treating</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">the file contents as plain-text.</span>
                <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>=<span class="org-string">'='</span> read -r key val; <span class="org-keyword">do</span>
                    <span class="org-keyword">case</span> $<span class="org-variable-name">key</span><span class="org-keyword"> in</span>
                        (PRETTY_NAME)
                            <span class="org-variable-name">distro</span>=$<span class="org-variable-name">val</span>
                        ;;
                    <span class="org-keyword">esac</span>
                <span class="org-keyword">done</span> &lt; /etc/os-release
            <span class="org-keyword">fi</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">'os-release' and 'lsb_release' sometimes add quotes</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">around the distribution name, strip them.</span>
            <span class="org-variable-name">distro</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">distro</span>##<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">\"\'</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">}</span>
            <span class="org-variable-name">distro</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">distro</span>%%<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">\"\'</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">}</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Special cases for (independent) distributions which</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">don't follow any os-release/lsb standards whatsoever.</span>
            has crux &amp;&amp; <span class="org-variable-name">distro</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">crux</span><span class="org-rainbow-delimiters-depth-2">)</span>
            has guix &amp;&amp; <span class="org-variable-name">distro</span>=<span class="org-string">'Guix System'</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Check to see if we're running Bedrock Linux which is</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">very unique. This simply checks to see if the user's</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">PATH contains a Bedrock specific value.</span>
            <span class="org-keyword">case</span> $<span class="org-variable-name">PATH</span><span class="org-keyword"> in</span>
                (*/bedrock/cross/*)
                    <span class="org-variable-name">distro</span>=<span class="org-string">'Bedrock Linux'</span>
                ;;
            <span class="org-keyword">esac</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Check to see if Linux is running in Windows 10 under</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">WSL1 (Windows subsystem for Linux [version 1]) and</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">append a string accordingly.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">If the kernel version string ends in "-Microsoft",</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">we're very likely running under Windows 10 in WSL1.</span>
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">WSLENV</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                <span class="org-variable-name">distro</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{distro}</span></span><span class="org-string">${WSLENV+ on Windows 10 [WSL2]}"</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Check to see if Linux is running in Windows 10 under</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">WSL2 (Windows subsystem for Linux [version 2]) and</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">append a string accordingly.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This checks to see if '$WSLENV' is defined. This</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">appends the Windows 10 string even if '$WSLENV' is</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">empty. We only need to check that is has been _exported_.</span>
            <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-2">[</span> -z <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{kernel%%*-Microsoft}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                <span class="org-variable-name">distro</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">distro</span></span><span class="org-string"> on Windows 10 [WSL1]"</span>
            <span class="org-keyword">fi</span>
        ;;

        (Darwin*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Parse the SystemVersion.plist file to grab the macOS</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">version. The file is in the following format:</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">&lt;key&gt;ProductVersion&lt;/key&gt;</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">&lt;string&gt;10.14.6&lt;/string&gt;</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">'IFS' is set to '&lt;&gt;' to enable splitting between the</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">keys and a second 'read' is used to operate on the</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">next line directly after a match.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">'_' is used to nullify a field. '_ _ line _' basically</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">says "populate $line with the third field's contents".</span>
            <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>=<span class="org-string">'&lt;&gt;'</span> read -r _ _ line _; <span class="org-keyword">do</span>
                <span class="org-keyword">case</span> $<span class="org-variable-name">line</span><span class="org-keyword"> in</span>
                    <span class="org-comment-delimiter"># </span><span class="org-comment">Match 'ProductVersion' and read the next line</span>
                    <span class="org-comment-delimiter"># </span><span class="org-comment">directly as it contains the key's value.</span>
                    ProductVersion)
                        <span class="org-variable-name">IFS</span>=<span class="org-string">'&lt;&gt;'</span> read -r _ _ mac_version _
                        <span class="org-keyword">break</span>
                    ;;
                <span class="org-keyword">esac</span>
            <span class="org-keyword">done</span> &lt; /System/Library/CoreServices/SystemVersion.plist

            <span class="org-comment-delimiter"># </span><span class="org-comment">Use the ProductVersion to determine which macOS/OS X codename</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">the system has. As far as I'm aware there's no "dynamic" way</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">of grabbing this information.</span>
            <span class="org-keyword">case</span> $<span class="org-variable-name">mac_version</span><span class="org-keyword"> in</span>
                (10.4*)  <span class="org-variable-name">distro</span>=<span class="org-string">'Mac OS X Tiger'</span> ;;
                (10.5*)  <span class="org-variable-name">distro</span>=<span class="org-string">'Mac OS X Leopard'</span> ;;
                (10.6*)  <span class="org-variable-name">distro</span>=<span class="org-string">'Mac OS X Snow Leopard'</span> ;;
                (10.7*)  <span class="org-variable-name">distro</span>=<span class="org-string">'Mac OS X Lion'</span> ;;
                (10.8*)  <span class="org-variable-name">distro</span>=<span class="org-string">'OS X Mountain Lion'</span> ;;
                (10.9*)  <span class="org-variable-name">distro</span>=<span class="org-string">'OS X Mavericks'</span> ;;
                (10.10*) <span class="org-variable-name">distro</span>=<span class="org-string">'OS X Yosemite'</span> ;;
                (10.11*) <span class="org-variable-name">distro</span>=<span class="org-string">'OS X El Capitan'</span> ;;
                (10.12*) <span class="org-variable-name">distro</span>=<span class="org-string">'macOS Sierra'</span> ;;
                (10.13*) <span class="org-variable-name">distro</span>=<span class="org-string">'macOS High Sierra'</span> ;;
                (10.14*) <span class="org-variable-name">distro</span>=<span class="org-string">'macOS Mojave'</span> ;;
                (10.15*) <span class="org-variable-name">distro</span>=<span class="org-string">'macOS Catalina'</span> ;;
                (*)      <span class="org-variable-name">distro</span>=<span class="org-string">'macOS'</span> ;;
            <span class="org-keyword">esac</span>

            <span class="org-variable-name">distro</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">distro</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">mac_version</span></span><span class="org-string">"</span>
        ;;

        (Haiku)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Haiku uses 'uname -v' for version information</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">instead of 'uname -r' which only prints '1'.</span>
            <span class="org-variable-name">distro</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">uname</span> -sv<span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (Minix|DragonFly)
            <span class="org-variable-name">distro</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">os</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">kernel</span></span><span class="org-string">"</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Minix and DragonFly don't support the escape</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">sequences used, clear the exit trap.</span>
            <span class="org-keyword">trap</span> <span class="org-string">''</span> EXIT
        ;;

        (SunOS)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Grab the first line of the '/etc/release' file</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">discarding everything after '('.</span>
            <span class="org-variable-name">IFS</span>=<span class="org-string">'('</span> read -r distro _ &lt; /etc/release
        ;;

        (OpenBSD*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Show the OpenBSD version type (current if present).</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">kern.version=OpenBSD 6.6-current (GENERIC.MP) ...</span>
            <span class="org-variable-name">IFS</span>=<span class="org-string">' ='</span> read -r _ distro openbsd_ver _ &lt;&lt;-EOF
<span class="org-sh-heredoc">                $(</span><span class="org-sh-quoted-exec">sysctl</span><span class="org-sh-heredoc"> kern.version)</span>
<span class="org-sh-heredoc">            EOF</span>

            <span class="org-variable-name">distro</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">distro</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">openbsd_ver</span></span><span class="org-string">"</span>
        ;;

        FreeBSD)
            <span class="org-variable-name">distro</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">os</span></span><span class="org-string"> </span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">freebsd-version</span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        ;;

        (*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Catch all to ensure '$distro' is never blank.</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This also handles the BSDs.</span>
            <span class="org-variable-name">distro</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">os</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">kernel</span></span><span class="org-string">"</span>
        ;;
    <span class="org-keyword">esac</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_kernel</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Don't print kernel output on some systems as the</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">OS name includes it.</span>
        (*BSD*|Haiku|Minix)
            <span class="org-keyword">return</span>
        ;;
    <span class="org-keyword">esac</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">'$kernel' is the cached output of 'uname -r'.</span>
    log kernel <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">kernel</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_host</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
        (Linux*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Despite what these files are called, version doesn't</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">always contain the version nor does name always contain</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">the name.</span>
            <span class="org-builtin">read</span> -r name    &lt; /sys/devices/virtual/dmi/id/product_name
            <span class="org-builtin">read</span> -r version &lt; /sys/devices/virtual/dmi/id/product_version
            <span class="org-builtin">read</span> -r model   &lt; /sys/firmware/devicetree/base/model

            <span class="org-variable-name">host</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">name</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">version</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">model</span></span><span class="org-string">"</span>
        ;;

        (Darwin* | FreeBSD* | DragonFly*)
            <span class="org-variable-name">host</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.model<span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (NetBSD*)
            <span class="org-variable-name">host</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">sysctl</span> -n machdep.dmi.system-vendor <span class="org-sh-escaped-newline">\</span>
                             machdep.dmi.system-product<span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (OpenBSD*)
            <span class="org-variable-name">host</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.version<span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (*BSD* | Minix)
            <span class="org-variable-name">host</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.vendor hw.product<span class="org-rainbow-delimiters-depth-2">)</span>
        ;;
    <span class="org-keyword">esac</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Turn the host string into an argument list so we can iterate</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">over it and remove OEM strings and other information which</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shouldn't be displayed.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Disable the shellcheck warning for word-splitting</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">as it's safe and intended ('set -f' disables globbing).</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2046,2086</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-builtin">set</span> -f
        <span class="org-builtin">set</span> +f -- $<span class="org-variable-name">host</span>
        <span class="org-variable-name">host</span>=
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Iterate over the host string word by word as a means of stripping</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">unwanted and OEM information from the string as a whole.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This could have been implemented using a long 'sed' command with</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">a list of word replacements, however I want to show that something</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">like this is possible in pure sh.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This string reconstruction is needed as some OEMs either leave the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">identification information as "To be filled by OEM", "Default",</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">"undefined" etc and we shouldn't print this to the screen.</span>
    <span class="org-keyword">for</span> word do
        <span class="org-comment-delimiter"># </span><span class="org-comment">This works by reconstructing the string by excluding words</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">found in the "blacklist" below. Only non-matches are appended</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">to the final host string.</span>
        <span class="org-keyword">case</span> $<span class="org-variable-name">word</span><span class="org-keyword"> in</span>
           (To      | <span class="org-rainbow-delimiters-depth-2">[</span>Bb<span class="org-rainbow-delimiters-depth-2">]</span>e      | <span class="org-rainbow-delimiters-depth-2">[</span>Ff<span class="org-rainbow-delimiters-depth-2">]</span>illed | <span class="org-rainbow-delimiters-depth-2">[</span>Bb<span class="org-rainbow-delimiters-depth-2">]</span>y  | O.E.M.  | OEM  |<span class="org-sh-escaped-newline">\</span>
            Not     | Applicable | Specified | System | Product | Name |<span class="org-sh-escaped-newline">\</span>
            Version | Undefined  | Default   | string | INVALID | &#65533;    | os )
                <span class="org-keyword">continue</span>
            ;;
        <span class="org-keyword">esac</span>

        <span class="org-variable-name">host</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">host</span></span><span class="org-string">$word "</span>
    <span class="org-keyword">done</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">'$arch' is the cached output from 'uname -m'.</span>
    log host <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{host:-$arch}</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_uptime</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Uptime works by retrieving the data in total seconds and then</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">converting that data into days, hours and minutes using simple</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">math.</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
        (Linux* | Minix*)
            <span class="org-variable-name">IFS</span>=. read -r s _ &lt; /proc/uptime
        ;;

        Darwin* | *BSD* | DragonFly*)
            <span class="org-variable-name">s</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">sysctl</span> -n kern.boottime<span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Extract the uptime in seconds from the following output:</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">[...] { sec = 1271934886, usec = 667779 } Thu Apr 22 12:14:46 2010</span>
            <span class="org-variable-name">s</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">s</span>#*=<span class="org-rainbow-delimiters-depth-2">}</span>
            <span class="org-variable-name">s</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">s</span>%,*<span class="org-rainbow-delimiters-depth-2">}</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">The uptime format from 'sysctl' needs to be subtracted from</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">the current time in seconds.</span>
            <span class="org-variable-name">s</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">date</span> +%s<span class="org-rainbow-delimiters-depth-4">)</span> - s<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (Haiku)
            <span class="org-comment-delimiter"># </span><span class="org-comment">The boot time is returned in microseconds, convert it to</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">regular seconds.</span>
            <span class="org-variable-name">s</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">system_time</span><span class="org-rainbow-delimiters-depth-4">)</span> / <span class="org-highlight-numbers-number">1000000</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (SunOS)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Split the output of 'kstat' on '.' and any white-space</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">which exists in the command output.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The output is as follows:</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">unix:0:system_misc:snaptime   14809.906993005</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The parser extracts:          ^^^^^</span>
            <span class="org-variable-name">IFS</span>=<span class="org-string">'   .'</span> read -r _ s _ &lt;&lt;-EOF
<span class="org-sh-heredoc">                $(</span><span class="org-sh-quoted-exec">kstat</span><span class="org-sh-heredoc"> -p unix:0:system_misc:snaptime)</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (IRIX)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Grab the uptime in a pretty format. Usually,</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">00:00:00 from the 'ps' command.</span>
            <span class="org-variable-name">t</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">LC_ALL</span>=POSIX ps -o <span class="org-variable-name">etime</span>= -p <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Split the pretty output into days or hours</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">based on the uptime.</span>
            <span class="org-keyword">case</span> $<span class="org-variable-name">t</span><span class="org-keyword"> in</span>
                (*-*)   <span class="org-variable-name">d</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">t</span>%%-*<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-variable-name">t</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">t</span>#*-<span class="org-rainbow-delimiters-depth-2">}</span> ;;
                (*:*:*) <span class="org-variable-name">h</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">t</span>%%:*<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-variable-name">t</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">t</span>#*:<span class="org-rainbow-delimiters-depth-2">}</span> ;;
            <span class="org-keyword">esac</span>

            <span class="org-variable-name">h</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">h</span>#0<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-variable-name">t</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">t</span>#0<span class="org-rainbow-delimiters-depth-2">}</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Convert the split pretty fields back into</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">seconds so we may re-convert them to our format.</span>
            <span class="org-variable-name">s</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">d</span>:-0<span class="org-rainbow-delimiters-depth-4">}</span>*86400 + $<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">h</span>:-0<span class="org-rainbow-delimiters-depth-4">}</span>*3600 + $<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">t</span>%%:*<span class="org-rainbow-delimiters-depth-4">}</span>*60 + $<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">t</span>#*:<span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;
    <span class="org-keyword">esac</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Convert the uptime from seconds into days, hours and minutes.</span>
    <span class="org-variable-name">d</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>s / <span class="org-highlight-numbers-number">60</span> / <span class="org-highlight-numbers-number">60</span> / <span class="org-highlight-numbers-number">24</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-variable-name">h</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>s / <span class="org-highlight-numbers-number">60</span> / <span class="org-highlight-numbers-number">60</span> % <span class="org-highlight-numbers-number">24</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-variable-name">m</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>s / <span class="org-highlight-numbers-number">60</span> % <span class="org-highlight-numbers-number">60</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Only append days, hours and minutes if they're non-zero.</span>
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">d</span></span><span class="org-string">"</span><span class="org-keyword"> in</span> (<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-negation-char">!</span>0<span class="org-rainbow-delimiters-depth-2">]</span>*) <span class="org-variable-name">uptime</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{uptime}</span></span><span class="org-string">${d}d "</span>; <span class="org-keyword">esac</span>
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">h</span></span><span class="org-string">"</span><span class="org-keyword"> in</span> (<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-negation-char">!</span>0<span class="org-rainbow-delimiters-depth-2">]</span>*) <span class="org-variable-name">uptime</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{uptime}</span></span><span class="org-string">${h}h "</span>; <span class="org-keyword">esac</span>
    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">m</span></span><span class="org-string">"</span><span class="org-keyword"> in</span> (<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-negation-char">!</span>0<span class="org-rainbow-delimiters-depth-2">]</span>*) <span class="org-variable-name">uptime</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{uptime}</span></span><span class="org-string">${m}m "</span>; <span class="org-keyword">esac</span>

    log uptime <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{uptime:-0m}</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_pkgs</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This works by first checking for which package managers are</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">installed and finally by printing each package manager's</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">package list with each package one per line.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">The output from this is then piped to 'wc -l' to count each</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">line, giving us the total package count of whatever package</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">managers are installed.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Backticks are *required* here as '/bin/sh' on macOS is</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">'bash 3.2' and it can't handle the following:</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">var=$(</span>
    <span class="org-comment-delimiter">#    </span><span class="org-comment">code here</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">)</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2006</span>
    <span class="org-variable-name">packages</span>=<span class="org-sh-quoted-exec">`</span>
<span class="org-sh-quoted-exec">        case $os in</span>
<span class="org-sh-quoted-exec">            (Linux*)</span>
<span class="org-sh-quoted-exec">                # Commands which print packages one per line.</span>
<span class="org-sh-quoted-exec">                has bonsai     &amp;&amp; bonsai list</span>
<span class="org-sh-quoted-exec">                has crux       &amp;&amp; pkginfo -i</span>
<span class="org-sh-quoted-exec">                has pacman-key &amp;&amp; pacman -Qq</span>
<span class="org-sh-quoted-exec">                has dpkg       &amp;&amp; dpkg-query -f '.\n' -W</span>
<span class="org-sh-quoted-exec">                has rpm        &amp;&amp; rpm -qa</span>
<span class="org-sh-quoted-exec">                has xbps-query &amp;&amp; xbps-query -l</span>
<span class="org-sh-quoted-exec">                has apk        &amp;&amp; apk info</span>
<span class="org-sh-quoted-exec">                has guix       &amp;&amp; guix package --list-installed</span>
<span class="org-sh-quoted-exec">                has opkg       &amp;&amp; opkg list-installed</span>

<span class="org-sh-quoted-exec">                # Directories containing packages.</span>
<span class="org-sh-quoted-exec">                has kiss       &amp;&amp; printf '%s\n' /var/db/kiss/installed/*/</span>
<span class="org-sh-quoted-exec">                has cpt-list   &amp;&amp; printf '%s\n' /var/db/cpt/installed/*/</span>
<span class="org-sh-quoted-exec">                has brew       &amp;&amp; printf '%s\n' "$(brew --cellar)/"*</span>
<span class="org-sh-quoted-exec">                has emerge     &amp;&amp; printf '%s\n' /var/db/pkg/*/*/</span>
<span class="org-sh-quoted-exec">                has pkgtool    &amp;&amp; printf '%s\n' /var/log/packages/*</span>
<span class="org-sh-quoted-exec">                has eopkg      &amp;&amp; printf '%s\n' /var/lib/eopkg/package/*</span>

<span class="org-sh-quoted-exec">                # 'nix' requires two commands.</span>
<span class="org-sh-quoted-exec">                has nix-store  &amp;&amp; {</span>
<span class="org-sh-quoted-exec">                    nix-store -q --requisites /run/current-system/sw</span>
<span class="org-sh-quoted-exec">                    nix-store -q --requisites ~/.nix-profile</span>
<span class="org-sh-quoted-exec">                }</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (Darwin*)</span>
<span class="org-sh-quoted-exec">                # Commands which print packages one per line.</span>
<span class="org-sh-quoted-exec">                has pkgin      &amp;&amp; pkgin list</span>

<span class="org-sh-quoted-exec">                # Directories containing packages.</span>
<span class="org-sh-quoted-exec">                has brew       &amp;&amp; printf '%s\n' /usr/local/Cellar/*</span>

<span class="org-sh-quoted-exec">                # 'port' prints a single line of output to 'stdout'</span>
<span class="org-sh-quoted-exec">                # when no packages are installed and exits with</span>
<span class="org-sh-quoted-exec">                # success causing a false-positive of 1 package</span>
<span class="org-sh-quoted-exec">                # installed.</span>
<span class="org-sh-quoted-exec">                #</span>
<span class="org-sh-quoted-exec">                # 'port' should really exit with a non-zero code</span>
<span class="org-sh-quoted-exec">                # in this case to allow scripts to cleanly handle</span>
<span class="org-sh-quoted-exec">                # this behavior.</span>
<span class="org-sh-quoted-exec">                has port       &amp;&amp; {</span>
<span class="org-sh-quoted-exec">                    pkg_list=$(port installed)</span>

<span class="org-sh-quoted-exec">                    case "$pkg_list" in</span>
<span class="org-sh-quoted-exec">                        ("No ports are installed.")</span>
<span class="org-sh-quoted-exec">                            # do nothing</span>
<span class="org-sh-quoted-exec">                        ;;</span>

<span class="org-sh-quoted-exec">                        (*)</span>
<span class="org-sh-quoted-exec">                            printf '%s\n' "$pkg_list"</span>
<span class="org-sh-quoted-exec">                        ;;</span>
<span class="org-sh-quoted-exec">                    esac</span>
<span class="org-sh-quoted-exec">                }</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (FreeBSD*|DragonFly*)</span>
<span class="org-sh-quoted-exec">                pkg info</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (OpenBSD*)</span>
<span class="org-sh-quoted-exec">                printf '%s\n' /var/db/pkg/*/</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (NetBSD*)</span>
<span class="org-sh-quoted-exec">                pkg_info</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (Haiku)</span>
<span class="org-sh-quoted-exec">                printf '%s\n' /boot/system/package-links/*</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (Minix)</span>
<span class="org-sh-quoted-exec">                printf '%s\n' /usr/pkg/var/db/pkg/*/</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (SunOS)</span>
<span class="org-sh-quoted-exec">                has pkginfo &amp;&amp; pkginfo -i</span>
<span class="org-sh-quoted-exec">                has pkg     &amp;&amp; pkg list</span>
<span class="org-sh-quoted-exec">            ;;</span>

<span class="org-sh-quoted-exec">            (IRIX)</span>
<span class="org-sh-quoted-exec">                versions -b</span>
<span class="org-sh-quoted-exec">            ;;</span>
<span class="org-sh-quoted-exec">        esac | wc -l</span>
<span class="org-sh-quoted-exec">    `</span>

    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">IRIX's package manager adds 3 lines of extra</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">output which we must account for here.</span>
        (IRIX)
            <span class="org-variable-name">packages</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>packages - <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;
    <span class="org-keyword">esac</span>

    <span class="org-keyword">case</span> $<span class="org-variable-name">packages</span><span class="org-keyword"> in</span>
        (<span class="org-highlight-numbers-number">1</span>?*|<span class="org-rainbow-delimiters-depth-2">[</span>2-9<span class="org-rainbow-delimiters-depth-2">]</span>*)
            log pkgs <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">packages</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
        ;;
    <span class="org-keyword">esac</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_memory</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Used memory is calculated using the following "formula":</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">MemUsed = MemTotal + Shmem - MemFree - Buffers - Cached - SReclaimable</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Source: https://github.com/KittyKatt/screenFetch/issues/386</span>
        (Linux*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Parse the '/proc/meminfo' file splitting on ':' and 'k'.</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The format of the file is 'key:   000kB' and an additional</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">split is used on 'k' to filter out 'kB'.</span>
            <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>=<span class="org-string">':k '</span>  read -r key val _; <span class="org-keyword">do</span>
                <span class="org-keyword">case</span> $<span class="org-variable-name">key</span><span class="org-keyword"> in</span>
                    (MemTotal)
                        <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_used + val<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-variable-name">mem_full</span>=$<span class="org-variable-name">val</span>
                    ;;

                    (Shmem)
                        <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_used + val<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    ;;

                    (MemFree | Buffers | Cached | SReclaimable)
                        <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_used - val<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    ;;

                    <span class="org-comment-delimiter"># </span><span class="org-comment">If detected this will be used over the above calculation</span>
                    <span class="org-comment-delimiter"># </span><span class="org-comment">for mem_used. Available since Linux 3.14rc.</span>
                    <span class="org-comment-delimiter"># </span><span class="org-comment">See kernel commit 34e431b0ae398fc54ea69ff85ec700722c9da773</span>
                    (MemAvailable)
                        <span class="org-variable-name">mem_avail</span>=$<span class="org-variable-name">val</span>
                    ;;
                <span class="org-keyword">esac</span>
            <span class="org-keyword">done</span> &lt; /proc/meminfo

            <span class="org-keyword">case</span> $<span class="org-variable-name">mem_avail</span><span class="org-keyword"> in</span>
                (*<span class="org-rainbow-delimiters-depth-2">[</span>0-9<span class="org-rainbow-delimiters-depth-2">]</span>*)
                    <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>mem_full - mem_avail<span class="org-rainbow-delimiters-depth-4">)</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                ;;

                *)
                    <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_used / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                ;;
            <span class="org-keyword">esac</span>

            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_full / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        <span class="org-comment-delimiter"># </span><span class="org-comment">Used memory is calculated using the following "formula":</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">(wired + active + occupied) * 4 / 1024</span>
        (Darwin*)
            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.memsize<span class="org-rainbow-delimiters-depth-4">)</span> / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Parse the 'vmstat' file splitting on ':' and '.'.</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The format of the file is 'key:   000.' and an additional</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">split is used on '.' to filter it out.</span>
            <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>=:. read -r key val; <span class="org-keyword">do</span>
                <span class="org-keyword">case</span> $<span class="org-variable-name">key</span><span class="org-keyword"> in</span>
                    (*<span class="org-string">' wired'</span>*|*<span class="org-string">' active'</span>*|*<span class="org-string">' occupied'</span>*)
                        <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_used + $<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">val</span>:-0<span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                    ;;
                <span class="org-keyword">esac</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Using '&lt;&lt;-EOF' is the only way to loop over a command's</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">output without the use of a pipe ('|').</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This ensures that any variables defined in the while loop</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">are still accessible in the script.</span>
            <span class="org-keyword">done</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                $(</span><span class="org-sh-quoted-exec">vm_stat</span><span class="org-sh-heredoc">)</span>
<span class="org-sh-heredoc">            EOF</span>

            <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_used * <span class="org-highlight-numbers-number">4</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (OpenBSD*)
            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.physmem<span class="org-rainbow-delimiters-depth-4">)</span> / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">This is a really simpler parser for 'vmstat' which grabs</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">the used memory amount in a lazy way. 'vmstat' prints 3</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">lines of output with the needed value being stored in the</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">final line.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This loop simply grabs the 3rd element of each line until</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">the EOF is reached. Each line overwrites the value of the</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">previous one so we're left with what we wanted. This isn't</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">slow as only 3 lines are parsed.</span>
            <span class="org-keyword">while </span><span class="org-builtin">read</span> -r _ _ line _; <span class="org-keyword">do</span>
                <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">line</span>%%M<span class="org-rainbow-delimiters-depth-2">}</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Using '&lt;&lt;-EOF' is the only way to loop over a command's</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">output without the use of a pipe ('|').</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This ensures that any variables defined in the while loop</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">are still accessible in the script.</span>
            <span class="org-keyword">done</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                $(</span><span class="org-sh-quoted-exec">vmstat</span><span class="org-sh-heredoc">)</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        <span class="org-comment-delimiter"># </span><span class="org-comment">Used memory is calculated using the following "formula":</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">mem_full - ((inactive + free + cache) * page_size / 1024)</span>
        (FreeBSD*|DragonFly*)
            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.physmem<span class="org-rainbow-delimiters-depth-4">)</span> / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Use 'set --' to store the output of the command in the</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">argument list. POSIX sh has no arrays but this is close enough.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Disable the shellcheck warning for word-splitting</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">as it's safe and intended ('set -f' disables globbing).</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2046</span>
            <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-builtin">set</span> -f
                <span class="org-builtin">set</span> +f -- $<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.pagesize <span class="org-sh-escaped-newline">\</span>
                                      vm.stats.vm.v_inactive_count <span class="org-sh-escaped-newline">\</span>
                                      vm.stats.vm.v_free_count <span class="org-sh-escaped-newline">\</span>
                                      vm.stats.vm.v_cache_count<span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-2">}</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Calculate the amount of used memory.</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">$1: hw.pagesize</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">$2: vm.stats.vm.v_inactive_count</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">$3: vm.stats.vm.v_free_count</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">$4: vm.stats.vm.v_cache_count</span>
            <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_full - <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>$<span class="org-highlight-numbers-number">2</span> + $<span class="org-highlight-numbers-number">3</span> + $<span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-1">)</span> * $<span class="org-highlight-numbers-number">1</span> / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (NetBSD*)
            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">sysctl</span> -n hw.physmem64<span class="org-rainbow-delimiters-depth-4">)</span> / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">NetBSD implements a lot of the Linux '/proc' filesystem,</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">this uses the same parser as the Linux memory detection.</span>
            <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>=<span class="org-string">':k '</span> read -r key val _; <span class="org-keyword">do</span>
                <span class="org-keyword">case</span> $<span class="org-variable-name">key</span><span class="org-keyword"> in</span>
                    (MemFree)
                        <span class="org-variable-name">mem_free</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>val / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                        <span class="org-keyword">break</span>
                    ;;
                <span class="org-keyword">esac</span>
            <span class="org-keyword">done</span> &lt; /proc/meminfo

            <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_full - mem_free<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (Haiku)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Read the first line of 'sysinfo -mem' splitting on</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">'(', ' ', and ')'. The needed information is then</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">stored in the 5th and 7th elements. Using '_' "consumes"</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">an element allowing us to proceed to the next one.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The parsed format is as follows:</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">3501142016 bytes free      (used/max  792645632 / 4293787648)</span>
            <span class="org-variable-name">IFS</span>=<span class="org-string">'( )'</span> read -r _ _ _ _ mem_used _ mem_full &lt;&lt;-EOF
<span class="org-sh-heredoc">                $(</span><span class="org-sh-quoted-exec">sysinfo</span><span class="org-sh-heredoc"> -mem)</span>
<span class="org-sh-heredoc">            EOF</span>

            <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_used / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_full / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (Minix)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Minix includes the '/proc' filesystem though the format</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">differs from Linux. The '/proc/meminfo' file is only a</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">single line with space separated elements and elements</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">2 and 3 contain the total and free memory numbers.</span>
            <span class="org-builtin">read</span> -r _ mem_full mem_free _ &lt; /proc/meminfo

            <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>mem_full - mem_free<span class="org-rainbow-delimiters-depth-4">)</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span> mem_full / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (SunOS)
            <span class="org-variable-name">hw_pagesize</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">pagesize</span><span class="org-rainbow-delimiters-depth-2">)</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">'kstat' outputs memory in the following format:</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">unix:0:system_pages:pagestotal    1046397</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">unix:0:system_pages:pagesfree     885018</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This simply uses the first "element" (white-space</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">separated) as the key and the second element as the</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">value.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">A variable is then assigned based on the key.</span>
            <span class="org-keyword">while </span><span class="org-builtin">read</span> -r key val; <span class="org-keyword">do</span>
                <span class="org-keyword">case</span> $<span class="org-variable-name">key</span><span class="org-keyword"> in</span>
                    (*total)
                        <span class="org-variable-name">pages_full</span>=$<span class="org-variable-name">val</span>
                    ;;

                    (*free)
                        <span class="org-variable-name">pages_free</span>=$<span class="org-variable-name">val</span>
                    ;;
                <span class="org-keyword">esac</span>
            <span class="org-keyword">done</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                $(</span><span class="org-sh-quoted-exec">kstat</span><span class="org-sh-heredoc"> -p unix:0:system_pages:pagestotal \</span>
<span class="org-sh-heredoc">                           unix:0:system_pages:pagesfree)</span>
<span class="org-sh-heredoc">            EOF</span>

            <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>pages_full * hw_pagesize / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-variable-name">mem_free</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>pages_free * hw_pagesize / <span class="org-highlight-numbers-number">1024</span> / <span class="org-highlight-numbers-number">1024</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
            <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_full - mem_free<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;

        (IRIX)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Read the memory information from the 'top' command. Parse</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">and split each line until we reach the line starting with</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">"Memory".</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Example output: Memory: 160M max, 147M avail, .....</span>
            <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>=<span class="org-string">' :'</span> read -r label mem_full _ mem_free _; <span class="org-keyword">do</span>
                <span class="org-keyword">case</span> $<span class="org-variable-name">label</span><span class="org-keyword"> in</span>
                    (Memory)
                        <span class="org-variable-name">mem_full</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">mem_full</span>%M<span class="org-rainbow-delimiters-depth-2">}</span>
                        <span class="org-variable-name">mem_free</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">mem_free</span>%M<span class="org-rainbow-delimiters-depth-2">}</span>
                        <span class="org-keyword">break</span>
                    ;;
                <span class="org-keyword">esac</span>
            <span class="org-keyword">done</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                $(</span><span class="org-sh-quoted-exec">top</span><span class="org-sh-heredoc"> -n)</span>
<span class="org-sh-heredoc">            EOF</span>

            <span class="org-variable-name">mem_used</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>mem_full - mem_free<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;;
    <span class="org-keyword">esac</span>

    log memory <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{mem_used:-?}</span></span><span class="org-string">M / </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{mem_full:-?}</span></span><span class="org-string">M"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_wm</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">os</span><span class="org-keyword"> in</span>
        (Darwin*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">Don't display window manager on macOS.</span>
        ;;

        (*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">xprop can be used to grab the window manager's properties</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">which contains the window manager's name under '_NET_WM_NAME'.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The upside to using 'xprop' is that you don't need to hardcode</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">a list of known window manager names. The downside is that</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">not all window managers conform to setting the '_NET_WM_NAME'</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">atom..</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">List of window managers which fail to set the name atom:</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">catwm, fvwm, dwm, 2bwm, monster, wmaker and sowm [mine! ;)].</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The final downside to this approach is that it does _not_</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">support Wayland environments. The only solution which supports</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Wayland is the 'ps' parsing mentioned below.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">A more naive implementation is to parse the last line of</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">'~/.xinitrc' to extract the second white-space separated</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">element.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The issue with an approach like this is that this line data</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">does not always equate to the name of the window manager and</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">could in theory be _anything_.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This also fails when the user launches xorg through a display</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">manager or other means.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Another naive solution is to parse 'ps' with a hardcoded list</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">of window managers to detect the current window manager (based</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">on what is running).</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">The issue with this approach is the need to hardcode and</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">maintain a list of known window managers.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Another issue is that process names do not always equate to</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">the name of the window manager. False-positives can happen too.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">This is the only solution which supports Wayland based</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">environments sadly. It'd be nice if some kind of standard were</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">established to identify Wayland environments.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">pfetch's goal is to remain _simple_, if you'd like a "full"</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">implementation of window manager detection use 'neofetch'.</span>
            <span class="org-comment-delimiter">#</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Neofetch use a combination of 'xprop' and 'ps' parsing to</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">support all window managers (including non-conforming and</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Wayland) though it's a lot more complicated!</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Don't display window manager if X isn't running.</span>
            <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">DISPLAY</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-keyword">return</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">This is a two pass call to xprop. One call to get the window</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">manager's ID and another to print its properties.</span>
            has xprop &amp;&amp; <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">The output of the ID command is as follows:</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">_NET_SUPPORTING_WM_CHECK: window id # 0x400000</span>
                <span class="org-comment-delimiter">#</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">To extract the ID, everything before the last space</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">is removed.</span>
                <span class="org-variable-name">id</span>=$<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-sh-quoted-exec">xprop</span> -root -notype _NET_SUPPORTING_WM_CHECK<span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-variable-name">id</span>=$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">id</span>##* <span class="org-rainbow-delimiters-depth-3">}</span>

                <span class="org-comment-delimiter"># </span><span class="org-comment">The output of the property command is as follows:</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">_NAME 8t</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">_NET_WM_PID = 252</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">_NET_WM_NAME = "bspwm"</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">_NET_SUPPORTING_WM_CHECK: window id # 0x400000</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">WM_CLASS = "wm", "Bspwm"</span>
                <span class="org-comment-delimiter">#</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">To extract the name, everything before '_NET_WM_NAME = \"'</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">is removed and everything after the next '"' is removed.</span>
                <span class="org-variable-name">wm</span>=$<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-sh-quoted-exec">xprop</span> -id <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">id</span></span><span class="org-string">"</span> -notype -len <span class="org-highlight-numbers-number">25</span> -f _NET_WM_NAME 8t<span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-rainbow-delimiters-depth-2">}</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">Handle cases of a window manager _not_ populating the</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">'_NET_WM_NAME' atom. Display nothing in this case.</span>
            <span class="org-keyword">case</span> $<span class="org-variable-name">wm</span><span class="org-keyword"> in</span>
                (*<span class="org-string">'_NET_WM_NAME = '</span>*)
                    <span class="org-variable-name">wm</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">wm</span>##*_NET_WM_NAME = <span class="org-string">\"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                    <span class="org-variable-name">wm</span>=$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">wm</span>%%<span class="org-string">\"</span>*<span class="org-rainbow-delimiters-depth-2">}</span>
                ;;

                <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span>
                    <span class="org-comment-delimiter"># </span><span class="org-comment">Fallback to checking the process list</span>
                    <span class="org-comment-delimiter"># </span><span class="org-comment">for the select few window managers which</span>
                    <span class="org-comment-delimiter"># </span><span class="org-comment">don't set '_NET_WM_NAME'.</span>
                    <span class="org-keyword">while </span><span class="org-builtin">read</span> -r ps_line; <span class="org-keyword">do</span>
                        <span class="org-keyword">case</span> $<span class="org-variable-name">ps_line</span><span class="org-keyword"> in</span>
                            <span class="org-rainbow-delimiters-depth-2">(</span>*catwm*<span class="org-rainbow-delimiters-depth-2">)</span>     <span class="org-variable-name">wm</span>=catwm ;;
                            <span class="org-rainbow-delimiters-depth-2">(</span>*fvwm*<span class="org-rainbow-delimiters-depth-2">)</span>      <span class="org-variable-name">wm</span>=fvwm ;;
                            <span class="org-rainbow-delimiters-depth-2">(</span>*dwm*<span class="org-rainbow-delimiters-depth-2">)</span>       <span class="org-variable-name">wm</span>=dwm ;;
                            <span class="org-rainbow-delimiters-depth-2">(</span>*2bwm*<span class="org-rainbow-delimiters-depth-2">)</span>      <span class="org-variable-name">wm</span>=2bwm ;;
                            <span class="org-rainbow-delimiters-depth-2">(</span>*monsterwm*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-variable-name">wm</span>=monsterwm ;;
                            <span class="org-rainbow-delimiters-depth-2">(</span>*wmaker*<span class="org-rainbow-delimiters-depth-2">)</span>    <span class="org-variable-name">wm</span>=<span class="org-string">'Window Maker'</span> ;;
                            <span class="org-rainbow-delimiters-depth-2">(</span>*sowm*<span class="org-rainbow-delimiters-depth-2">)</span>      <span class="org-variable-name">wm</span>=sowm ;;
                        <span class="org-keyword">esac</span>
                    <span class="org-keyword">done</span> &lt;&lt;-EOF
                        $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">ps</span> x<span class="org-rainbow-delimiters-depth-2">)</span>
                    EOF
                ;;
            <span class="org-keyword">esac</span>
        ;;
    <span class="org-keyword">esac</span>

    log wm <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">wm</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-function-name">get_de</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This only supports Xorg related desktop environments though</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">this is fine as knowing the desktop environment on Windows,</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">macOS etc is useless (they'll always report the same value).</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Display the value of '$XDG_CURRENT_DESKTOP', if it's empty,</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">display the value of '$DESKTOP_SESSION'.</span>
    log de <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{XDG_CURRENT_DESKTOP:-$DESKTOP_SESSION}</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_shell</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Display the basename of the '$SHELL' environment variable.</span>
    log shell <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{SHELL##*/}</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_editor</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Display the value of '$VISUAL', if it's empty, display the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">value of '$EDITOR'.</span>
    log editor <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{VISUAL:-$EDITOR}</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_palette</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Print the first 8 terminal colors. This uses the existing</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">sequences to change text color with a sequence prepended</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">to reverse the foreground and background colors.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This allows us to save hardcoding a second set of sequences</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">for background colors.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">False positive.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2154</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        esc SGR <span class="org-highlight-numbers-number">7</span>
        <span class="org-variable-name">palette</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">e</span></span><span class="org-string">$c1 </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c1</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c2</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c2</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c3</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c3</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c4</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c4</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c5</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c5</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c6</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">c6</span></span><span class="org-string"> "</span>
        esc SGR <span class="org-highlight-numbers-number">0</span>
        <span class="org-variable-name">palette</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">palette</span></span><span class="org-string">$e"</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Print the palette with a new-line before and afterwards.</span>
    <span class="org-builtin">printf</span> <span class="org-string">'\n'</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
    log <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">palette</span></span>
<span class="org-string">        "</span> <span class="org-string">" "</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">get_ascii</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This is a simple function to read the contents of</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">an ascii file from 'stdin'. It allows for the use</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">of '&lt;&lt;-EOF' to prevent the break in indentation in</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">this source code.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This function also sets the text colors according</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">to the ascii color.</span>
    read_ascii<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">'PF_COL1': Set the info name color according to ascii color.</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">'PF_COL3': Set the title color to some other color. &#175;\_(&#12484;)_/&#175;</span>
        <span class="org-variable-name">PF_COL1</span>=$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">PF_COL1</span>:-$<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">1</span>:-7<span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-variable-name">PF_COL3</span>=$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">PF_COL3</span>:-$<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-1">(</span>$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">1</span>:-7<span class="org-rainbow-delimiters-depth-2">}</span>%8+1<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">POSIX sh has no 'var+=' so 'var=${var}append' is used. What's</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">interesting is that 'var+=' _is_ supported inside '$(())'</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">(arithmetic) though there's no support for 'var++/var--'.</span>
        <span class="org-comment-delimiter">#</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">There is also no $'\n' to add a "literal"(?) newline to the</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">string. The simplest workaround being to break the line inside</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">the string (though this has the caveat of breaking indentation).</span>
        <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>= read -r line; <span class="org-keyword">do</span>
            <span class="org-variable-name">ascii</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">ascii</span></span><span class="org-string">$line</span>
<span class="org-string">"</span>
        <span class="org-keyword">done</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">This checks for ascii art in the following order:</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">'$1':        Argument given to 'get_ascii()' directly.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">'$PF_ASCII': Environment variable set by user.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">'$distro':   The detected distribution name.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">'$os':       The name of the operating system/kernel.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment"><span class="org-bold"><span class="org-success">NOTE:</span></span></span><span class="org-comment"> Each ascii art below is indented using tabs, this</span>
    <span class="org-comment-delimiter">#       </span><span class="org-comment">allows indentation to continue naturally despite</span>
    <span class="org-comment-delimiter">#       </span><span class="org-comment">the use of '&lt;&lt;-EOF'.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">False positive.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2154</span>
    <span class="org-keyword">case</span> $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">1</span>:-$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">PF_ASCII</span>:-$<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">distro</span>:-$<span class="org-variable-name">os</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">in</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>Aa<span class="org-rainbow-delimiters-depth-3">]</span>lpine*<span class="org-rainbow-delimiters-depth-2">)</span>
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c4</span><span class="org-rainbow-delimiters-depth-2">}</span>   /<span class="org-string">\\</span> /<span class="org-string">\\</span>
                  /$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c7</span><span class="org-rainbow-delimiters-depth-2">}</span>/ $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c4</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-string">\\</span>  <span class="org-string">\\</span>
                 /$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c7</span><span class="org-rainbow-delimiters-depth-2">}</span>/   $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c4</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-string">\\</span>  <span class="org-string">\\</span>
                /$<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c7</span><span class="org-rainbow-delimiters-depth-2">}</span>//    $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c4</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-string">\\</span>  <span class="org-string">\\</span>
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c7</span><span class="org-rainbow-delimiters-depth-2">}</span>//      $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c4</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-string">\\</span>  <span class="org-string">\\</span>
                         $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c4</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-string">\\</span>
            EOF
        ;;

        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>Aa<span class="org-rainbow-delimiters-depth-3">]</span>ndroid*<span class="org-rainbow-delimiters-depth-2">)</span>
            read_ascii <span class="org-highlight-numbers-number">2</span> &lt;&lt;-EOF
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c2</span><span class="org-rainbow-delimiters-depth-2">}</span>  ;,           ,;
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c2</span><span class="org-rainbow-delimiters-depth-2">}</span>   <span class="org-string">';,.-----.,;'</span>
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c2</span><span class="org-rainbow-delimiters-depth-2">}</span>  ,<span class="org-string">'           '</span>,
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c2</span><span class="org-rainbow-delimiters-depth-2">}</span> /    O     O    <span class="org-string">\\</span>
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c2</span><span class="org-rainbow-delimiters-depth-2">}</span>|                 |
                $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">c2</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-string">'-----------------'</span>
            EOF
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Aa<span class="org-rainbow-delimiters-depth-2">]</span>rch*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c6}       /\\</span>
<span class="org-sh-heredoc">                ${c6}      /  \\</span>
<span class="org-sh-heredoc">                ${c6}     /\\   \\</span>
<span class="org-sh-heredoc">                ${c4}    /      \\</span>
<span class="org-sh-heredoc">                ${c4}   /   ,,   \\</span>
<span class="org-sh-heredoc">                ${c4}  /   |  |  -\\</span>
<span class="org-sh-heredoc">                ${c4} /_-''    ''-_\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Aa<span class="org-rainbow-delimiters-depth-2">]</span>rco*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c4}      /\\</span>
<span class="org-sh-heredoc">                ${c4}     /  \\</span>
<span class="org-sh-heredoc">                ${c4}    / /\\ \\</span>
<span class="org-sh-heredoc">                ${c4}   / /  \\ \\</span>
<span class="org-sh-heredoc">                ${c4}  / /    \\ \\</span>
<span class="org-sh-heredoc">                ${c4} / / _____\\ \\</span>
<span class="org-sh-heredoc">                ${c4}/_/  \`----.\\_\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Aa<span class="org-rainbow-delimiters-depth-2">]</span>rtix*)
            read_ascii <span class="org-highlight-numbers-number">6</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c4}      /\\</span>
<span class="org-sh-heredoc">                ${c4}     /  \\</span>
<span class="org-sh-heredoc">                ${c4}    /\`'.,\\</span>
<span class="org-sh-heredoc">                ${c4}   /     ',</span>
<span class="org-sh-heredoc">                ${c4}  /      ,\`\\</span>
<span class="org-sh-heredoc">                ${c4} /   ,.'\`.  \\</span>
<span class="org-sh-heredoc">                ${c4}/.,'\`     \`'.\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Bb<span class="org-rainbow-delimiters-depth-2">]</span>edrock*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7}__</span>
<span class="org-sh-heredoc">                ${c7}\\ \\___</span>
<span class="org-sh-heredoc">                ${c7} \\  _ \\</span>
<span class="org-sh-heredoc">                ${c7}  \\___/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Bb<span class="org-rainbow-delimiters-depth-2">]</span>uildroot*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c3}   ___</span>
<span class="org-sh-heredoc">                ${c3} / \`   \\</span>
<span class="org-sh-heredoc">                ${c3}|   :  :|</span>
<span class="org-sh-heredoc">                ${c3}-. _:__.-</span>
<span class="org-sh-heredoc">                ${c3}  \` ---- \`</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Cc<span class="org-rainbow-delimiters-depth-2">]</span>ent<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">5</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2} ____${c3}^${c5}____</span>
<span class="org-sh-heredoc">                ${c2} |\\  ${c3}|${c5}  /|</span>
<span class="org-sh-heredoc">                ${c2} | \\ ${c3}|${c5} / |</span>
<span class="org-sh-heredoc">                ${c5}&lt;---- ${c4}----&gt;</span>
<span class="org-sh-heredoc">                ${c4} | / ${c2}|${c3} \\ |</span>
<span class="org-sh-heredoc">                ${c4} |/__${c2}|${c3}__\\|</span>
<span class="org-sh-heredoc">                ${c2}     v</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>ahlia*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c1}      _</span>
<span class="org-sh-heredoc">                ${c1}  ___/ \\___</span>
<span class="org-sh-heredoc">                ${c1} |   _-_   |</span>
<span class="org-sh-heredoc">                ${c1} | /     \ |</span>
<span class="org-sh-heredoc">                ${c1}/ |       | \\</span>
<span class="org-sh-heredoc">                ${c1}\\ |       | /</span>
<span class="org-sh-heredoc">                ${c1} | \ _ _ / |</span>
<span class="org-sh-heredoc">                ${c1} |___ - ___|</span>
<span class="org-sh-heredoc">                ${c1}     \\_/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>ebian*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c1}  _____</span>
<span class="org-sh-heredoc">                ${c1} /  __ \\</span>
<span class="org-sh-heredoc">                ${c1}|  /    |</span>
<span class="org-sh-heredoc">                ${c1}|  \\___-</span>
<span class="org-sh-heredoc">                ${c1}-_</span>
<span class="org-sh-heredoc">                ${c1}  --_</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>ragon<span class="org-rainbow-delimiters-depth-2">[</span>Ff<span class="org-rainbow-delimiters-depth-2">]</span>ly*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                    ,${c1}_${c7},</span>
<span class="org-sh-heredoc">                 ('-_${c1}|${c7}_-')</span>
<span class="org-sh-heredoc">                  &gt;--${c1}|${c7}--&lt;</span>
<span class="org-sh-heredoc">                 (_-'${c1}|${c7}'-_)</span>
<span class="org-sh-heredoc">                     ${c1}|</span>
<span class="org-sh-heredoc">                     ${c1}|</span>
<span class="org-sh-heredoc">                     ${c1}|</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ee<span class="org-rainbow-delimiters-depth-2">]</span>lementary*)
            read_ascii &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7}  _______</span>
<span class="org-sh-heredoc">                ${c7} / ____  \\</span>
<span class="org-sh-heredoc">                ${c7}/  |  /  /\\</span>
<span class="org-sh-heredoc">                ${c7}|__\\ /  / |</span>
<span class="org-sh-heredoc">                ${c7}\\   /__/  /</span>
<span class="org-sh-heredoc">                 ${c7}\\_______/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ee<span class="org-rainbow-delimiters-depth-2">]</span>ndeavour*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                              ${c1}/${c4}\\</span>
<span class="org-sh-heredoc">                    ${c1}/${c4}/  \\${c6}\\</span>
<span class="org-sh-heredoc">                   ${c1}/${c4}/    \\ ${c6}\\</span>
<span class="org-sh-heredoc">                 ${c1}/ ${c4}/     _) ${c6})</span>
<span class="org-sh-heredoc">                ${c1}/_${c4}/___-- ${c6}__-</span>
<span class="org-sh-heredoc">                 ${c6}/____--</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ff<span class="org-rainbow-delimiters-depth-2">]</span>edora*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7}      _____</span>
<span class="org-sh-heredoc">                     /   __)${c4}\\${c7}</span>
<span class="org-sh-heredoc">                     |  /  ${c4}\\ \\${c7}</span>
<span class="org-sh-heredoc">                  ${c4}__${c7}_|  |_${c4}_/ /${c7}</span>
<span class="org-sh-heredoc">                 ${c4}/ ${c7}(_    _)${c4}_/${c7}</span>
<span class="org-sh-heredoc">                ${c4}/ /${c7}  |  |</span>
<span class="org-sh-heredoc">                ${c4}\\ \\${c7}__/  |</span>
<span class="org-sh-heredoc">                 ${c4}\\${c7}(_____/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ff<span class="org-rainbow-delimiters-depth-2">]</span>ree<span class="org-rainbow-delimiters-depth-2">[</span>Bb<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c1}/\\,-'''''-,/\\</span>
<span class="org-sh-heredoc">                ${c1}\\_)       (_/</span>
<span class="org-sh-heredoc">                ${c1}|           |</span>
<span class="org-sh-heredoc">                ${c1}|           |</span>
<span class="org-sh-heredoc">                 ${c1};         ;</span>
<span class="org-sh-heredoc">                  ${c1}'-_____-'</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Gg<span class="org-rainbow-delimiters-depth-2">]</span>entoo*)
            read_ascii <span class="org-highlight-numbers-number">5</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c5} _-----_</span>
<span class="org-sh-heredoc">                ${c5}(       \\</span>
<span class="org-sh-heredoc">                ${c5}\\    0   \\</span>
<span class="org-sh-heredoc">                ${c7} \\        )</span>
<span class="org-sh-heredoc">                ${c7} /      _/</span>
<span class="org-sh-heredoc">                ${c7}(     _-</span>
<span class="org-sh-heredoc">                ${c7}\\____-</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Gg<span class="org-rainbow-delimiters-depth-2">][</span>Nn<span class="org-rainbow-delimiters-depth-2">][</span>Uu<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2}    _-\`\`-,   ,-\`\`-_</span>
<span class="org-sh-heredoc">                ${c2}  .'  _-_|   |_-_  '.</span>
<span class="org-sh-heredoc">                ${c2}./    /_._   _._\\    \\.</span>
<span class="org-sh-heredoc">                ${c2}:    _/_._\`:'_._\\_    :</span>
<span class="org-sh-heredoc">                ${c2}\\:._/  ,\`   \\   \\ \\_.:/</span>
<span class="org-sh-heredoc">                ${c2}   ,-';'.@)  \\ @) \\</span>
<span class="org-sh-heredoc">                ${c2}   ,'/'  ..- .\\,-.|</span>
<span class="org-sh-heredoc">                ${c2}   /'/' \\(( \\\` ./ )</span>
<span class="org-sh-heredoc">                ${c2}    '/''  \\_,----'</span>
<span class="org-sh-heredoc">                ${c2}      '/''   ,;/''</span>
<span class="org-sh-heredoc">                ${c2}         \`\`;'</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Gg<span class="org-rainbow-delimiters-depth-2">]</span>uix<span class="org-rainbow-delimiters-depth-2">[</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>*|<span class="org-rainbow-delimiters-depth-2">[</span>Gg<span class="org-rainbow-delimiters-depth-2">]</span>uix*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c3}|.__          __.|</span>
<span class="org-sh-heredoc">                ${c3}|__ \\        / __|</span>
<span class="org-sh-heredoc">                   ${c3}\\ \\      / /</span>
<span class="org-sh-heredoc">                    ${c3}\\ \\    / /</span>
<span class="org-sh-heredoc">                     ${c3}\\ \\  / /</span>
<span class="org-sh-heredoc">                      ${c3}\\ \\/ /</span>
<span class="org-sh-heredoc">                       ${c3}\\__/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Hh<span class="org-rainbow-delimiters-depth-2">]</span>aiku*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c3}       ,^,</span>
<span class="org-sh-heredoc">                 ${c3}     /   \\</span>
<span class="org-sh-heredoc">                ${c3}*--_ ;     ; _--*</span>
<span class="org-sh-heredoc">                ${c3}\\   '"     "'   /</span>
<span class="org-sh-heredoc">                 ${c3}'.           .'</span>
<span class="org-sh-heredoc">                ${c3}.-'"         "'-.</span>
<span class="org-sh-heredoc">                 ${c3}'-.__.   .__.-'</span>
<span class="org-sh-heredoc">                       ${c3}|_|</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Hh<span class="org-rainbow-delimiters-depth-2">]</span>yperbola*)
            read_ascii &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7}    |\`__.\`/</span>
<span class="org-sh-heredoc">                   ${c7} \____/</span>
<span class="org-sh-heredoc">                   ${c7} .--.</span>
<span class="org-sh-heredoc">                  ${c7} /    \\</span>
<span class="org-sh-heredoc">                 ${c7} /  ___ \\</span>
<span class="org-sh-heredoc">                 ${c7}/ .\`   \`.\\</span>
<span class="org-sh-heredoc">                ${c7}/.\`      \`.\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ii<span class="org-rainbow-delimiters-depth-2">]</span>nstant<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c0} ,-''-,</span>
<span class="org-sh-heredoc">                ${c0}: .''. :</span>
<span class="org-sh-heredoc">                ${c0}: ',,' :</span>
<span class="org-sh-heredoc">                ${c0} '-____:__</span>
<span class="org-sh-heredoc">                ${c0}       :  \`.</span>
<span class="org-sh-heredoc">                ${c0}       \`._.'</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ii<span class="org-rainbow-delimiters-depth-2">][</span>Rr<span class="org-rainbow-delimiters-depth-2">][</span>Ii<span class="org-rainbow-delimiters-depth-2">][</span>Xx<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c1} __</span>
<span class="org-sh-heredoc">                ${c1} \\ \\   __</span>
<span class="org-sh-heredoc">                ${c1}  \\ \\ / /</span>
<span class="org-sh-heredoc">                ${c1}   \\ v /</span>
<span class="org-sh-heredoc">                ${c1}   / . \\</span>
<span class="org-sh-heredoc">                ${c1}  /_/ \\ \\</span>
<span class="org-sh-heredoc">                ${c1}       \\_\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Kk<span class="org-rainbow-delimiters-depth-2">][</span>Dd<span class="org-rainbow-delimiters-depth-2">][</span>Ee<span class="org-rainbow-delimiters-depth-2">]</span>*<span class="org-rainbow-delimiters-depth-2">[</span>Nn<span class="org-rainbow-delimiters-depth-2">]</span>eon*)
            read_ascii <span class="org-highlight-numbers-number">6</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7}   .${c6}__${c7}.${c6}__${c7}.</span>
<span class="org-sh-heredoc">                ${c6}  /  _${c7}.${c6}_  \\</span>
<span class="org-sh-heredoc">                ${c6} /  /   \\  \\</span>
<span class="org-sh-heredoc">                ${c7} . ${c6}|  ${c7}O${c6}  | ${c7}.</span>
<span class="org-sh-heredoc">                ${c6} \\  \\_${c7}.${c6}_/  /</span>
<span class="org-sh-heredoc">                ${c6}  \\${c7}.${c6}__${c7}.${c6}__${c7}.${c6}/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ll<span class="org-rainbow-delimiters-depth-2">]</span>inux*<span class="org-rainbow-delimiters-depth-2">[</span>Ll<span class="org-rainbow-delimiters-depth-2">]</span>ite*|<span class="org-rainbow-delimiters-depth-2">[</span>Ll<span class="org-rainbow-delimiters-depth-2">]</span>ite*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c3}   /\\</span>
<span class="org-sh-heredoc">                ${c3}  /  \\</span>
<span class="org-sh-heredoc">                ${c3} / ${c7}/ ${c3}/</span>
<span class="org-sh-heredoc">            ${c3}&gt; ${c7}/ ${c3}/</span>
<span class="org-sh-heredoc">                ${c3}\\ ${c7}\\ ${c3}\\</span>
<span class="org-sh-heredoc">                 ${c3}\\_${c7}\\${c3}_\\</span>
<span class="org-sh-heredoc">                ${c7}    \\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ll<span class="org-rainbow-delimiters-depth-2">]</span>inux*<span class="org-rainbow-delimiters-depth-2">[</span>Mm<span class="org-rainbow-delimiters-depth-2">]</span>int*|<span class="org-rainbow-delimiters-depth-2">[</span>Mm<span class="org-rainbow-delimiters-depth-2">]</span>int)
            read_ascii <span class="org-highlight-numbers-number">2</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2} ___________</span>
<span class="org-sh-heredoc">                ${c2}|_          \\</span>
<span class="org-sh-heredoc">                  ${c2}| ${c7}| _____ ${c2}|</span>
<span class="org-sh-heredoc">                  ${c2}| ${c7}| | | | ${c2}|</span>
<span class="org-sh-heredoc">                  ${c2}| ${c7}| | | | ${c2}|</span>
<span class="org-sh-heredoc">                  ${c2}| ${c7}\\__${c7}___/ ${c2}|</span>
<span class="org-sh-heredoc">                  ${c2}\\_________/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;


        (<span class="org-rainbow-delimiters-depth-2">[</span>Ll<span class="org-rainbow-delimiters-depth-2">]</span>inux*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c4}    ___</span>
<span class="org-sh-heredoc">                   ${c4}(${c7}.. ${c4}|</span>
<span class="org-sh-heredoc">                   ${c4}(${c5}&lt;&gt; ${c4}|</span>
<span class="org-sh-heredoc">                  ${c4}/ ${c7}__  ${c4}\\</span>
<span class="org-sh-heredoc">                 ${c4}( ${c7}/  \\ ${c4}/|</span>
<span class="org-sh-heredoc">                ${c5}_${c4}/\\ ${c7}__)${c4}/${c5}_${c4})</span>
<span class="org-sh-heredoc">                ${c5}\/${c4}-____${c5}\/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Mm<span class="org-rainbow-delimiters-depth-2">]</span>ac<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>*|<span class="org-rainbow-delimiters-depth-2">[</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>arwin*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c1}       .:'</span>
<span class="org-sh-heredoc">                ${c1}    _ :'_</span>
<span class="org-sh-heredoc">                ${c2} .'\`_\`-'_\`\`.</span>
<span class="org-sh-heredoc">                ${c2}:________.-'</span>
<span class="org-sh-heredoc">                ${c3}:_______:</span>
<span class="org-sh-heredoc">                ${c4} :_______\`-;</span>
<span class="org-sh-heredoc">                ${c5}  \`._.-._.'</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Mm<span class="org-rainbow-delimiters-depth-2">]</span>ageia*)
            read_ascii <span class="org-highlight-numbers-number">2</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c6}   *</span>
<span class="org-sh-heredoc">                ${c6}    *</span>
<span class="org-sh-heredoc">                ${c6}   **</span>
<span class="org-sh-heredoc">                ${c7} /\\__/\\</span>
<span class="org-sh-heredoc">                ${c7}/      \\</span>
<span class="org-sh-heredoc">                ${c7}\\      /</span>
<span class="org-sh-heredoc">                ${c7} \\____/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Mm<span class="org-rainbow-delimiters-depth-2">]</span>anjaro*)
            read_ascii <span class="org-highlight-numbers-number">2</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2}||||||||| ||||</span>
<span class="org-sh-heredoc">                ${c2}||||||||| ||||</span>
<span class="org-sh-heredoc">                ${c2}||||      ||||</span>
<span class="org-sh-heredoc">                ${c2}|||| |||| ||||</span>
<span class="org-sh-heredoc">                ${c2}|||| |||| ||||</span>
<span class="org-sh-heredoc">                ${c2}|||| |||| ||||</span>
<span class="org-sh-heredoc">                ${c2}|||| |||| ||||</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Mm<span class="org-rainbow-delimiters-depth-2">]</span>inix*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c4} ,,        ,,</span>
<span class="org-sh-heredoc">                ${c4};${c7},${c4} ',    ,' ${c7},${c4};</span>
<span class="org-sh-heredoc">                ${c4}; ${c7}',${c4} ',,' ${c7},'${c4} ;</span>
<span class="org-sh-heredoc">                ${c4};   ${c7}',${c4}  ${c7},'${c4}   ;</span>
<span class="org-sh-heredoc">                ${c4};  ${c7};, '' ,;${c4}  ;</span>
<span class="org-sh-heredoc">                ${c4};  ${c7};${c4};${c7}',,'${c4};${c7};${c4}  ;</span>
<span class="org-sh-heredoc">                ${c4}', ${c7};${c4};;  ;;${c7};${c4} ,'</span>
<span class="org-sh-heredoc">                 ${c4} '${c7};${c4}'    '${c7};${c4}'</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Mm<span class="org-rainbow-delimiters-depth-2">][</span>Xx<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7}    \\\\  /</span>
<span class="org-sh-heredoc">                 ${c7}    \\\\/</span>
<span class="org-sh-heredoc">                 ${c7}     \\\\</span>
<span class="org-sh-heredoc">                 ${c7}  /\\/ \\\\</span>
<span class="org-sh-heredoc">                ${c7}  /  \\  /\\</span>
<span class="org-sh-heredoc">                ${c7} /    \\/  \\</span>
<span class="org-sh-heredoc">            ${c7}/__________\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Nn<span class="org-rainbow-delimiters-depth-2">]</span>et<span class="org-rainbow-delimiters-depth-2">[</span>Bb<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7}\\\\${c3}\`-______,----__</span>
<span class="org-sh-heredoc">                ${c7} \\\\        ${c3}__,---\`_</span>
<span class="org-sh-heredoc">                ${c7}  \\\\       ${c3}\`.____</span>
<span class="org-sh-heredoc">                ${c7}   \\\\${c3}-______,----\`-</span>
<span class="org-sh-heredoc">                ${c7}    \\\\</span>
<span class="org-sh-heredoc">                ${c7}     \\\\</span>
<span class="org-sh-heredoc">                ${c7}      \\\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Nn<span class="org-rainbow-delimiters-depth-2">]</span>ix<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c4}  \\\\  \\\\ //</span>
<span class="org-sh-heredoc">                ${c4} ==\\\\__\\\\/ //</span>
<span class="org-sh-heredoc">                ${c4}   //   \\\\//</span>
<span class="org-sh-heredoc">                ${c4}==//     //==</span>
<span class="org-sh-heredoc">                ${c4} //\\\\___//</span>
<span class="org-sh-heredoc">                ${c4}// /\\\\  \\\\==</span>
<span class="org-sh-heredoc">                ${c4}  // \\\\  \\\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">]</span>pen<span class="org-rainbow-delimiters-depth-2">[</span>Bb<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Dd<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c3}      _____</span>
<span class="org-sh-heredoc">                ${c3}    \\-     -/</span>
<span class="org-sh-heredoc">                ${c3} \\_/         \\</span>
<span class="org-sh-heredoc">                ${c3} |        ${c7}O O${c3} |</span>
<span class="org-sh-heredoc">                ${c3} |_  &lt;   )  3 )</span>
<span class="org-sh-heredoc">                ${c3} / \\         /</span>
<span class="org-sh-heredoc">                 ${c3}   /-_____-\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">]</span>pen<span class="org-rainbow-delimiters-depth-2">[</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Uu<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Ee<span class="org-rainbow-delimiters-depth-2">]</span>*<span class="org-rainbow-delimiters-depth-2">[</span>Tt<span class="org-rainbow-delimiters-depth-2">]</span>umbleweed*)
            read_ascii <span class="org-highlight-numbers-number">2</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2}  _____   ______</span>
<span class="org-sh-heredoc">                ${c2} / ____\\ / ____ \\</span>
<span class="org-sh-heredoc">                ${c2}/ /    \`/ /    \\ \\</span>
<span class="org-sh-heredoc">                ${c2}\\ \\____/ /,____/ /</span>
<span class="org-sh-heredoc">                ${c2} \\______/ \\_____/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">]</span>pen<span class="org-rainbow-delimiters-depth-2">[</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Uu<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">][</span>Ee<span class="org-rainbow-delimiters-depth-2">]</span>*|<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">]</span>pen*SUSE*|SUSE*|suse*)
            read_ascii <span class="org-highlight-numbers-number">2</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2}  _______</span>
<span class="org-sh-heredoc">                ${c2}__|   __ \\</span>
<span class="org-sh-heredoc">                ${c2}     / .\\ \\</span>
<span class="org-sh-heredoc">                ${c2}     \\__/ |</span>
<span class="org-sh-heredoc">                ${c2}   _______|</span>
<span class="org-sh-heredoc">                ${c2}   \\_______</span>
<span class="org-sh-heredoc">                ${c2}__________/</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">]</span>pen<span class="org-rainbow-delimiters-depth-2">[</span>Ww<span class="org-rainbow-delimiters-depth-2">]</span>rt*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c1} _______</span>
<span class="org-sh-heredoc">                ${c1}|       |.-----.-----.-----.</span>
<span class="org-sh-heredoc">                ${c1}|   -   ||  _  |  -__|     |</span>
<span class="org-sh-heredoc">                ${c1}|_______||   __|_____|__|__|</span>
<span class="org-sh-heredoc">                ${c1} ________|__|    __</span>
<span class="org-sh-heredoc">                ${c1}|  |  |  |.----.|  |_</span>
<span class="org-sh-heredoc">                ${c1}|  |  |  ||   _||   _|</span>
<span class="org-sh-heredoc">                ${c1}|________||__|  |____|</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Pp<span class="org-rainbow-delimiters-depth-2">]</span>arabola*)
            read_ascii <span class="org-highlight-numbers-number">5</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c5}  __ __ __  _</span>
<span class="org-sh-heredoc">                ${c5}.\`_//_//_/ / \`.</span>
<span class="org-sh-heredoc">                ${c5}          /  .\`</span>
<span class="org-sh-heredoc">                ${c5}         / .\`</span>
<span class="org-sh-heredoc">                ${c5}        /.\`</span>
<span class="org-sh-heredoc">                ${c5}       /\`</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Pp<span class="org-rainbow-delimiters-depth-2">]</span>op!_<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii <span class="org-highlight-numbers-number">6</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c6}______</span>
<span class="org-sh-heredoc">                ${c6}\\   _ \\        __</span>
<span class="org-sh-heredoc">                 ${c6}\\ \\ \\ \\      / /</span>
<span class="org-sh-heredoc">                  ${c6}\\ \\_\\ \\    / /</span>
<span class="org-sh-heredoc">                   ${c6}\\  ___\\  /_/</span>
<span class="org-sh-heredoc">                   ${c6} \\ \\    _</span>
<span class="org-sh-heredoc">                  ${c6} __\\_\\__(_)_</span>
<span class="org-sh-heredoc">                  ${c6}(___________)</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Pp<span class="org-rainbow-delimiters-depth-2">]</span>ure<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>*)
            read_ascii &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c7} _____________</span>
<span class="org-sh-heredoc">                ${c7}|  _________  |</span>
<span class="org-sh-heredoc">                ${c7}| |         | |</span>
<span class="org-sh-heredoc">                ${c7}| |         | |</span>
<span class="org-sh-heredoc">                ${c7}| |_________| |</span>
<span class="org-sh-heredoc">                ${c7}|_____________|</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Rr<span class="org-rainbow-delimiters-depth-2">]</span>aspbian*)
            read_ascii <span class="org-highlight-numbers-number">1</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2}  __  __</span>
<span class="org-sh-heredoc">                ${c2} (_\\)(/_)</span>
<span class="org-sh-heredoc">                ${c1} (_(__)_)</span>
<span class="org-sh-heredoc">                ${c1}(_(_)(_)_)</span>
<span class="org-sh-heredoc">                ${c1} (_(__)_)</span>
<span class="org-sh-heredoc">                ${c1}   (__)</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>lackware*)
            read_ascii <span class="org-highlight-numbers-number">4</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c4}   ________</span>
<span class="org-sh-heredoc">                ${c4}  /  ______|</span>
<span class="org-sh-heredoc">                ${c4}  | |______</span>
<span class="org-sh-heredoc">                ${c4}  \\______  \\</span>
<span class="org-sh-heredoc">                ${c4}   ______| |</span>
<span class="org-sh-heredoc">                ${c4}| |________/</span>
<span class="org-sh-heredoc">                ${c4}|____________</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>un<span class="org-rainbow-delimiters-depth-2">[</span>Oo<span class="org-rainbow-delimiters-depth-2">][</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>|<span class="org-rainbow-delimiters-depth-2">[</span>Ss<span class="org-rainbow-delimiters-depth-2">]</span>olaris*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c3}       .   .;   .</span>
<span class="org-sh-heredoc">                ${c3}   .   :;  ::  ;:   .</span>
<span class="org-sh-heredoc">                ${c3}   .;. ..      .. .;.</span>
<span class="org-sh-heredoc">                ${c3}..  ..             ..  ..</span>
<span class="org-sh-heredoc">                ${c3} .;,                 ,;.</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Uu<span class="org-rainbow-delimiters-depth-2">]</span>buntu*)
            read_ascii <span class="org-highlight-numbers-number">3</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c3}         _</span>
<span class="org-sh-heredoc">                ${c3}     ---(_)</span>
<span class="org-sh-heredoc">                ${c3} _/  ---  \\</span>
<span class="org-sh-heredoc">                ${c3}(_) |   |</span>
<span class="org-sh-heredoc">                 ${c3} \\  --- _/</span>
<span class="org-sh-heredoc">                    ${c3} ---(_)</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (<span class="org-rainbow-delimiters-depth-2">[</span>Vv<span class="org-rainbow-delimiters-depth-2">]</span>oid*)
            read_ascii <span class="org-highlight-numbers-number">2</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">                ${c2}    _______</span>
<span class="org-sh-heredoc">                ${c2} _ \\______ -</span>
<span class="org-sh-heredoc">                ${c2}| \\  ___  \\ |</span>
<span class="org-sh-heredoc">                ${c2}| | /   \ | |</span>
<span class="org-sh-heredoc">                ${c2}| | \___/ | |</span>
<span class="org-sh-heredoc">                ${c2}| \\______ \\_|</span>
<span class="org-sh-heredoc">                ${c2} -_______\\</span>
<span class="org-sh-heredoc">            EOF</span>
        ;;

        (*)
            <span class="org-comment-delimiter"># </span><span class="org-comment">On no match of a distribution ascii art, this function calls</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">itself again, this time to look for a more generic OS related</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">ascii art (KISS Linux -&gt; Linux).</span>
            <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-rainbow-delimiters-depth-2">{</span>
                get_ascii <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">os</span></span><span class="org-string">"</span>
                <span class="org-keyword">return</span>
            <span class="org-rainbow-delimiters-depth-2">}</span>

            <span class="org-builtin">printf</span> <span class="org-string">'error: %s is not currently supported.\n'</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">os</span></span><span class="org-string">"</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
            <span class="org-builtin">printf</span> <span class="org-string">'error: Open an issue for support to be added.\n'</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
            <span class="org-keyword">exit</span> <span class="org-highlight-numbers-number">1</span>
        ;;
    <span class="org-keyword">esac</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Store the "width" (longest line) and "height" (number of lines)</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">of the ascii art for positioning. This script prints to the screen</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">*almost* like a TUI does. It uses escape sequences to allow dynamic</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">printing of the information through user configuration.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Iterate over each line of the ascii art to retrieve the above</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">information. The 'sed' is used to strip '\033[3Xm' color codes from</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">the ascii art so they don't affect the width variable.</span>
    <span class="org-keyword">while </span><span class="org-builtin">read</span> -r line; <span class="org-keyword">do</span>
        <span class="org-variable-name">ascii_height</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-variable-name">ascii_height</span>:-0<span class="org-rainbow-delimiters-depth-4">}</span> + <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">This was a ternary operation but they aren't supported in</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Minix's shell.</span>
        <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{#line}</span></span><span class="org-string">"</span> -gt <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{ascii_width:-0}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp;
            <span class="org-variable-name">ascii_width</span>=$<span class="org-rainbow-delimiters-depth-2">{</span>#<span class="org-variable-name">line</span><span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Using '&lt;&lt;-EOF' is the only way to loop over a command's</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">output without the use of a pipe ('|').</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This ensures that any variables defined in the while loop</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">are still accessible in the script.</span>
    <span class="org-keyword">done</span> &lt;&lt;-EOF
<span class="org-sh-heredoc">        $(</span><span class="org-sh-quoted-exec">printf</span><span class="org-sh-heredoc"> %s "$ascii" | sed 's/\[3.m//g')</span>
<span class="org-sh-heredoc">    EOF</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Add a gap between the ascii art and the information.</span>
    <span class="org-variable-name">ascii_width</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ascii_width + <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Print the ascii art and position the cursor back where we</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">started prior to printing it.</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        esc_p SGR <span class="org-highlight-numbers-number">1</span>
        <span class="org-builtin">printf</span> <span class="org-string">'%s'</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">ascii</span></span><span class="org-string">"</span>
        esc_p SGR <span class="org-highlight-numbers-number">0</span>
        esc_p CUU <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">ascii_height</span></span><span class="org-string">"</span>
    <span class="org-rainbow-delimiters-depth-2">}</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = --version <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-builtin">printf</span> <span class="org-string">'pfetch 0.7.0\n'</span>
        <span class="org-keyword">exit</span> <span class="org-highlight-numbers-number">0</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Hide 'stderr' unless the first argument is '-v'. This saves</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">polluting the script with '2&gt;/dev/null'.</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = -v <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">exec</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Hide 'stdout' and selectively print to it using '&gt;&amp;6'.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This gives full control over what it displayed on the screen.</span>
    <span class="org-keyword">exec</span> <span class="org-highlight-numbers-number">6</span>&gt;&amp;<span class="org-highlight-numbers-number">1</span> &gt;/dev/null

    <span class="org-comment-delimiter"># </span><span class="org-comment">Store raw escape sequence character for later reuse.</span>
    <span class="org-variable-name">esc_c</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">printf</span> <span class="org-string">'\033'</span><span class="org-rainbow-delimiters-depth-2">)</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Allow the user to execute their own script and modify or</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">extend pfetch's behavior.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck source=/dev/null</span>
    <span class="org-builtin">.</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PF_SOURCE:-/dev/null}</span></span><span class="org-string">"</span> ||:

    <span class="org-comment-delimiter"># </span><span class="org-comment">Ensure that the 'TMPDIR' is writable as heredocs use it and</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">fail without the write permission. This was found to be the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">case on Android where the temporary directory requires root.</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> -w <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{TMPDIR:-/tmp}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-builtin">export</span> <span class="org-variable-name">TMPDIR</span>=~

    <span class="org-comment-delimiter"># </span><span class="org-comment">Generic color list.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Disable warning about unused variables.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2034</span>
    <span class="org-keyword">for</span> _c<span class="org-keyword"> in</span> c1 c2 c3 c4 c5 c6 c7 c8; <span class="org-keyword">do</span>
        esc SGR <span class="org-string">"3</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{_c#?}</span></span><span class="org-string">"</span> <span class="org-highlight-numbers-number">0</span>
        <span class="org-builtin">export</span> <span class="org-string">"$_c=</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">e</span></span><span class="org-string">"</span>
    <span class="org-keyword">done</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Disable line wrapping and catch the EXIT signal to enable it again</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">on exit. Ideally you'd somehow query the current value and retain</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">it but I'm yet to see this irk anyone.</span>
    esc_p DECAWM l &gt;&amp;<span class="org-highlight-numbers-number">6</span>
    <span class="org-keyword">trap</span> <span class="org-string">'esc_p DECAWM h &gt;&amp;6'</span> EXIT

    <span class="org-comment-delimiter"># </span><span class="org-comment">Store the output of 'uname' to avoid calling it multiple times</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">throughout the script. 'read &lt;&lt;EOF' is the simplest way of reading</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">a command into a list of variables.</span>
    <span class="org-builtin">read</span> -r os kernel arch &lt;&lt;-EOF
        $<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">uname</span> -srm<span class="org-rainbow-delimiters-depth-2">)</span>
    EOF

    <span class="org-comment-delimiter"># </span><span class="org-comment">Always run 'get_os' for the purposes of detecting which ascii</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">art to display.</span>
    get_os

    <span class="org-comment-delimiter"># </span><span class="org-comment">Allow the user to specify the order and inclusion of information</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">functions through the 'PF_INFO' environment variable.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">shellcheck disable=2086</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Disable globbing and set the positional parameters to the</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">contents of 'PF_INFO'.</span>
        <span class="org-builtin">set</span> -f
        <span class="org-builtin">set</span> +f -- $<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">PF_INFO</span>-ascii title os host kernel uptime pkgs memory<span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">Iterate over the info functions to determine the lengths of the</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">"info names" for output alignment. The option names and subtitles</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">match 1:1 so this is thankfully simple.</span>
        <span class="org-keyword">for</span> info do
            <span class="org-builtin">command</span> -v <span class="org-string">"get_</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">info</span></span><span class="org-string">"</span> &gt;/dev/null || <span class="org-keyword">continue</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">This was a ternary operation but they aren't supported in</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">Minix's shell.</span>
            <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{#info}</span></span><span class="org-string">"</span> -gt <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{info_length:-0}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span> &amp;&amp;
                <span class="org-variable-name">info_length</span>=$<span class="org-rainbow-delimiters-depth-3">{</span>#<span class="org-variable-name">info</span><span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">done</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">Add an additional space of length to act as a gap.</span>
        <span class="org-variable-name">info_length</span>=$<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>info_length + <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">Iterate over the above list and run any existing "get_" functions.</span>
        <span class="org-keyword">for</span> info do
            <span class="org-string">"get_</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">info</span></span><span class="org-string">"</span>
        <span class="org-keyword">done</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Position the cursor below both the ascii art and information lines</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">according to the height of both. If the information exceeds the ascii</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">art in height, don't </span><span class="org-type"><span class="org-comment">touch</span></span><span class="org-comment"> the cursor (0/unset), else move it down</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">N lines.</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">This was a ternary operation but they aren't supported in Minix's shell.</span>
    <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{info_height:-0}</span></span><span class="org-string">"</span> -lt <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{ascii_height:-0}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp;
        <span class="org-variable-name">cursor_pos</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ascii_height - info_height<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Print '$cursor_pos' amount of newlines to correctly position the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">cursor. This used to be a 'printf $(</span><span class="org-sh-quoted-exec">seq</span><span class="org-comment"> X X)' however 'seq' is only</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">typically available (by default) on GNU based systems!</span>
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{i:=0}</span></span><span class="org-string">"</span> -le <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{cursor_pos:-0}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">do</span>
        <span class="org-builtin">printf</span> <span class="org-string">'\n'</span>
        <span class="org-variable-name">i</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>i + <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">done</span> &gt;&amp;<span class="org-highlight-numbers-number">6</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

main <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">@</span></span><span class="org-string">"</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org099a95b" class="outline-2">
<h2 id="org099a95b"><span class="section-number-2">29.</span> rd<a aria-hidden="true" href="#org099a95b">#</a> </h2>
<div class="outline-text-2" id="text-29">
<details id='org7916538' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org7916538'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">RD: Read a character from the tty</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 9/12/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">rd</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">IFS</span>=
    <span class="org-builtin">read</span> -rsn1 mode <span class="org-comment-delimiter"># </span><span class="org-comment">get 1 character</span>
    <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">mode</span> == $<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">printf</span> <span class="org-string">"\u1b"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-builtin">read</span> -rsn4 -t <span class="org-highlight-numbers-number">0.001</span> mode2
    <span class="org-variable-name">char</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">echo</span> -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">mode</span></span><span class="org-string">$mode2"</span> | sed <span class="org-string">'s/\[A//;s/\[B//;s/\[C//;s/\[D//;'</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> -n </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">char</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> | hexdump -c | tr -d '\n' | tr -d ' ')</span></span><span class="org-string">"</span> == <span class="org-string">'00000000000001'</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-variable-name">str</span>=<span class="org-string">'space'</span>
    <span class="org-keyword">else</span>
        <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">char</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
            <span class="org-rainbow-delimiters-depth-2">[</span>a-zA-Z0-9,._+:@%/-<span class="org-string">\#\$\^\&amp;\*\(\)\=\{\}\|\\\;\'\"\&lt;\&gt;\~\`\[\]</span><span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-mismatched">)</span> <span class="org-variable-name">str</span>=$<span class="org-variable-name">char</span>;;
            <span class="org-string">'!'</span><span class="org-rainbow-delimiters-unmatched">)</span> <span class="org-variable-name">str</span>=<span class="org-string">'!'</span>;;
            <span class="org-string">'?'</span><span class="org-rainbow-delimiters-unmatched">)</span> <span class="org-variable-name">str</span>=<span class="org-string">'?'</span>;;
            *<span class="org-rainbow-delimiters-unmatched">)</span>
                <span class="org-variable-name">seq</span>=$<span class="org-rainbow-delimiters-unmatched">(</span><span class="org-sh-quoted-exec">echo</span> -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">mode</span></span><span class="org-string">$mode2"</span> | hexdump -c | sed <span class="org-string">'s/^0+ \(.*\) \\n/\1/;s/ //g;s/^0*//;1q'</span><span class="org-rainbow-delimiters-unmatched">)</span>
                <span class="org-keyword">case</span> $<span class="org-variable-name">seq</span><span class="org-keyword"> in</span>
                    <span class="org-string">'33'</span>) <span class="org-variable-name">str</span>=<span class="org-string">'esc'</span> ;;
                    <span class="org-string">'33[A'</span>) <span class="org-variable-name">str</span>=<span class="org-string">'up'</span> ;;
                    <span class="org-string">'33[B'</span>) <span class="org-variable-name">str</span>=<span class="org-string">'down'</span> ;;
                    <span class="org-string">'33[C'</span>) <span class="org-variable-name">str</span>=<span class="org-string">'right'</span> ;;
                    <span class="org-string">'33[D'</span>) <span class="org-variable-name">str</span>=<span class="org-string">'left'</span> ;;
                    *)
                        <span class="org-variable-name">s</span>=$<span class="org-rainbow-delimiters-unmatched">(</span><span class="org-sh-quoted-exec">echo</span> $<span class="org-variable-name">seq</span> | sed <span class="org-string">'s/\[A//;s/\[B//;s/\[C//;s/\[D//;'</span><span class="org-rainbow-delimiters-unmatched">)</span>
                        <span class="org-keyword">case</span> $<span class="org-variable-name">s</span><span class="org-keyword"> in</span>
                            <span class="org-string">''</span>) <span class="org-variable-name">str</span>=<span class="org-string">'enter'</span> ;;
                            <span class="org-string">'1'</span>) <span class="org-variable-name">str</span>=<span class="org-string">'^A'</span> ;;
                            <span class="org-string">'177'</span>) <span class="org-variable-name">str</span>=<span class="org-string">'backspace'</span> ;;
                            *) <span class="org-variable-name">str</span>=$<span class="org-variable-name">seq</span> ;;
                        <span class="org-keyword">esac</span>
                        ;;
                <span class="org-keyword">esac</span>
                ;;
        <span class="org-keyword">esac</span>
    <span class="org-keyword">fi</span>
    <span class="org-rainbow-delimiters-unmatched">[[</span> -z $<span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-unmatched">]]</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">"</span> || <span class="org-builtin">eval</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">=\"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">\""</span>
<span class="org-rainbow-delimiters-unmatched">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgcd0a02b" class="outline-2">
<h2 id="orgcd0a02b"><span class="section-number-2">30.</span> rdln<a aria-hidden="true" href="#orgcd0a02b">#</a> </h2>
<div class="outline-text-2" id="text-30">
<details id='org7f8c833' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org7f8c833'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">RDLN: Read a line from the tty</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 9/12/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>

<span class="org-function-name">rdln</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">str</span>=<span class="org-string">""</span>;
    <span class="org-keyword">while</span> true; <span class="org-keyword">do</span>
        <span class="org-type">echo</span> -n <span class="org-string">"&gt; </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">"</span>
        <span class="org-variable-name">char</span>=<span class="org-sh-quoted-exec">`rd`</span>
        <span class="org-type">echo</span> -en <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> el1)</span></span><span class="org-string">\r"</span>
        <span class="org-keyword">case</span> $<span class="org-variable-name">char</span><span class="org-keyword"> in</span>
            <span class="org-string">"enter"</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> -z $<span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">"</span> || <span class="org-builtin">eval</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">=\"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">str</span></span><span class="org-string">\""</span>; <span class="org-keyword">return</span>;;
            <span class="org-string">"backspace"</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-sh-quoted-exec">echo</span> $<span class="org-variable-name">str</span> | wc -m<span class="org-rainbow-delimiters-depth-4">)</span> -gt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">str</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{str::-1}</span></span><span class="org-string">"</span>;;
            *) <span class="org-variable-name">str</span>+=$<span class="org-variable-name">char</span>;;
        <span class="org-keyword">esac</span>
    <span class="org-keyword">done</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orged9f371" class="outline-2">
<h2 id="orged9f371"><span class="section-number-2">31.</span> README.md<a aria-hidden="true" href="#orged9f371">#</a> </h2>
<div class="outline-text-2" id="text-31">
<details id='orgd0a76fa' class='code' open><summary><span class="lang">md</span></summary>
<div class='gutter'>
<a href='#orgd0a76fa'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-md"><span class="org-markdown-header-delimiter"># </span><span class="org-markdown-header-face-1">n0s1.core</span>

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">Several suckless shell scripts and other core features.</span>

<span class="org-markdown-header-delimiter">## </span><span class="org-markdown-header-face-2">Shell</span>

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">FZY: Command Line Fuzzy Finder</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">fzy</span><span class="org-markdown-markup">)</span>)

I found myself using fzf a lot and building it into my scripts.
But on a number of occasions I was working on machines which didn't have it installed.
This covers many of my use cases (Like fuzzy menus) in &lt; 20 lines of shell script.

<span class="org-markdown-header-delimiter">#### </span><span class="org-markdown-header-face-4">FZY</span><span class="org-markdown-header-face-4"><span class="org-markdown-markup">_</span></span><span class="org-markdown-italic"><span class="org-markdown-header-face-4">Lite: 10 SLOC Command Line Fuzzy Finder</span></span><span class="org-markdown-italic"><span class="org-markdown-header-delimiter"> </span></span>
<span class="org-markdown-italic">(</span><span class="org-markdown-italic"><span class="org-markdown-markup">[</span></span><span class="org-markdown-italic"><span class="org-markdown-link">link</span></span><span class="org-markdown-italic"><span class="org-markdown-markup">](</span></span><span class="org-markdown-italic"><span class="org-markdown-url">fzy</span></span><span class="org-markdown-url"><span class="org-markdown-markup">_</span></span><span class="org-markdown-url">lite</span><span class="org-markdown-markup">)</span>)
I have also included FZY_Lite which is basically the same logic but squished into 10 SLOC
(And smaller comment) for embedding inside scripts.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">TOML: Simple get/set commands to read and write toml files</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">toml</span><span class="org-markdown-markup">)</span>)
POSIX Compliant shell script for reading from + writing to TOML files.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">BISH</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">bish</span><span class="org-markdown-markup">)</span>)
Floating shell used for loading scripts and managing the system configuration.
Built to allow easy customization supporting bioinformatics workloads,
but generally just a good tool for extending your shell.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">BM: Bookmarks</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">bm</span><span class="org-markdown-markup">)</span>)
Bookmarks for everything.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">CHECK</span><span class="org-markdown-header-face-3"><span class="org-markdown-markup">_</span></span><span class="org-markdown-italic"><span class="org-markdown-header-face-3">ROOT: Throws an error if the current user is not root</span></span><span class="org-markdown-italic"><span class="org-markdown-header-delimiter"> </span></span>
<span class="org-markdown-italic">(</span><span class="org-markdown-italic"><span class="org-markdown-markup">[</span></span><span class="org-markdown-italic"><span class="org-markdown-link">link</span></span><span class="org-markdown-italic"><span class="org-markdown-markup">](</span></span><span class="org-markdown-italic"><span class="org-markdown-url">check</span></span><span class="org-markdown-url"><span class="org-markdown-markup">_</span></span><span class="org-markdown-url">root</span><span class="org-markdown-markup">)</span>)
Checks if the current user is root.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">DISCORD_WEBHOOKS: Tool for managing and messaging using discord webhooks</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">discordwebhooks</span><span class="org-markdown-markup">)</span>)
Manage webhooks to post as multiple users, for multiple channels in your servers.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">HIST: Shell history made easy</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">hist</span><span class="org-markdown-markup">)</span>)
Tool for working with shell history.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">USELESS: less but less code. Seriously, just use less.</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">useless</span><span class="org-markdown-markup">)</span>)
Less but written in 20 lines of shell script.
Not designed to be used as is, more a foundation for other CLI tools

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">HACKLESS: The hackable less</span><span class="org-markdown-header-delimiter"> </span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">hackless</span><span class="org-markdown-markup">)</span>)
More extensible version of useless.

<span class="org-markdown-header-delimiter">### </span><span class="org-markdown-header-face-3">SETUP</span>
(<span class="org-markdown-markup">[</span><span class="org-markdown-link">link</span><span class="org-markdown-markup">](</span><span class="org-markdown-url">setup</span><span class="org-markdown-markup">)</span>)
Script to set up parts of NanOS
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgb85bec5" class="outline-2">
<h2 id="orgb85bec5"><span class="section-number-2">32.</span> readtoml<a aria-hidden="true" href="#orgb85bec5">#</a> </h2>
<div class="outline-text-2" id="text-32">
<details id='org99277f6' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org99277f6'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">READ_TOML: One line script to read from a toml file</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 11/1/2021</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> support multiline values</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> support dotted notation (dotted headers/parent already work)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> apologize to my future self or anyone who has to maintin this</span>

sed -n <span class="org-string">"s/#.*//g;</span><span class="org-string"><span class="org-sh-quoted-exec">$([[ </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> =~ \. ]] &amp;&amp; </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> "/^\s*\[`sed 's/\..*//' &lt;&lt;&lt; </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">`\]/" || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> 0)</span></span><span class="org-string">,/\^\s*[.*\]/!d;s/^\s*\"*</span><span class="org-string"><span class="org-sh-quoted-exec">`sed 's/.*\.//' &lt;&lt;&lt; </span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">`</span></span><span class="org-string">\"*\s*=\s*//p"</span> &lt;&lt;&lt; $<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">cat</span> $<span class="org-highlight-numbers-number">2</span> || <span class="org-type">cat</span> /dev/stdin<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">Super Minimal version which doesn't strip comments before processing and can't handle malformed whitespace</span>
<span class="org-comment-delimiter">#</span><span class="org-type"><span class="org-comment">cat</span></span><span class="org-comment"> $2 | sed -n "$([[ $1 =~ \. ]] &amp;&amp; </span><span class="org-type"><span class="org-comment">echo</span></span><span class="org-comment"> "/^\[`sed 's/\..*//' &lt;&lt;&lt; $1`\]/" || </span><span class="org-type"><span class="org-comment">echo</span></span><span class="org-comment"> 0),/\^[.*\]/!d;s/^\s*\"*`sed 's/.*\.//' &lt;&lt;&lt; $1`\"*\s=\s//p"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">Explainer</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">parent="$(</span><span class="org-sh-quoted-exec">sed</span><span class="org-comment"> 's/\..*//' &lt;&lt;&lt; "$1")"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">key="$(</span><span class="org-sh-quoted-exec">sed</span><span class="org-comment"> 's/.*\.\//' &lt;&lt;&lt; "$1")"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">begin="$([[ $1 =~ \. ]] &amp;&amp; </span><span class="org-type"><span class="org-comment">echo</span></span><span class="org-comment"> "/^\s*\[$parent\]/" || </span><span class="org-type"><span class="org-comment">echo</span></span><span class="org-comment"> 0)"</span>
<span class="org-comment-delimiter">##</span><span class="org-comment">Remove comments from file; Filter to section; Return value</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">sed -n "s/#.*//g;$begin,/^\s*\[.*\]/!d;s/^\s*\"*$key\"*\s*=\s*//p" &lt;&lt;&lt; $(</span><span class="org-sh-quoted-exec">cat</span><span class="org-comment"> $2 || </span><span class="org-type"><span class="org-comment">cat</span></span><span class="org-comment"> /dev/stdin)</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgf6c07ff" class="outline-2">
<h2 id="orgf6c07ff"><span class="section-number-2">33.</span> setup<a aria-hidden="true" href="#orgf6c07ff">#</a> </h2>
<div class="outline-text-2" id="text-33">
<details id='org7e6893d' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org7e6893d'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Script to init arch/ubuntu/windows_10 systems to nanOS</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ Colours</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Add colour vars</span>
<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> -t <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-builtin">command</span> -v tput &gt; /dev/null; <span class="org-keyword">then</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">see if it supports colors</span>
    <span class="org-variable-name">ncolors</span>=$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-sh-quoted-exec">tput</span> colors<span class="org-rainbow-delimiters-depth-1">)</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">ncolors</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-1">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-1">[</span> $<span class="org-variable-name">ncolors</span> -ge <span class="org-highlight-numbers-number">8</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
        <span class="org-variable-name">bold</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> bold       || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">blink</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> blink     || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">reset</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> sgr0      || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">black</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 0   || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">red</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 1     || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">green</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 2   || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">yellow</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 3  || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">blue</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 4    || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">magenta</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 5 || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">cyan</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 6    || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
        <span class="org-variable-name">white</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> setaf 7   || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">echo</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">)</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>
<span class="org-keyword">fi</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ trypacmaninstall()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ tryaurinstall()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ tryaptinstall()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ wait_any_key()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ ask()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ asklink()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ askrecursivelinkdir()</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ asklinksudo()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ askclone()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ setup_ssh()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ detect_os()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">Detect OS</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ arch_pkg_setup()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ ubuntu_pkg_setup()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ vim_setup()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ tmux_setup()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ setup_symlinks()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ setup_repos()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">{{{ setup_git()</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">}}}</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">BEGIN</span>
detect_os
<span class="org-type">cd</span> $<span class="org-variable-name">HOME</span>
<span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"--configure"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    setup_symlinks
    <span class="org-keyword">exit</span>
<span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-1">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"--repos"</span> <span class="org-rainbow-delimiters-depth-1">]</span>; <span class="org-keyword">then</span>
    clone_repos
    <span class="org-keyword">exit</span>
<span class="org-keyword">fi</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Setup ssh</span>
<span class="org-type">echo</span> $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">blue</span><span class="org-rainbow-delimiters-depth-1">}</span>SSH Keys$<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">reset</span><span class="org-rainbow-delimiters-depth-1">}</span>
ask <span class="org-string">"Setup ssh"</span> &amp;&amp; setup_ssh
<span class="org-type">echo</span> $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">blue</span><span class="org-rainbow-delimiters-depth-1">}</span>Git repos$<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">reset</span><span class="org-rainbow-delimiters-depth-1">}</span>
ask <span class="org-string">"Clone repos"</span> &amp;&amp; setup_repos
<span class="org-type">echo</span> $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">blue</span><span class="org-rainbow-delimiters-depth-1">}</span>System Packages$<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">reset</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Update system</span>
<span class="org-keyword">if</span> ask <span class="org-string">"Upgrade packages"</span>; <span class="org-keyword">then</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">NANOS_DISTRO</span><span class="org-keyword"> in</span>
        Arch) <span class="org-type">sudo</span> pacman -Syu &amp;&amp; yay -Syu ;;
        Ubuntu) <span class="org-type">sudo</span> apt update &amp;&amp; <span class="org-type">sudo</span> apt upgrade ;;
        Windows) <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> Windows"</span> ;;
    <span class="org-keyword">esac</span>
<span class="org-keyword">fi</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Install packages</span>
<span class="org-keyword">if</span> ask <span class="org-string">"Install packages"</span>; <span class="org-keyword">then</span>
    <span class="org-keyword">case</span> $<span class="org-variable-name">NANOS_DISTRO</span><span class="org-keyword"> in</span>
        Arch) arch_pkg_setup ;;
        Ubuntu) ubuntu_pkg_setup ;;
        Windows) <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-string"> Windows"</span> ;;
    <span class="org-keyword">esac</span>
<span class="org-keyword">fi</span>
<span class="org-type">echo</span> $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">blue</span><span class="org-rainbow-delimiters-depth-1">}</span>Link files$<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">reset</span><span class="org-rainbow-delimiters-depth-1">}</span>
setup_symlinks
<span class="org-type">echo</span> $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">blue</span><span class="org-rainbow-delimiters-depth-1">}</span>Vim plugins$<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">reset</span><span class="org-rainbow-delimiters-depth-1">}</span>
vim_setup
<span class="org-type">echo</span> $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">blue</span><span class="org-rainbow-delimiters-depth-1">}</span>Tmux plugins$<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">reset</span><span class="org-rainbow-delimiters-depth-1">}</span>
tmux_setup
<span class="org-comment-delimiter">#</span><span class="org-type"><span class="org-comment">echo</span></span><span class="org-comment"> ${blue}Git settings${reset}</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">setup_git</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">doom emacs</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org7894974" class="outline-2">
<h2 id="org7894974"><span class="section-number-2">34.</span> setup<sub>git</sub><a aria-hidden="true" href="#org7894974">#</a> </h2>
<div class="outline-text-2" id="text-34">
<details id='org06f94a9' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org06f94a9'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">setup_git: setup </span><span class="org-type"><span class="org-comment">git</span></span><span class="org-comment"> settings</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 20:28:25 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">setup_git</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">##</span><span class="org-comment">Git settings</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">git</span><span class="org-string"><span class="org-sh-quoted-exec"> config --get pull.rebase)</span></span><span class="org-string">"</span> = false <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp;
       <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">git</span><span class="org-string"><span class="org-sh-quoted-exec"> config --get user.email)</span></span><span class="org-string">"</span> = <span class="org-string">"scorch267@gmail.com"</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp;
       <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">git</span><span class="org-string"><span class="org-sh-quoted-exec"> config --get user.name)</span></span><span class="org-string">"</span> = <span class="org-string">"nan0scho1ar"</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp;
       <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">git</span><span class="org-string"><span class="org-sh-quoted-exec"> config --get core.editor)</span></span><span class="org-string">"</span> = <span class="org-string">"vim"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">Git</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> configured correctly"</span>
    <span class="org-keyword">elif</span> ask <span class="org-string">"Update </span><span class="org-type"><span class="org-string">git</span></span><span class="org-string"> settings"</span>; <span class="org-keyword">then</span>
        <span class="org-type">git</span> config --global pull.rebase false
        <span class="org-type">git</span> config --global user.email <span class="org-string">"scorch267@gmail.com"</span>
        <span class="org-type">git</span> config --global user.name <span class="org-string">"nan0scho1ar"</span>
        <span class="org-type">git</span> config --global core.editor <span class="org-string">"vim"</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org81a4760" class="outline-2">
<h2 id="org81a4760"><span class="section-number-2">35.</span> setup<sub>repos</sub><a aria-hidden="true" href="#org81a4760">#</a> </h2>
<div class="outline-text-2" id="text-35">
<details id='org69c8449' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org69c8449'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">setup_repos: sets up repos for a system</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 20:23:47 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">setup_repos</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">mkdir</span> -p <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">"</span>
    <span class="org-type">cd</span> $<span class="org-variable-name">NANOS_REPOS_DIR</span>
    askclone <span class="org-string">"dotfiles"</span> <span class="org-string">"</span><span class="org-type"><span class="org-string">git</span></span><span class="org-string">@bitbucket.org:Nan0Scho1ar/dotfiles.git"</span>
    askclone <span class="org-string">"scripts"</span> <span class="org-string">"</span><span class="org-type"><span class="org-string">git</span></span><span class="org-string">@bitbucket.org:Nan0Scho1ar/scripts.git"</span>
    askclone <span class="org-string">"vimwiki"</span> <span class="org-string">"</span><span class="org-type"><span class="org-string">git</span></span><span class="org-string">@bitbucket.org:Nan0Scho1ar/vimwiki.git"</span>
    askclone <span class="org-string">"n0s1.core"</span> <span class="org-string">"</span><span class="org-type"><span class="org-string">git</span></span><span class="org-string">@github.com:Nan0Scho1ar/n0s1.core.git"</span>
    askclone <span class="org-string">"bish"</span> <span class="org-string">"</span><span class="org-type"><span class="org-string">git</span></span><span class="org-string">@github.com:Nan0Scho1ar/bish"</span>
    askclone <span class="org-string">"gitmanager"</span> <span class="org-string">"</span><span class="org-type"><span class="org-string">git</span></span><span class="org-string">@github.com:Nan0Scho1ar/gitmanager"</span>
    askclone <span class="org-string">"n0s1.core"</span> <span class="org-string">"</span><span class="org-type"><span class="org-string">git</span></span><span class="org-string">@github.com:Nan0Scho1ar/n0s1.core.git"</span>
    <span class="org-type">cd</span> $<span class="org-variable-name">HOME</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orge8fdfdf" class="outline-2">
<h2 id="orge8fdfdf"><span class="section-number-2">36.</span> setup<sub>ssh</sub><a aria-hidden="true" href="#orge8fdfdf">#</a> </h2>
<div class="outline-text-2" id="text-36">
<details id='org4403ce8' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org4403ce8'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">setup_ssh: Propmts user to create new ssh keys if none exist</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:36:17 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-function-name">setup_ssh</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -d .ssh <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">".ssh directory already exits, continuing..."</span>;
    <span class="org-keyword">else</span>
        <span class="org-type">echo</span> <span class="org-string">"Creating .ssh directory"</span>;
        <span class="org-type">mkdir</span> .ssh
    <span class="org-keyword">fi</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -f .ssh/id_rsa.pub <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"ssh key already exists"</span>;
        <span class="org-type">echo</span> <span class="org-string">"Using existing key"</span>;
    <span class="org-keyword">else</span>
        <span class="org-type">echo</span> <span class="org-string">"Generating ssh key..."</span>
        ssh-keygen
    <span class="org-keyword">fi</span>
    ask <span class="org-string">"add public key to remotes"</span> &amp;&amp; <span class="org-type">cat</span> .ssh/id_rsa.pub &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"Add ssh key to bitbucket and github before continuing."</span> <span class="org-sh-escaped-newline">\</span>
        &amp;&amp; sh brave <span class="org-string">"https://bitbucket.org/account/settings/ssh-keys/"</span> <span class="org-string">"https://github.com/settings/keys"</span>
    wait_any_key
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org8f81194" class="outline-2">
<h2 id="org8f81194"><span class="section-number-2">37.</span> setup<sub>symlinks</sub><a aria-hidden="true" href="#org8f81194">#</a> </h2>
<div class="outline-text-2" id="text-37">
<details id='orge22f1eb' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orge22f1eb'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">setup_symlinks: Sets up symlinks for a system</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 20:21:31 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">setup_symlinks</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">asklinksudo "/etc/update-motd.d/10-help-text" "/home/nan0scho1ar/dotfiles/linux/99-banner" "/etc/update-motd.d/99-banner"</span>
    asklink <span class="org-string">".bashrc"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.bashrc"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.bashrc"</span>
    asklink <span class="org-string">".xinitrc"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.xinitrc"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.xinitrc"</span>
    asklink <span class="org-string">".profile"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.profile"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.profile"</span>
    asklink <span class="org-string">".vimrc"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.vimrc"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.vimrc"</span>
    asklink <span class="org-string">".xprofile"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.xprofile"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.xprofile"</span>
    asklink <span class="org-string">".zshenv"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.zshenv"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.zshenv"</span>
    asklink <span class="org-string">".tmux.conf"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.tmux.conf"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.tmux.conf"</span>
    askrecursivelinkdir <span class="org-string">".config"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.config"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config"</span>
    askrecursivelinkdir <span class="org-string">".doom.d"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/.doom.d"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.doom.d"</span>
    asklinksudo <span class="org-string">"/etc/hosts"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/linux/hosts"</span> <span class="org-string">"/etc/hosts"</span>
    asklinksudo <span class="org-string">"/etc/thinkfan.conf"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/etc/thinkfan.conf"</span> <span class="org-string">"/etc/thinkfan.conf"</span>
    asklinksudo <span class="org-string">"awesome/rc.lua"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">NANOS_REPOS_DIR</span></span><span class="org-string">/dotfiles/etc/xdg/awesome/rc.lua"</span> <span class="org-string">"/etc/xdg/awesome/rc.lua"</span>
    <span class="org-type">mkdir</span> -p $<span class="org-variable-name">HOME</span>/.config/z/
    <span class="org-builtin">source</span> $<span class="org-variable-name">HOME</span>/.profile
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org51767a3" class="outline-2">
<h2 id="org51767a3"><span class="section-number-2">38.</span> test.toml<a aria-hidden="true" href="#org51767a3">#</a> </h2>
<div class="outline-text-2" id="text-38">
<details id='org4b0c886' class='code' open><summary><span class="lang">text</span></summary>
<div class='gutter'>
<a href='#org4b0c886'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-text"># This is a TOML document

title = "TOML Example"
"quoted" = "Quoted Example"

[owner]
name = "Tom Preston-Werner"
dob = 1979-05-27T07:32:00-08:00

[database]
enabled = true
ports = [ 8001, 8001, 8002 ]
data = [ ["delta", "phi"], [3.14] ]
temp_targets = { cpu = 79.5, case = 72.0 }

[servers]

[servers.alpha]
ip = "10.0.0.1"
role = "frontend"

[servers.beta]
ip = "10.0.0.2"
role = "backend"
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org5a43ab1" class="outline-2">
<h2 id="org5a43ab1"><span class="section-number-2">39.</span> tmux<sub>setup</sub><a aria-hidden="true" href="#org5a43ab1">#</a> </h2>
<div class="outline-text-2" id="text-39">
<details id='orgbb442d2' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgbb442d2'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">tmux_setup: Installs tmux plugin manager</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:41:50 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-function-name">tmux_setup</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -d <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.tmux/plugins"</span> <span class="org-rainbow-delimiters-depth-2">]</span>;<span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"tmux plugin manager (tpm) already installed"</span>
    <span class="org-keyword">elif</span> ask <span class="org-string">"Install tmux plugin manager"</span>; <span class="org-keyword">then</span>
        <span class="org-type">mkdir</span> -p $<span class="org-variable-name">HOME</span>/.tmux/plugins/
        <span class="org-type">git</span> clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgd765bfd" class="outline-2">
<h2 id="orgd765bfd"><span class="section-number-2">40.</span> tolower<a aria-hidden="true" href="#orgd765bfd">#</a> </h2>
<div class="outline-text-2" id="text-40">
<details id='org0cbdafc' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org0cbdafc'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">TOLOWER: Converts all chars in stdin to lowercase</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 8/12/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>
<span class="org-function-name">tolower</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> sed <span class="org-string">'s/./\L&amp;/g'</span> /dev/stdin; <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgb4a77da" class="outline-2">
<h2 id="orgb4a77da"><span class="section-number-2">41.</span> toml<a aria-hidden="true" href="#orgb4a77da">#</a> </h2>
<div class="outline-text-2" id="text-41">
<details id='org535e626' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org535e626'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">TOML: Simple get commands to read toml files</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">(Not all featues supported)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 27/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-function-name">toml</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    flatten<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-variable-name">comment_regex</span>=<span class="org-string">"^\s*#"</span>
        <span class="org-variable-name">header_regex</span>=<span class="org-string">"\s*\[.*\]"</span>
        <span class="org-variable-name">value_regex</span>=<span class="org-string">"\s*.*=.*"</span>
        <span class="org-variable-name">extract_header</span>=<span class="org-string">"s/\[//g; s/\]//g; s/ //g; s/\t//g; s/\n//g"</span>
        <span class="org-variable-name">extract_value</span>=<span class="org-string">"s/^\s*//; s/\t//g; s/\n//; s/ =/=/; s/= /=/"</span>

        <span class="org-variable-name">parent</span>=<span class="org-string">""</span>
        <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>= read -r line; <span class="org-keyword">do</span>
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span><span class="org-rainbow-delimiters-depth-4">[</span> $<span class="org-variable-name">line</span> =~ $<span class="org-variable-name">comment_regex</span> <span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                <span class="org-keyword">continue</span>
            <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-3">[</span><span class="org-rainbow-delimiters-depth-4">[</span> $<span class="org-variable-name">line</span> =~ $<span class="org-variable-name">header_regex</span> <span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                <span class="org-variable-name">parent</span>=$<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-sh-quoted-exec">sed</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">extract_header</span></span><span class="org-string">"</span> &lt;&lt;&lt; <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">line</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-3">[</span><span class="org-rainbow-delimiters-depth-4">[</span> $<span class="org-variable-name">line</span> =~ $<span class="org-variable-name">value_regex</span> <span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span> -z $<span class="org-variable-name">parent</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                    sed <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">extract_value</span></span><span class="org-string">"</span> &lt;&lt;&lt; <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">line</span></span><span class="org-string">"</span>
                <span class="org-keyword">else</span>
                    <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">parent</span></span><span class="org-string">.</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">sed</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">extract_value</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" &lt;&lt;&lt; "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">line</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">")</span></span><span class="org-string">"</span>
                <span class="org-keyword">fi</span>
            <span class="org-keyword">fi</span>
        <span class="org-keyword">done</span> &lt; /dev/stdin
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">#</span><span class="org-comment">Returns the first value which matches the header</span>
    get_value<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-variable-name">match</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">=.*"</span>
        <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>= read -r line; <span class="org-keyword">do</span>
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span><span class="org-rainbow-delimiters-depth-4">[</span> $<span class="org-variable-name">line</span> =~ $<span class="org-variable-name">match</span> <span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                sed <span class="org-string">"s/^.*=//"</span> &lt;&lt;&lt; <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">line</span></span><span class="org-string">"</span> | tr -d <span class="org-string">'"'</span>
                <span class="org-keyword">break</span>
            <span class="org-keyword">fi</span>
        <span class="org-keyword">done</span> &lt; &lt;<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">cat</span> /dev/stdin | flatten<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Returns all headers and values matching the input</span>
    get<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-variable-name">match</span>=<span class="org-string">"^</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">.*"</span>
        <span class="org-keyword">while</span> <span class="org-variable-name">IFS</span>= read -r line; <span class="org-keyword">do</span>
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span><span class="org-rainbow-delimiters-depth-4">[</span> $<span class="org-variable-name">line</span> =~ $<span class="org-variable-name">match</span> <span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">line</span></span><span class="org-string">"</span>
            <span class="org-keyword">fi</span>
        <span class="org-keyword">done</span> &lt; &lt;<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">cat</span> /dev/stdin | flatten<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
        <span class="org-string">"get"</span>) <span class="org-type">cat</span> /dev/stdin | get <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> ;;
        <span class="org-string">"get_value"</span>) <span class="org-type">cat</span> /dev/stdin | get_value <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> ;;
        <span class="org-string">"-V"</span>) <span class="org-type">echo</span> <span class="org-string">"toml: version 0.7.1"</span> ;;
        *) <span class="org-type">echo</span> <span class="org-string">"Error: Unknown option"</span>;;
    <span class="org-keyword">esac</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orga469b37" class="outline-2">
<h2 id="orga469b37"><span class="section-number-2">42.</span> toml.py<a aria-hidden="true" href="#orga469b37">#</a> </h2>
<div class="outline-text-2" id="text-42">
<details id='org7922e5a' class='code' open><summary><span class="lang">Python</span></summary>
<div class='gutter'>
<a href='#org7922e5a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-python"><span class="org-comment-delimiter">#</span><span class="org-comment">!/usr/bin/env python3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">toml.py: Read values from a toml file</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Fri 17 Sep 2021 14:48:03 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-keyword">import</span> sys
<span class="org-keyword">import</span> re

<span class="org-keyword">def</span> <span class="org-function-name">flatten</span>(lines):
    <span class="org-variable-name">flat</span> = []
    <span class="org-keyword">for</span> line <span class="org-keyword">in</span> lines:
        <span class="org-keyword">if</span> re.match(<span class="org-string">"^\s*#"</span>, line):
            <span class="org-keyword">continue</span>
        <span class="org-keyword">elif</span> re.match(<span class="org-string">"\s*\[.*\]"</span>, line):
            <span class="org-variable-name">parent</span> = line.replace(<span class="org-string">"["</span>, <span class="org-string">""</span>).replace(<span class="org-string">"]"</span>, <span class="org-string">""</span>).replace(<span class="org-string">" "</span>, <span class="org-string">""</span>).replace(<span class="org-string">"\t"</span>, <span class="org-string">""</span>).replace(<span class="org-string">"\n"</span>, <span class="org-string">""</span>)
        <span class="org-keyword">elif</span> re.match(<span class="org-string">"\s*.*=.*"</span>, line):
            flat.append(parent + <span class="org-string">"."</span> + re.sub(<span class="org-string">"^\s*"</span>, <span class="org-string">""</span>, line).replace(<span class="org-string">"\t"</span>, <span class="org-string">""</span>).replace(<span class="org-string">"\n"</span>, <span class="org-string">""</span>).replace(<span class="org-string">" ="</span>, <span class="org-string">"="</span>).replace(<span class="org-string">"= "</span>, <span class="org-string">"="</span>))
    <span class="org-keyword">return</span> flat

<span class="org-comment-delimiter"># </span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> support multiline arrays</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Returns first match</span>
<span class="org-keyword">def</span> <span class="org-function-name">get</span>(key):
    <span class="org-variable-name">flat</span> = flatten(sys.stdin)
    <span class="org-keyword">for</span> line <span class="org-keyword">in</span> flat:
        <span class="org-keyword">if</span> key + <span class="org-string">"="</span> <span class="org-keyword">in</span> line:
            <span class="org-variable-name">result</span> = re.sub(<span class="org-string">".*="</span>, <span class="org-string">""</span>, line)
            <span class="org-keyword">return</span> result[<span class="org-highlight-numbers-number">1</span>:-<span class="org-highlight-numbers-number">1</span>] <span class="org-keyword">if</span> re.match(<span class="org-string">"^\".*\"$"</span>, result) <span class="org-keyword">else</span> result

<span class="org-keyword">def</span> <span class="org-function-name">get_headers</span>(key):
    <span class="org-variable-name">flat</span> = flatten(sys.stdin)
    <span class="org-variable-name">matches</span> = []
    <span class="org-keyword">for</span> line <span class="org-keyword">in</span> flat:
        <span class="org-keyword">if</span> key == line[:<span class="org-builtin">len</span>(key)]:
            matches.append(line)
    <span class="org-keyword">return</span> matches


<span class="org-keyword">if</span> sys.argv[<span class="org-highlight-numbers-number">1</span>] == <span class="org-string">"get"</span>:
    <span class="org-keyword">print</span>(get(sys.argv[<span class="org-highlight-numbers-number">2</span>]))
<span class="org-keyword">elif</span> sys.argv[<span class="org-highlight-numbers-number">1</span>] == <span class="org-string">"get_headers"</span>:
    <span class="org-keyword">for</span> match <span class="org-keyword">in</span> get_headers(sys.argv[<span class="org-highlight-numbers-number">2</span>]):
        <span class="org-keyword">print</span>(match)
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org2eddccf" class="outline-2">
<h2 id="org2eddccf"><span class="section-number-2">43.</span> toomuxh<a aria-hidden="true" href="#org2eddccf">#</a> </h2>
<div class="outline-text-2" id="text-43">
<details id='org8706691' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org8706691'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">AUTHOR: Nan0Scho1ar</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">Script for running nested tmux sessions</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">Calls recursively to add additional information</span>

<span class="org-keyword">case</span> $<span class="org-highlight-numbers-number">1</span><span class="org-keyword"> in</span>
    sys)
        toomuxh system $<span class="org-variable-name">HOME</span>/repos/me/dotfiles/tmux/sys.sh $<span class="org-highlight-numbers-number">2</span>
        ;;
    <span class="org-builtin">local</span>)
        <span class="org-variable-name">TMUX</span>= ;
        toomuxh $<span class="org-variable-name">HOSTNAME</span> $<span class="org-variable-name">HOME</span>/repos/me/dotfiles/tmux/local.sh $<span class="org-highlight-numbers-number">2</span>
        ;;
    cluster)
        <span class="org-variable-name">TMUX</span>= ;
        toomuxh $<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-variable-name">HOSTNAME</span><span class="org-rainbow-delimiters-depth-1">}</span>_C $<span class="org-variable-name">HOME</span>/repos/me/dotfiles/tmux/cluster.sh $<span class="org-highlight-numbers-number">2</span>
        ;;
    *)
        <span class="org-variable-name">SESSION</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span>
        <span class="org-variable-name">CONFIG</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span>
        <span class="org-keyword">case</span> $<span class="org-highlight-numbers-number">3</span><span class="org-keyword"> in</span>
            q|quit|Q|QUIT|Quit|<span class="org-keyword">exit</span>|Exit)
                <span class="org-keyword">if</span> tmux has-session -t $<span class="org-variable-name">SESSION</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null; <span class="org-keyword">then</span>
                    tmux kill-session -t $<span class="org-variable-name">SESSION</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null &amp;&amp;
                        <span class="org-type">echo</span> <span class="org-string">"Killed tmux session '</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">SESSION</span></span><span class="org-string">'"</span> ||
                        <span class="org-type">echo</span> <span class="org-string">"Failed to </span><span class="org-type"><span class="org-string">kill</span></span><span class="org-string"> tmux session '</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">SESSION</span></span><span class="org-string">'"</span>
                <span class="org-keyword">else</span>
                    <span class="org-type">echo</span> <span class="org-string">"Tmux session '</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">SESSION</span></span><span class="org-string">' does not exist"</span>
                <span class="org-keyword">fi</span>
                <span class="org-keyword">exit</span>
                ;;
            *)
                <span class="org-type">echo</span> <span class="org-string">"SESSION=</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">SESSION</span></span><span class="org-string">"</span>
                <span class="org-type">echo</span> <span class="org-string">"CONFIG=</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">CONFIG</span></span><span class="org-string">"</span>
                <span class="org-keyword">if</span> tmux has-session -t $<span class="org-variable-name">SESSION</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null; <span class="org-keyword">then</span>
                    tmux -2 attach-session -t $<span class="org-variable-name">SESSION</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null ||
                    <span class="org-type">echo</span> <span class="org-string">"Failed to attach tmux session '</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">SESSION</span></span><span class="org-string">'"</span>
                <span class="org-keyword">else</span>
                    tmux -2 new-session -s $<span class="org-variable-name">SESSION</span> $<span class="org-variable-name">CONFIG</span>
                    tmux -2 new-session -d -s $<span class="org-variable-name">SESSION</span> $<span class="org-variable-name">CONFIG</span>
                    tmux -2 attach-session -t $<span class="org-variable-name">SESSION</span>
                <span class="org-keyword">fi</span>
                ;;
        <span class="org-keyword">esac</span>
        ;;
<span class="org-keyword">esac</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgd07491f" class="outline-2">
<h2 id="orgd07491f"><span class="section-number-2">44.</span> toupper<a aria-hidden="true" href="#orgd07491f">#</a> </h2>
<div class="outline-text-2" id="text-44">
<details id='org31ac439' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org31ac439'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">TOUPPER: Converts all chars in stdin to uppercase</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 8/12/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>
<span class="org-function-name">toupper</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> sed <span class="org-string">'s/./\U&amp;/g'</span> /dev/stdin; <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org2a7b5b0" class="outline-2">
<h2 id="org2a7b5b0"><span class="section-number-2">45.</span> transpose<a aria-hidden="true" href="#org2a7b5b0">#</a> </h2>
<div class="outline-text-2" id="text-45">
<details id='orgacb8e8a' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orgacb8e8a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">TRANSPOSE: Swap columns and rows separated by spaces</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: https://stackoverflow.com/users/459745/hai-vu</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Question: https://stackoverflow.com/questions/9534744/how-to-transfer-the-data-of-columns-to-rows-with-awk</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 9/12/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>
awk <span class="org-string">'{ for (i=1; i&lt;=NF; i++) col[i] = col[i] " " $i }</span>
<span class="org-string">END {</span>
<span class="org-string">    for (i=1; i&lt;=NF; i++) {</span>
<span class="org-string">        sub(/^ /, "", col[i]);</span>
<span class="org-string">        print col[i]</span>
<span class="org-string">    }</span>
<span class="org-string">}'</span> $<span class="org-highlight-numbers-number">1</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orge7443c0" class="outline-2">
<h2 id="orge7443c0"><span class="section-number-2">46.</span> trapinput<a aria-hidden="true" href="#orge7443c0">#</a> </h2>
<div class="outline-text-2" id="text-46">
<details id='orge82ba1b' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orge82ba1b'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>

<span class="org-function-name">hideinput</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -t <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
     <span class="org-type">echo</span> <span class="org-string">"Is tty"</span>
     <span class="org-variable-name">save_state</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">stty</span> -g<span class="org-rainbow-delimiters-depth-2">)</span>
     stty -echo -icanon time <span class="org-highlight-numbers-number">0</span> min <span class="org-highlight-numbers-number">0</span>
     <span class="org-type">echo</span> -ne <span class="org-string">"\e[?1049h\r"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>;
  <span class="org-keyword">else</span>
    <span class="org-type">echo</span> <span class="org-string">"is not tty"</span>
  <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">cleanup</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -t <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
    stty <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">save_state</span></span><span class="org-string">"</span>
    <span class="org-type">echo</span> -ne <span class="org-string">"\e[?1049l"</span> <span class="org-highlight-numbers-number">1</span>&gt;&amp;<span class="org-highlight-numbers-number">2</span>;
    <span class="org-type">echo</span> <span class="org-string">"exit tty"</span>
  <span class="org-keyword">else</span>
    <span class="org-type">echo</span> <span class="org-string">"is not tty"</span>
  <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">trap</span> <span class="org-string">'cleanup &lt; /dev/tty'</span> EXIT
<span class="org-keyword">trap</span> <span class="org-string">'hideinput &lt; /dev/tty'</span> CONT
hideinput

<span class="org-variable-name">input</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(&lt; /dev/stdin)</span></span><span class="org-string">"</span>;
<span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">input</span></span><span class="org-string">"</span>
<span class="org-keyword">while</span> true;
<span class="org-keyword">do</span>
  <span class="org-builtin">read</span> -r -sn1 &lt; /dev/tty;
  <span class="org-builtin">read</span> -r -sn3 -t <span class="org-highlight-numbers-number">0.001</span> k1 &lt; /dev/tty;
  <span class="org-variable-name">REPLY</span>+=$<span class="org-variable-name">k1</span>;
  <span class="org-type">echo</span> $<span class="org-variable-name">REPLY</span>
<span class="org-keyword">done</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orgf5dd630" class="outline-2">
<h2 id="orgf5dd630"><span class="section-number-2">47.</span> tryaptinstall<a aria-hidden="true" href="#orgf5dd630">#</a> </h2>
<div class="outline-text-2" id="text-47">
<details id='org208d97e' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org208d97e'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">tryaptinstall: Prompt the user to install packages using apt</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:27:28 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">&lt;http://www.gnu.org/licenses/&gt;.</a></span><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">


</a><span class="org-function-name"><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">tryaptinstall</a></span><span class="org-rainbow-delimiters-depth-1"><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">(</a><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">)</a></span><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2"> </a><span class="org-rainbow-delimiters-depth-1"><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">{</a></span><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">
    dpkg-query -W -f=</a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">'${Status}'</a></span><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2"> $</a><span class="org-highlight-numbers-number"><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">1</a></span><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2"> </a><span class="org-highlight-numbers-number"><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">2</a></span><a href="http://www.gnu.org/licenses/&gt;.


tryaptinstall() {
    dpkg-query -W -f='${Status}' $1 2">&gt;</a>/dev/null | <span class="org-type">grep</span> -q <span class="org-string">"install ok installed"</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> is already installed"</span> &amp;&amp; <span class="org-keyword">return</span>
    ask <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{magenta}</span></span><span class="org-string">$1</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> is not installed, would you like to install it"</span> &amp;&amp; <span class="org-type">sudo</span> apt-get --yes install $<span class="org-highlight-numbers-number">1</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org6e7ccc6" class="outline-2">
<h2 id="org6e7ccc6"><span class="section-number-2">48.</span> tryaurinstall<a aria-hidden="true" href="#org6e7ccc6">#</a> </h2>
<div class="outline-text-2" id="text-48">
<details id='org43321a2' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org43321a2'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">tryaurinstall: Prompt the user to install list of packages using AUR helper</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:25:57 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">tryaurinstall</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">pkgs</span>=<span class="org-sh-quoted-exec">`</span><span class="org-type"><span class="org-sh-quoted-exec">echo</span></span><span class="org-sh-quoted-exec"> $@ | sed "s/--prompt //"`</span>
    <span class="org-keyword">for</span> pkg<span class="org-keyword"> in</span> $<span class="org-variable-name">pkgs</span>; <span class="org-keyword">do</span>
        pacman -Qi $<span class="org-variable-name">pkg</span> <span class="org-highlight-numbers-number">1</span>&gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;/dev/null &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$pkg</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> is already installed"</span> &amp;&amp; <span class="org-keyword">continue</span>
        <span class="org-comment-delimiter">#</span><span class="org-comment">Idk if this check works properly</span>
        pacman -Qg <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">pkg</span></span><span class="org-string">@"</span> <span class="org-highlight-numbers-number">1</span>&gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;/dev/null &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{gree}</span></span><span class="org-string">$pkg</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> is already installed"</span> &amp;&amp; <span class="org-keyword">continue</span>
        <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-highlight-numbers-number">1</span> == <span class="org-string">"--prompt"</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
            ask <span class="org-string">"install </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">pkg</span></span><span class="org-string">"</span> || <span class="org-keyword">continue</span>
        <span class="org-keyword">fi</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{red}</span></span><span class="org-string">Installing </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">pkg</span></span><span class="org-string">${reset}"</span> &amp;&amp; yay -S $<span class="org-variable-name">pkg</span>;
    <span class="org-keyword">done</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-orga9f1616" class="outline-2">
<h2 id="orga9f1616"><span class="section-number-2">49.</span> trylink<a aria-hidden="true" href="#orga9f1616">#</a> </h2>
<div class="outline-text-2" id="text-49">
<details id='org4967903' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org4967903'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">trylink: Tries to create a symlink</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:32:19 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">trylink</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">diff</span><span class="org-string"><span class="org-sh-quoted-exec"> -q "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">2</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">")</span></span><span class="org-string">"</span> != <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        ask <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{magenta}</span></span><span class="org-string">$2</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> already exists and is not identical. Show diff"</span> &amp;&amp;
            diff <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span>
        ask <span class="org-string">"Remove </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{red}</span></span><span class="org-string">$2</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string">"</span> &amp;&amp; <span class="org-type">rm</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span>
    <span class="org-keyword">else</span>
        <span class="org-type">rm</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span>
    <span class="org-keyword">fi</span>
    <span class="org-type">echo</span> <span class="org-string">"Linking </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{magenta}</span></span><span class="org-string">$2</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string">"</span>
    <span class="org-type">ln</span> -sf <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org35e1f2f" class="outline-2">
<h2 id="org35e1f2f"><span class="section-number-2">50.</span> trypacmaninstall<a aria-hidden="true" href="#org35e1f2f">#</a> </h2>
<div class="outline-text-2" id="text-50">
<details id='org9d26a75' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org9d26a75'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">trypacmaninstall:  Prompts the user to install packages in the list</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 18:36:30 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>
<span class="org-function-name">trypacmaninstall</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">pkgs</span>=<span class="org-sh-quoted-exec">`</span><span class="org-type"><span class="org-sh-quoted-exec">echo</span></span><span class="org-sh-quoted-exec"> $@ | sed "s/--prompt //"`</span>
    <span class="org-keyword">for</span> pkg<span class="org-keyword"> in</span> $<span class="org-variable-name">pkgs</span>; <span class="org-keyword">do</span>
        pacman -Qi $<span class="org-variable-name">pkg</span> <span class="org-highlight-numbers-number">1</span>&gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;/dev/null &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$pkg</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> is already installed"</span> &amp;&amp; <span class="org-keyword">continue</span>
        <span class="org-comment-delimiter">#</span><span class="org-comment">Idk if this check works properly</span>
        pacman -Qg  <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">pkg</span></span><span class="org-string">@"</span> <span class="org-highlight-numbers-number">1</span>&gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;/dev/null &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">$pkg</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> is already installed"</span> &amp;&amp; <span class="org-keyword">continue</span>
        <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-highlight-numbers-number">1</span> == <span class="org-string">"--prompt"</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
            ask <span class="org-string">"install </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">pkg</span></span><span class="org-string">"</span> || <span class="org-keyword">continue</span>
        <span class="org-keyword">fi</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{red}</span></span><span class="org-string">Installing </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">pkg</span></span><span class="org-string">${reset}"</span> &amp;&amp; <span class="org-type">sudo</span> pacman -S --noconfirm $<span class="org-variable-name">pkg</span>;
    <span class="org-keyword">done</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org331d469" class="outline-2">
<h2 id="org331d469"><span class="section-number-2">51.</span> ubuntu<sub>pkg</sub><sub>setup</sub><a aria-hidden="true" href="#org331d469">#</a> </h2>
<div class="outline-text-2" id="text-51">
<details id='orga2e5512' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#orga2e5512'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ubuntu_pkg_setup: Script to install ubuntu packages</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:39:47 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">&lt;http://www.gnu.org/licenses/&gt;.</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">


</a><span class="org-function-name"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">ubuntu_pkg_setup</a></span><span class="org-rainbow-delimiters-depth-1"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">(</a><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">)</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2"> </a><span class="org-rainbow-delimiters-depth-1"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">{</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall </a><span class="org-type"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">curl</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    </a><span class="org-comment-delimiter"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">#</a></span><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">fd is already used on Ubuntu</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">
    </a><span class="org-keyword"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">if</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2"> dpkg-query -W -f=</a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">'${Status}'</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2"> fd-find </a><span class="org-highlight-numbers-number"><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">2</a></span><a href="http://www.gnu.org/licenses/&gt;.


ubuntu_pkg_setup() {
    tryaptinstall ripgrep
    tryaptinstall fzf
    tryaptinstall keychain
    tryaptinstall tmux
    tryaptinstall curl
    tryaptinstall youtube-dl
    tryaptinstall vim
    tryaptinstall neovim
    tryaptinstall nodejs
    tryaptinstall zsh

    tryaptinstall fd-find
    #fd is already used on Ubuntu
    if dpkg-query -W -f='${Status}' fd-find 2">&gt;</a> /dev/null | <span class="org-type">grep</span> -q <span class="org-string">"install ok installed"</span>; <span class="org-keyword">then</span>
        asklink <span class="org-string">"fdfind (ubuntu fix)"</span> <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">which</span><span class="org-string"><span class="org-sh-quoted-exec"> fdfind)</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.local/bin/fd"</span>
    <span class="org-keyword">fi</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">Bat is not in standard repos because reasons</span>
    <span class="org-keyword">if</span> dpkg-query -W -f=<span class="org-string">'${Status}'</span> bat <span class="org-highlight-numbers-number">2</span>&gt; /dev/null | <span class="org-type">grep</span> -q <span class="org-string">"install ok installed"</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">bat</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string"> is already installed"</span>
    <span class="org-keyword">elif</span> ask <span class="org-string">"'</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{magenta}</span></span><span class="org-string">bat</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string">' is not installed, would you like to install it"</span>; <span class="org-keyword">then</span>
        <span class="org-variable-name">cur_dir</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-sh-quoted-exec">pwd</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-type">cd</span> /tmp
        wget https://github.com/sharkdp/bat/releases/download/v0.17.1/bat_0.17.1_amd64.deb
        <span class="org-type">sudo</span> dpkg -i bat_0.17.1_amd64.deb
        <span class="org-type">cd</span> $<span class="org-variable-name">cur_dir</span>
    <span class="org-keyword">fi</span>
    <span class="org-comment-delimiter">###</span><span class="org-comment"><span class="org-bold"><span class="org-warning">TODO</span></span></span><span class="org-comment"> Install Rider</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org21e3dbe" class="outline-2">
<h2 id="org21e3dbe"><span class="section-number-2">52.</span> useless<a aria-hidden="true" href="#org21e3dbe">#</a> </h2>
<div class="outline-text-2" id="text-52">
<details id='org32b64af' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org32b64af'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">USELESS: </span><span class="org-type"><span class="org-comment">less</span></span><span class="org-comment"> but </span><span class="org-type"><span class="org-comment">less</span></span><span class="org-comment"> code. Seriously, just use less.</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 30/10/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: MIT License</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">20 line pager. Not very useful in its current form but easily extended</span>

<span class="org-function-name">useless</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">lines</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">cat</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">1</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" || </span></span><span class="org-type"><span class="org-string"><span class="org-sh-quoted-exec">cat</span></span></span><span class="org-string"><span class="org-sh-quoted-exec"> /dev/stdin)</span></span><span class="org-string">"</span>
    <span class="org-variable-name">numlines</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">echo</span><span class="org-string"><span class="org-sh-quoted-exec"> "</span></span><span class="org-string"><span class="org-constant"><span class="org-sh-quoted-exec">$</span></span></span><span class="org-string"><span class="org-variable-name"><span class="org-sh-quoted-exec">lines</span></span></span><span class="org-string"><span class="org-sh-quoted-exec">" | wc -l)</span></span><span class="org-string">"</span> &amp;&amp; <span class="org-variable-name">height</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> lines)</span></span><span class="org-string">"</span> &amp;&amp; <span class="org-sh-escaped-newline">\</span>
    <span class="org-type">echo</span> -e <span class="org-string">"\e[?1049h"</span> &amp;&amp; <span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span> &amp;&amp; <span class="org-variable-name">col</span>=<span class="org-highlight-numbers-number">1</span> &amp;&amp; <span class="org-variable-name">regex</span>=<span class="org-string">""</span> || <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">1</span>
    <span class="org-keyword">while</span> true; <span class="org-keyword">do</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">lines</span></span><span class="org-string">"</span> | sed -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">row</span></span><span class="org-string">,</span><span class="org-string"><span class="org-sh-quoted-exec">$((row+height-2)</span></span><span class="org-string">)p;</span><span class="org-string"><span class="org-sh-quoted-exec">$((row+height-2)</span></span><span class="org-string">)q"</span><span class="org-sh-escaped-newline">\</span>
            | cut -c $<span class="org-variable-name">col</span>- | <span class="org-type">grep</span> --colour=always <span class="org-string">"^\|</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">regex</span></span><span class="org-string">"</span>;
        <span class="org-builtin">read</span> -rsn1 -p <span class="org-string">":"</span> &lt; /dev/tty char &amp;&amp; <span class="org-type">echo</span> -e <span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">tput</span><span class="org-string"><span class="org-sh-quoted-exec"> el1)</span></span><span class="org-string">\r"</span>
        <span class="org-keyword">case</span> $<span class="org-variable-name">char</span><span class="org-keyword"> in</span>
            <span class="org-string">'q'</span>) <span class="org-type">echo</span> -e <span class="org-string">"\e[?1049l"</span> &amp;&amp; <span class="org-keyword">return</span>;;
            <span class="org-string">'k'</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">row</span> -gt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">row</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>row-1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'j'</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">row</span> -lt $<span class="org-variable-name">numlines</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">row</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>row+1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'h'</span>) <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">col</span> -gt <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-variable-name">col</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>col-1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'l'</span>) <span class="org-variable-name">col</span>=$<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>col+1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;;
            <span class="org-string">'g'</span>) <span class="org-variable-name">row</span>=<span class="org-highlight-numbers-number">1</span>;;
            <span class="org-string">'G'</span>) <span class="org-variable-name">row</span>=$<span class="org-variable-name">numlines</span>;;
            <span class="org-string">'/'</span>) <span class="org-builtin">read</span> -p <span class="org-string">"/"</span> &lt; /dev/tty regex;;
        <span class="org-keyword">esac</span>
    <span class="org-keyword">done</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org174d008" class="outline-2">
<h2 id="org174d008"><span class="section-number-2">53.</span> vim<sub>setup</sub><a aria-hidden="true" href="#org174d008">#</a> </h2>
<div class="outline-text-2" id="text-53">
<details id='org6ff5567' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org6ff5567'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">vim_setup: Install vimplug and plugins</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:40:42 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">vim_setup</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">Setup vim/nvim</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/vim/autoload/plug.vim"</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-2">[</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/nvim/site/autoload/plug.vim"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
        <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{green}</span></span><span class="org-string">vimplug already installed</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{reset}</span></span><span class="org-string">"</span>
    <span class="org-keyword">elif</span> ask <span class="org-string">"Install vim/nvim plugins"</span>; <span class="org-keyword">then</span>
        <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> $<span class="org-variable-name">NANOS_NAME</span> = <span class="org-string">"linux"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-negation-char">!</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/vim/autoload/plug.vim"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/vim/autoload/plug.vim not found. Downloading..."</span>
                <span class="org-type">curl</span> -fLo $<span class="org-variable-name">HOME</span>/.vim/autoload/plug.vim --create-dirs <span class="org-sh-escaped-newline">\</span>
                    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
                vim -E -s +PlugInstall +visual +qall
            <span class="org-keyword">fi</span>


            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-negation-char">!</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/nvim/site/autoload/plug.vim"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/nvim/site/autoload/plug.vim not found. Copying from </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.vim/autoload/plug.vim"</span>
                <span class="org-type">curl</span> -fLo <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/nvim/site/autoload/plug.vim"</span> --create-dirs <span class="org-sh-escaped-newline">\</span>
                    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
            <span class="org-keyword">fi</span>

            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-negation-char">!</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/n0s1vim/site/autoload/plug.vim"</span> <span class="org-rainbow-delimiters-depth-2">]</span>; <span class="org-keyword">then</span>
                <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.config/n0s1vim/site/autoload/plug.vim not found. Copying from </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">/.vim/autoload/plug.vim"</span>
                <span class="org-type">curl</span> -fLo <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">XDG_DATA_HOME</span></span><span class="org-string">/n0s1vim/site/autoload/plug.vim"</span> --create-dirs <span class="org-sh-escaped-newline">\</span>
                    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
            <span class="org-keyword">fi</span>
        <span class="org-keyword">fi</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org0501e7c" class="outline-2">
<h2 id="org0501e7c"><span class="section-number-2">54.</span> waitanykey<a aria-hidden="true" href="#org0501e7c">#</a> </h2>
<div class="outline-text-2" id="text-54">
<details id='org8f1a31a' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org8f1a31a'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">wait_any_key: Waits for the user to press any key</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Author: Nan0Scho1ar (Christopher Mackinga)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: Tue 26 Oct 2021 19:28:22 AEST</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">License: GPL v3</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (C) 2021 Christopher Mackinga <a href="mailto:chris%40n0s1.net">&lt;chris@n0s1.net&gt;</a></span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is free software: you can redistribute it and/or modify it under</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the terms of the GNU General Public License as published by the Free Software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">version.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">You should have received a copy of the GNU General Public License along with</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-function-name">wait_any_key</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-builtin">read</span> -n <span class="org-highlight-numbers-number">1</span> -s -r -p <span class="org-string">"Press any key to continue"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>

<div id="outline-container-org7a80226" class="outline-2">
<h2 id="org7a80226"><span class="section-number-2">55.</span> z.sh<a aria-hidden="true" href="#org7a80226">#</a> </h2>
<div class="outline-text-2" id="text-55">
<details id='org6f13d68' class='code' open><summary><span class="lang">shell</span></summary>
<div class='gutter'>
<a href='#org6f13d68'>#</a>
<button title='Copy to clipboard' onclick='copyPreToClipbord(this)'>âŽ˜</button></div>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Z: Jump around easily</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Created: 6/12/2020</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (c) 2009 rupa deadwyler. Licensed under the WTFPL license, Version 2</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Copyright (c) 2020 Nan0Scho1ar (Christopher Mackinga)</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">maintains a jump-list of the directories you actually use</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">INSTALL:</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* put something like this in your .bashrc/.zshrc:</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">. /path/to/z.sh</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* </span><span class="org-type"><span class="org-comment">cd</span></span><span class="org-comment"> around for a while to build up the db</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* PROFIT!!</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* optionally:</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">set $_Z_CMD in .bashrc/.zshrc to change the command (default z).</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">set $_Z_DATA in .bashrc/.zshrc to change the datafile (default ~/.z).</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">set $_Z_MAX_SCORE lower to age entries out faster (default 9000).</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">set $_Z_NO_RESOLVE_SYMLINKS to prevent symlink resolution.</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">set $_Z_NO_PROMPT_COMMAND if you're handling PROMPT_COMMAND yourself.</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">set $_Z_EXCLUDE_DIRS to an array of directories to exclude.</span>
<span class="org-comment-delimiter">#         </span><span class="org-comment">set $_Z_OWNER to your username if you want use z while </span><span class="org-type"><span class="org-comment">sudo</span></span><span class="org-comment"> with $HOME kept</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">USE:</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z foo     # </span><span class="org-type"><span class="org-comment">cd</span></span><span class="org-comment"> to most frecent dir matching foo</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z foo bar # </span><span class="org-type"><span class="org-comment">cd</span></span><span class="org-comment"> to most frecent dir matching foo and bar</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z -r foo  # </span><span class="org-type"><span class="org-comment">cd</span></span><span class="org-comment"> to highest ranked dir matching foo</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z -t foo  # </span><span class="org-type"><span class="org-comment">cd</span></span><span class="org-comment"> to most recently accessed dir matching foo</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z -l foo  # list matches instead of </span><span class="org-type"><span class="org-comment">cd</span></span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z -e foo  # </span><span class="org-type"><span class="org-comment">echo</span></span><span class="org-comment"> the best match, don't </span><span class="org-type"><span class="org-comment">cd</span></span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z -c foo  # restrict matches to subdirs of $PWD</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z -x      # remove the current directory from the datafile</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">* z -h      # show a brief help message</span>
<span class="org-function-name">z</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-rainbow-delimiters-depth-2">[</span> -d <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{_Z_DATA:-$HOME/.z}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-2">]</span> &amp;&amp; <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">echo</span> <span class="org-string">"ERROR: z.sh's datafile (</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{_Z_DATA:-$HOME/.z}</span></span><span class="org-string">) is a directory."</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    _z<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>

        <span class="org-builtin">local</span> <span class="org-variable-name">datafile</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{_Z_DATA:-$HOME/.z}</span></span><span class="org-string">"</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">if symlink, dereference</span>
        <span class="org-rainbow-delimiters-depth-3">[</span> -h <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span> &amp;&amp; <span class="org-variable-name">datafile</span>=$<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-sh-quoted-exec">readlink</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">bail if we don't own ~/.z and $_Z_OWNER not set</span>
        <span class="org-rainbow-delimiters-depth-3">[</span> -z <span class="org-string">"$_Z_OWNER"</span> -a -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span> -a <span class="org-negation-char">!</span> -O <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span> &amp;&amp; <span class="org-keyword">return</span>

        _z_dirs <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-builtin">local</span> line
            <span class="org-keyword">while </span><span class="org-builtin">read</span> line; <span class="org-keyword">do</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">only count directories</span>
                <span class="org-rainbow-delimiters-depth-4">[</span> -d <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{line%%\|*}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-4">]</span> &amp;&amp; <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">line</span></span><span class="org-string">"</span>
            <span class="org-keyword">done</span> &lt; <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span>
            <span class="org-keyword">return</span> <span class="org-highlight-numbers-number">0</span>
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">add entries</span>
        <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"--add"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
            <span class="org-builtin">shift</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">$HOME isn't worth matching</span>
            <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">*</span></span><span class="org-string">"</span> = <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">HOME</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span> &amp;&amp; <span class="org-keyword">return</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">don't track excluded directory trees</span>
            <span class="org-builtin">local</span> exclude
            <span class="org-keyword">for</span> exclude<span class="org-keyword"> in</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{_Z_EXCLUDE_DIRS[@]}</span></span><span class="org-string">"</span>; <span class="org-keyword">do</span>
                <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">*</span></span><span class="org-string">"</span><span class="org-keyword"> in</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">exclude</span></span><span class="org-string">*"</span>) <span class="org-keyword">return</span>;; <span class="org-keyword">esac</span>
            <span class="org-keyword">done</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">maintain the data file</span>
            <span class="org-builtin">local</span> <span class="org-variable-name">tempfile</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">.</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">RANDOM</span></span><span class="org-string">"</span>
            <span class="org-builtin">local</span> <span class="org-variable-name">score</span>=$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">_Z_MAX_SCORE</span>:-90000<span class="org-rainbow-delimiters-depth-3">}</span>
            _z_dirs | awk -v <span class="org-variable-name">path</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">*</span></span><span class="org-string">"</span> -v <span class="org-variable-name">now</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">date</span><span class="org-string"><span class="org-sh-quoted-exec"> +%s)</span></span><span class="org-string">"</span> -v <span class="org-variable-name">score</span>=$<span class="org-variable-name">score</span> -F<span class="org-string">"|"</span> <span class="org-string">'</span>
<span class="org-string">                BEGIN {</span>
<span class="org-string">                    rank[path] = 1</span>
<span class="org-string">                    time[path] = now</span>
<span class="org-string">                }</span>
<span class="org-string">                $2 &gt;= 1 {</span>
<span class="org-string">                    # drop ranks below 1</span>
<span class="org-string">                    if( $1 == path ) {</span>
<span class="org-string">                        rank[$1] = $2 + 1</span>
<span class="org-string">                        time[$1] = now</span>
<span class="org-string">                    } else {</span>
<span class="org-string">                        rank[$1] = $2</span>
<span class="org-string">                        time[$1] = $3</span>
<span class="org-string">                    }</span>
<span class="org-string">                    count += $2</span>
<span class="org-string">                }</span>
<span class="org-string">                END {</span>
<span class="org-string">                    if( count &gt; score ) {</span>
<span class="org-string">                        # aging</span>
<span class="org-string">                        for( x in rank ) print x "|" 0.99*rank[x] "|" time[x]</span>
<span class="org-string">                    } else for( x in rank ) print x "|" rank[x] "|" time[x]</span>
<span class="org-string">                }</span>
<span class="org-string">            '</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null &gt;| <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">tempfile</span></span><span class="org-string">"</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">do our best to avoid clobbering the datafile in a race condition.</span>
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span> $<span class="org-variable-name">?</span> -ne <span class="org-highlight-numbers-number">0</span> -a -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                env <span class="org-type">rm</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">tempfile</span></span><span class="org-string">"</span>
            <span class="org-keyword">else</span>
                <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"$_Z_OWNER"</span> <span class="org-rainbow-delimiters-depth-3">]</span> &amp;&amp; <span class="org-type">chown</span> $<span class="org-variable-name">_Z_OWNER</span>:<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">id</span><span class="org-string"><span class="org-sh-quoted-exec"> -ng $_Z_OWNER)</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">tempfile</span></span><span class="org-string">"</span>
                env <span class="org-type">mv</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">tempfile</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span> || env <span class="org-type">rm</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">tempfile</span></span><span class="org-string">"</span>
            <span class="org-keyword">fi</span>

        <span class="org-comment-delimiter"># </span><span class="org-comment">tab completion</span>
        <span class="org-keyword">elif</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> = <span class="org-string">"--complete"</span> -a -s <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
            _z_dirs | awk -v <span class="org-variable-name">q</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">"</span> -F<span class="org-string">"|"</span> <span class="org-string">'</span>
<span class="org-string">                BEGIN {</span>
<span class="org-string">                    q = substr(q, 3)</span>
<span class="org-string">                    if( q == tolower(q) ) imatch = 1</span>
<span class="org-string">                    gsub(/ /, ".*", q)</span>
<span class="org-string">                }</span>
<span class="org-string">                {</span>
<span class="org-string">                    if( imatch ) {</span>
<span class="org-string">                        if( tolower($1) ~ q ) print $1</span>
<span class="org-string">                    } else if( $1 ~ q ) print $1</span>
<span class="org-string">                }</span>
<span class="org-string">            '</span> <span class="org-highlight-numbers-number">2</span>&gt;/dev/null

        <span class="org-keyword">else</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">list/go</span>
            <span class="org-builtin">local</span> <span class="org-type">echo</span> fnd last list opt typ
            <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">do case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
                --) <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">do </span><span class="org-builtin">shift</span>; <span class="org-variable-name">fnd</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fnd</span></span><span class="org-string">${fnd:+ }</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span>;<span class="org-keyword">done</span>;;
                -*) <span class="org-variable-name">opt</span>=$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">1</span>:1<span class="org-rainbow-delimiters-depth-3">}</span>; <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">opt</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">do case</span> $<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">opt</span>:0:1<span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">in</span>
                        c) <span class="org-variable-name">fnd</span>=<span class="org-string">"^</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">PWD</span></span><span class="org-string"> </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fnd</span></span><span class="org-string">"</span>;;
                        e) <span class="org-type">echo</span>=<span class="org-highlight-numbers-number">1</span>;;
                        h) <span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{_Z_CMD:-z}</span></span><span class="org-string"> [-cehlrtx] args"</span> &gt;&amp;<span class="org-highlight-numbers-number">2</span>; <span class="org-keyword">return</span>;;
                        l) <span class="org-variable-name">list</span>=<span class="org-highlight-numbers-number">1</span>;;
                        r) <span class="org-variable-name">typ</span>=<span class="org-string">"rank"</span>;;
                        t) <span class="org-variable-name">typ</span>=<span class="org-string">"recent"</span>;;
                        x) sed -i -e <span class="org-string">"\:^</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PWD}</span></span><span class="org-string">|.*:d"</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span>;;
                    <span class="org-keyword">esac</span>; <span class="org-variable-name">opt</span>=$<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-variable-name">opt</span>:1<span class="org-rainbow-delimiters-depth-3">}</span>; <span class="org-keyword">done</span>;;
                 *) <span class="org-variable-name">fnd</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fnd</span></span><span class="org-string">${fnd:+ }</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">"</span>;;
            <span class="org-keyword">esac</span>; <span class="org-variable-name">last</span>=$<span class="org-highlight-numbers-number">1</span>; <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">#</span></span><span class="org-string">"</span> -gt <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-3">]</span> &amp;&amp; <span class="org-builtin">shift</span>; <span class="org-keyword">done</span>
            <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fnd</span></span><span class="org-string">"</span> -a <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fnd</span></span><span class="org-string">"</span> != <span class="org-string">"^</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">PWD</span></span><span class="org-string"> "</span> <span class="org-rainbow-delimiters-depth-3">]</span> || <span class="org-variable-name">list</span>=<span class="org-highlight-numbers-number">1</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">if we hit enter on a completion just go there</span>
            <span class="org-keyword">case</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">last</span></span><span class="org-string">"</span><span class="org-keyword"> in</span>
                <span class="org-comment-delimiter"># </span><span class="org-comment">completions will always start with /</span>
                /*) <span class="org-rainbow-delimiters-depth-3">[</span> -z <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">list</span></span><span class="org-string">"</span> -a -d <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">last</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span> &amp;&amp; <span class="org-builtin">builtin</span> <span class="org-type">cd</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">last</span></span><span class="org-string">"</span> &amp;&amp; <span class="org-keyword">return</span>;;
            <span class="org-keyword">esac</span>

            <span class="org-comment-delimiter"># </span><span class="org-comment">no file yet</span>
            <span class="org-rainbow-delimiters-depth-3">[</span> -f <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">datafile</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span> || <span class="org-keyword">return</span>

            <span class="org-builtin">local</span> <span class="org-type">cd</span>
            <span class="org-type">cd</span>=<span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$( &lt; &lt;( _z_dirs )</span></span><span class="org-string"> awk -v t="</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">date</span><span class="org-string"><span class="org-sh-quoted-exec"> +%s)</span></span><span class="org-string">" -v list="</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">list</span></span><span class="org-string">" -v typ="</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">typ</span></span><span class="org-string">" -v q="</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">fnd</span></span><span class="org-string">" -F"|" '</span>
<span class="org-string">                function frecent(rank, time) {</span>
<span class="org-string">                  # relate frequency and time</span>
<span class="org-string">                  dx = t - time</span>
<span class="org-string">                  return int(10000 * rank * (3.75/((0.0001 * dx + 1) + 0.25)))</span>
<span class="org-string">                }</span>
<span class="org-string">                function output(matches, best_match, common) {</span>
<span class="org-string">                    # list or return the desired directory</span>
<span class="org-string">                    if( list ) {</span>
<span class="org-string">                        if( common ) {</span>
<span class="org-string">                            printf "%-10s %s\n", "common:", common &gt; "/dev/stderr"</span>
<span class="org-string">                        }</span>
<span class="org-string">                        cmd = "sort -n &gt;&amp;2"</span>
<span class="org-string">                        for( x in matches ) {</span>
<span class="org-string">                            if( matches[x] ) {</span>
<span class="org-string">                                printf "%-10s %s\n", matches[x], x | cmd</span>
<span class="org-string">                            }</span>
<span class="org-string">                        }</span>
<span class="org-string">                    } else {</span>
<span class="org-string">                        if( common &amp;&amp; !typ ) best_match = common</span>
<span class="org-string">                        print best_match</span>
<span class="org-string">                    }</span>
<span class="org-string">                }</span>
<span class="org-string">                function common(matches) {</span>
<span class="org-string">                    # </span><span class="org-type"><span class="org-string">find</span></span><span class="org-string"> the common root of a list of matches, if it exists</span>
<span class="org-string">                    for( x in matches ) {</span>
<span class="org-string">                        if( matches[x] &amp;&amp; (!short || length(x) &lt; length(short)) ) {</span>
<span class="org-string">                            short = x</span>
<span class="org-string">                        }</span>
<span class="org-string">                    }</span>
<span class="org-string">                    if( short == "/" ) return</span>
<span class="org-string">                    for( x in matches ) if( matches[x] &amp;&amp; index(x, short) != 1 ) {</span>
<span class="org-string">                        return</span>
<span class="org-string">                    }</span>
<span class="org-string">                    return short</span>
<span class="org-string">                }</span>
<span class="org-string">                BEGIN {</span>
<span class="org-string">                    gsub(" ", ".*", q)</span>
<span class="org-string">                    hi_rank = ihi_rank = -9999999999</span>
<span class="org-string">                }</span>
<span class="org-string">                {</span>
<span class="org-string">                    if( typ == "rank" ) {</span>
<span class="org-string">                        rank = </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span>
<span class="org-string">                    } else if( typ == "recent" ) {</span>
<span class="org-string">                        rank = </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string"> - t</span>
<span class="org-string">                    } else rank = frecent(</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">2</span></span><span class="org-string">, </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">3</span></span><span class="org-string">)</span>
<span class="org-string">                    if( </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string"> ~ q ) {</span>
<span class="org-string">                        matches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">] = rank</span>
<span class="org-string">                    } else if( tolower(</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">) ~ tolower(q) ) imatches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">] = rank</span>
<span class="org-string">                    if( matches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">] &amp;&amp; matches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">] &gt; hi_rank ) {</span>
<span class="org-string">                        best_match = </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span>
<span class="org-string">                        hi_rank = matches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">]</span>
<span class="org-string">                    } else if( imatches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">] &amp;&amp; imatches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">] &gt; ihi_rank ) {</span>
<span class="org-string">                        ibest_match = </span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span>
<span class="org-string">                        ihi_rank = imatches[</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">1</span></span><span class="org-string">]</span>
<span class="org-string">                    }</span>
<span class="org-string">                }</span>
<span class="org-string">                END {</span>
<span class="org-string">                    # prefer case sensitive</span>
<span class="org-string">                    if( best_match ) {</span>
<span class="org-string">                        output(matches, best_match, common(matches))</span>
<span class="org-string">                        exit</span>
<span class="org-string">                    } else if( ibest_match ) {</span>
<span class="org-string">                        output(imatches, ibest_match, common(imatches))</span>
<span class="org-string">                        exit</span>
<span class="org-string">                    }</span>
<span class="org-string">                    exit(1)</span>
<span class="org-string">                }</span>
<span class="org-string">            ')"</span>

            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"$?"</span> -eq <span class="org-highlight-numbers-number">0</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
              <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-type"><span class="org-string"><span class="org-variable-name">cd</span></span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-type"><span class="org-string"><span class="org-variable-name">echo</span></span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then </span><span class="org-type">echo</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-type"><span class="org-string"><span class="org-variable-name">cd</span></span></span><span class="org-string">"</span>; <span class="org-keyword">else </span><span class="org-builtin">builtin</span> <span class="org-type">cd</span> <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-type"><span class="org-string"><span class="org-variable-name">cd</span></span></span><span class="org-string">"</span>; <span class="org-keyword">fi</span>
              <span class="org-keyword">fi</span>
            <span class="org-keyword">else</span>
              <span class="org-keyword">return</span> $<span class="org-variable-name">?</span>
            <span class="org-keyword">fi</span>
        <span class="org-keyword">fi</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-builtin">alias</span> $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">_Z_CMD</span>:-z<span class="org-rainbow-delimiters-depth-2">}</span>=<span class="org-string">'_z 2&gt;&amp;1'</span>

    <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"$_Z_NO_RESOLVE_SYMLINKS"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-variable-name">_Z_RESOLVE_SYMLINKS</span>=<span class="org-string">"-P"</span>

    <span class="org-keyword">if </span><span class="org-builtin">type</span> compctl &gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;&amp;<span class="org-highlight-numbers-number">1</span>; <span class="org-keyword">then</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">zsh</span>
        <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"$_Z_NO_PROMPT_COMMAND"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-rainbow-delimiters-depth-2">{</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">populate directory list, avoid clobbering any other precmds.</span>
            <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">[</span> <span class="org-string">"$_Z_NO_RESOLVE_SYMLINKS"</span> <span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-keyword">then</span>
                _z_precmd<span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">{</span>
                    <span class="org-rainbow-delimiters-depth-4">(</span>_z --add <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PWD:a}</span></span><span class="org-string">"</span> &amp;<span class="org-rainbow-delimiters-depth-4">)</span>
                    : $<span class="org-variable-name">RANDOM</span>
                <span class="org-rainbow-delimiters-depth-3">}</span>
            <span class="org-keyword">else</span>
                _z_precmd<span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">{</span>
                    <span class="org-rainbow-delimiters-depth-4">(</span>_z --add <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{PWD:A}</span></span><span class="org-string">"</span> &amp;<span class="org-rainbow-delimiters-depth-4">)</span>
                    : $<span class="org-variable-name">RANDOM</span>
                <span class="org-rainbow-delimiters-depth-3">}</span>
            <span class="org-keyword">fi</span>
            <span class="org-rainbow-delimiters-depth-3">[</span><span class="org-rainbow-delimiters-depth-4">[</span> -n <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">{precmd_functions[(r)_z_precmd]}</span></span><span class="org-string">"</span> <span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">]</span> || <span class="org-rainbow-delimiters-depth-3">{</span>
                <span class="org-variable-name">precmd_functions</span><span class="org-rainbow-delimiters-depth-4">[</span>$<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>$<span class="org-variable-name">#</span>precmd_functions+1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-4">]</span>=_z_precmd
            <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-rainbow-delimiters-depth-2">}</span>
        _z_zsh_tab_completion<span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">tab completion</span>
            <span class="org-builtin">local</span> compl
            <span class="org-builtin">read</span> -l compl
            <span class="org-variable-name">reply</span>=<span class="org-rainbow-delimiters-depth-3">(</span>$<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-rainbow-delimiters-depth-1">(</span>f<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-string">"</span><span class="org-string"><span class="org-sh-quoted-exec">$(</span></span><span class="org-sh-quoted-exec">_z</span><span class="org-string"><span class="org-sh-quoted-exec"> --complete "$compl")</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-2">}</span>
        compctl -U -K _z_zsh_tab_completion _z
    <span class="org-keyword">elif type </span><span class="org-builtin">complete</span> &gt;/dev/null <span class="org-highlight-numbers-number">2</span>&gt;&amp;<span class="org-highlight-numbers-number">1</span>; <span class="org-keyword">then</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">bash</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">tab completion</span>
        <span class="org-builtin">complete</span> -o filenames -C <span class="org-string">'_z --complete "$COMP_LINE"'</span> $<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-variable-name">_Z_CMD</span>:-z<span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-rainbow-delimiters-depth-2">[</span> <span class="org-string">"$_Z_NO_PROMPT_COMMAND"</span> <span class="org-rainbow-delimiters-depth-2">]</span> || <span class="org-rainbow-delimiters-depth-2">{</span>
            <span class="org-comment-delimiter"># </span><span class="org-comment">populate directory list. avoid clobbering other PROMPT_COMMANDs.</span>
            <span class="org-type">grep</span> <span class="org-string">"_z --add"</span> &lt;&lt;&lt; <span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">PROMPT_COMMAND</span></span><span class="org-string">"</span> &gt;/dev/null || <span class="org-rainbow-delimiters-depth-3">{</span>
                <span class="org-variable-name">PROMPT_COMMAND</span>=<span class="org-string">"</span><span class="org-string"><span class="org-constant">$</span></span><span class="org-string"><span class="org-variable-name">PROMPT_COMMAND</span></span><span class="org-string">"</span>$<span class="org-string">'\n''(_z --add "$(</span><span class="org-sh-quoted-exec">command</span><span class="org-string"> </span><span class="org-type"><span class="org-string">pwd</span></span><span class="org-string"> '</span>$<span class="org-variable-name">_Z_RESOLVE_SYMLINKS</span><span class="org-string">' 2&gt;/dev/null)" 2&gt;/dev/null &amp;);'</span>
            <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">fi</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</details>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Nan0Scho1ar</p>
<p class="date">Created: 2021-11-14 Sun 02:56</p>
</div>
</div>
</body>
</html>
